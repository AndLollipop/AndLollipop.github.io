<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[æ­å¼€æ•°æ®åº“æ¡†æ¶ç¥ç§˜é¢çº±]]></title>
    <url>%2F2018%2F04%2F21%2F20180421_%E6%8F%AD%E5%BC%80%E6%95%B0%E6%8D%AE%E5%BA%93%E6%A1%86%E6%9E%B6%E7%A5%9E%E7%A7%98%E9%9D%A2%E7%BA%B1%2F</url>
    <content type="text"><![CDATA[å‰è¨€å¯¹äºæ•°æ®åº“ï¼Œæˆ‘ä»¬å¹¶ä¸é™Œç”Ÿï¼Œä»Sqliteæ‰‹å†™-&gt;æ•°æ®åº“æ¡†æ¶çš„ä½¿ç”¨ï¼Œ æ•°æ®åº“æ¡†æ¶OrmLiteä¼˜ç‚¹ï¼š 1.è½»é‡çº§ 2.ä½¿ç”¨ç®€å•ï¼Œæ˜“ä¸Šæ‰‹ 3.å°è£…å®Œå–„ 4.æ–‡æ¡£å…¨é¢ç¼ºç‚¹ï¼š 1.åŸºäºåå°„ï¼Œæ•ˆç‡è¾ƒä½(æœ¬äººè¿˜æ²¡æœ‰è§‰å¾—æ•ˆç‡ä½) 2.ç¼ºå°‘ä¸­æ–‡ç¿»è¯‘æ–‡æ¡£ http://ormlite.com/ LitePalLitePal æ¡†æ¶æ˜¯éƒ­å¤§ç¥å¼€æºçš„æ•°æ®åº“æ¡†æ¶ï¼Œä»–çš„åšå®¢ä¹Ÿæ¯”è¾ƒè¯¦ç»†çš„ä»‹ç»äº†å…¶ç”¨æ³•ã€‚è¿˜ä¸é”™çš„æ¡†æ¶ https://github.com/LitePalFramework/LitePal GreenDaoä¼˜ç‚¹: 1.å­˜å–é€Ÿåº¦å¿« 2.æ”¯æŒæ•°æ®åº“åŠ å¯† 3.è½»é‡çº§ 4.æ¿€æ´»å®ä½“ 5.æ”¯æŒç¼“å­˜ 6.ä»£ç è‡ªåŠ¨ç”Ÿæˆæ€»ç»“ï¼šæ•ˆç‡å¾ˆé«˜ï¼Œæ’å…¥å’Œæ›´æ–°çš„é€Ÿåº¦æ˜¯sqliteçš„2å€ï¼ŒåŠ è½½å®ä½“çš„é€Ÿåº¦æ˜¯ormliteçš„4.5å€ï¼Œç›®å‰gitä¸Šä¸€ç›´åœ¨åšæ›´æ–°ç»´æŠ¤ï¼Œstartæ•°é‡ä¸º9000å¤šã€‚ https://github.com/greenrobot/greenDAO DBFlowä¼˜ç‚¹: 1.å­˜å–é€Ÿåº¦å¿« 2.æ”¯æŒæ•°æ®åº“åŠ å¯† 3.è½»é‡çº§ 4.æ¿€æ´»å®ä½“ 5.æ”¯æŒç¼“å­˜ 6.ä»£ç è‡ªåŠ¨ç”Ÿæˆæ€»ç»“ï¼šä¹Ÿæ˜¯å¾ˆä¸é”™çš„æ•°æ®åº“æ¡†æ¶ï¼Œkotlinï¼Œrxå¥½åƒéƒ½æ”¯æŒï¼Œæ¯”GreenDao3.2çš„ä½¿ç”¨å¥½åƒè·Ÿæ–¹ä¾¿ä¸€äº›ï¼ˆè¿˜æ²¡æœ‰å…·ä½“ä½¿ç”¨ï¼‰ã€‚ç›®å‰gitä¸Šä¸€ç›´åœ¨åšæ›´æ–°ç»´æŠ¤ï¼Œæˆªæ­¢2018.1.19æ—¥å‰startæ•°é‡ä¸º3944å¤š https://github.com/Raizlabs/DBFlow Realmä¼˜ç‚¹: 1.æ˜“ç”¨ï¼šReam ä¸æ˜¯åœ¨SQLiteåŸºç¡€ä¸Šçš„ORMï¼Œå®ƒæœ‰è‡ªå·±çš„æ•°æ®æŸ¥è¯¢å¼•æ“ã€‚å¹¶ä¸”ååˆ†å®¹æ˜“ä½¿ç”¨ã€‚ 2.å¿«é€Ÿï¼šç”±äºå®ƒæ˜¯å®Œå…¨é‡æ–°å¼€å§‹å¼€å‘çš„æ•°æ®åº“å®ç°ï¼Œæ‰€ä»¥å®ƒæ¯”ä»»ä½•çš„ORMé€Ÿåº¦éƒ½å¿«å¾ˆå¤šï¼Œç”šè‡³æ¯”SLiteé€Ÿåº¦éƒ½è¦å¿«ã€‚ 3.è·¨å¹³å°ï¼šRealm æ”¯æŒ iOS &amp; OS X (Objectiveâ€‘C &amp; Swift) &amp; Androidã€‚æˆ‘ä»¬å¯ä»¥åœ¨è¿™äº›å¹³å°ä¸Šå…±äº«Realmæ•°æ®åº“æ–‡ä»¶ï¼Œå¹¶ä¸”ä¸Šå±‚é€»è¾‘å¯ä»¥ä¸ç”¨ä»»ä½•æ”¹åŠ¨çš„æƒ…å†µä¸‹å®ç°ç§»æ¤ã€‚ 4.é«˜çº§ï¼šReamæ”¯æŒåŠ å¯†ï¼Œæ ¼å¼åŒ–æŸ¥è¯¢ï¼Œæ˜“äºç§»æ¤ï¼Œæ”¯æŒJSONï¼Œæµå¼apiï¼Œæ•°æ®å˜æ›´é€šçŸ¥ç­‰é«˜çº§ç‰¹æ€§ 5.å¯è§†åŒ– https://github.com/realm/realm-java å…·ä½“è¯¦æƒ…ï¼Œè¯·ç§»æ­¥ï¼šhttps://blog.csdn.net/da_caoyuan/article/details/61414626 æ‰‹å†™ç®€æ˜“æ•°æ®åº“æ¡†æ¶æ¡†æ¶åŸåˆ™ï¼š è°ƒç”¨å±‚ä¸éœ€è¦å…³å¿ƒæ•°æ®çš„åˆ›å»ºå’Œå†å“ªé‡Œåˆ›å»º è°ƒç”¨å±‚ä¸å…³å¿ƒè¡¨çš„åˆ›å»º è°ƒç”¨å±‚ä¸å…³å¿ƒsqlè¯­å¥çš„æ‹¼å†™ï¼Œå¯¹è±¡ç›´æ¥ç»™ä½ ï¼Œä½ å¸®æˆ‘å­˜å…¥æ•°æ®åº“æœ¬æ–‡å°†è®²è§£æ•°æ®åº“çš„insertå’Œqueryæ“ä½œï¼Œå› ä¸ºdelete updateæ“ä½œç±»ä¼¼è¿™é‡Œä¾¿ä¸å¤šè¯´OKï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹Beançš„å†™æ³•123456789@DbTable("user")public class User &#123; @DbField("tb_name") private String name; @DbField("tb_age") private String age; ...... //get &amp; set&#125; æ³¨è§£çš„å†™æ³•12345@Target(ElementType.FIELD)@Retention(RetentionPolicy.RUNTIME)public @interface DbField &#123; String value();&#125; ä¸ºäº†æ›´å¥½çš„ç®¡ç†DbDaoï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªå·¥å‚ç±»ï¼Œè°ƒç”¨å±‚åªéœ€è¦ä¼ å…¥classä¾¿è¿”å›DbDao12345public &lt;M&gt; IDBDao&lt;M&gt; getDBDao(Class&lt;M&gt; entityClass) &#123; DBDao&lt;M&gt; dbDao = new DBDao&lt;&gt;(); dbDao.init(entityClass,sqLiteDatabase); // åˆå§‹åŒ– return dbDao;&#125; åˆå§‹åŒ–æ•°æ®12345678910111213141516/** * åˆå§‹åŒ– * @param entityClass * @param database */public void init(Class&lt;T&gt; entityClass, SQLiteDatabase database)&#123; this.entityClass = entityClass; this.database = database; cacheMap = new HashMap&lt;&gt;(); if(entityClass.getAnnotation(DbTable.class) == null)&#123; tableName = entityClass.getClass().getSimpleName(); &#125;else&#123; tableName = entityClass.getAnnotation(DbTable.class).value(); &#125; createTable(entityClass,database);&#125; åˆ›å»ºè¡¨ï¼Œå½¢å¦‚123456789101112131415161718192021222324252627/** * åˆ›å»ºè¡¨ç»“æ„ * @param entityClass * @param database */ private void createTable(Class&lt;T&gt; entityClass,SQLiteDatabase database) &#123; Field[] fields = entityClass.getDeclaredFields(); StringBuffer sb = new StringBuffer(); sb.append("create table if not exists "); sb.append(tableName); sb.append("("); for(int i = 0 ; i &lt; fields.length; i++)&#123; Field field = fields[i]; field.setAccessible(true); String fieldName = null; if(field.getAnnotation(DbField.class) != null)&#123; // å¦‚æœæ²¡æœ‰å†™æ³¨è§£åˆ™ä½¿ç”¨å­—æ®µåæ¥è¡¨ç¤ºæ•°æ®åº“çš„å­—æ®µ fieldName = field.getAnnotation(DbField.class).value(); &#125;else&#123; fieldName = field.getName(); &#125; sb.append(fieldName + " varchar(20),"); //ç¼“å­˜åˆ°cacheMapä¸­ cacheMap.put(fieldName,field); &#125; sb.replace(sb.toString().length() - 1,sb.toString().length(),")"); database.execSQL(sb.toString()); &#125; å¥½äº†ï¼Œåˆå§‹åŒ–æ“ä½œå®Œæˆäº†ï¼Œé‚£æˆ‘ä»¬æ€ä¹ˆæ¥insertä¸€ä¸ªæ•°æ®å‘¢ï¼Ÿå½¢å¦‚ä¸‹é¢çš„æ“ä½œ123456@Overridepublic long insert(Object entity) &#123; Map&lt;String,String&gt; map = getValues(entity); ContentValues contentValues = getContentValues(map); return database.insert(tableName,null,contentValues);&#125; çœ‹åå­—å°±çŸ¥é“getValuesæ–¹æ³•å°†å®ä½“æ•°æ®å­˜å…¥Mapé›†åˆä¸­ï¼ŒgetContentValueså°†Mapé›†åˆå°è£…ContentValues12345678910111213141516171819202122/** * å¯¹è±¡æ‹¥æœ‰çš„æˆå‘˜å˜é‡ * @param entity * @return */private Map&lt;String, String&gt; getValues(Object entity) &#123; Map&lt;String,String&gt; result = new HashMap&lt;&gt;(); Iterator&lt;String&gt; iterator = cacheMap.keySet().iterator(); while (iterator.hasNext())&#123; String cacheKey = iterator.next(); Field cacheValue = cacheMap.get(cacheKey); try &#123; if(null == cacheValue.get(entity))&#123; continue; &#125; result.put(cacheKey,cacheValue.get(entity).toString()); &#125; catch (IllegalAccessException e) &#123; e.printStackTrace(); &#125; &#125; return result;&#125; åœ¨è°ƒç”¨å±‚12userDao = DBDaoFactory.factory.getDBDao(User.class);long result = userDao.insert(user); æ¥ä¸‹æ¥æˆ‘ä»¬è®²è§£ä¸€ä¸‹æŸ¥æ‰¾æ“ä½œ1234567891011121314@Overridepublic List query(T where, String orderBy, Integer startIndex, Integer limit) &#123; Map map = getValues(where); String limitString = null; if(startIndex != null &amp;&amp; limit != null)&#123; limitString = startIndex + " , "+limit; &#125; Condition condition=new Condition(map); Cursor cursor=database.query(tableName,null,condition.getWhereClause() ,condition.getWhereArgs(),null,null,orderBy,limitString); List&lt;T&gt; result=getResult(cursor,where); cursor.close(); return result;&#125; Conditionæ˜¯æˆ‘ä»¬ç”¨æ¥ç®¡ç†whereClauseå’ŒwhereArgs12345678910111213141516171819202122232425262728class Condition&#123; private String whereClause; private String[] whereArgs; public Condition(Map&lt;String,String&gt; whereClause)&#123; ArrayList list = new ArrayList(); StringBuilder sb = new StringBuilder(); sb.append(" 1=1 "); // è¿™é‡Œçœå»äº†æœ€åçš„replaceæ“ä½œ Set keys = whereClause.keySet(); Iterator iterator = keys.iterator(); while(iterator.hasNext())&#123; String key = (String) iterator.next(); String value = whereClause.get(key); if(value != null)&#123; sb.append(" and "+key+" =?"); list.add(value); &#125; &#125; this.whereClause=sb.toString(); this.whereArgs= (String[]) list.toArray(new String[list.size()]); &#125; public String[] getWhereArgs() &#123; return whereArgs; &#125; public String getWhereClause() &#123; return whereClause; &#125;&#125; getResultæ–¹æ³•ç”¨æ¥å°†æ•°æ®åº“çš„æ•°æ®è®¾ç½®åˆ°Beanå¯¹è±¡ä¸­123456789101112131415161718192021222324252627282930313233343536373839private List&lt;T&gt; getResult(Cursor cursor, T where) &#123; ArrayList list=new ArrayList(); Object item; while (cursor.moveToNext()) &#123; try &#123; item=where.getClass().newInstance(); Iterator iterator=cacheMap.entrySet().iterator(); while (iterator.hasNext()) &#123; Map.Entry entry= (Map.Entry) iterator.next(); String colomunName= (String) entry.getKey(); Integer colmunIndex=cursor.getColumnIndex(colomunName); Field field= (Field) entry.getValue(); Class type=field.getType(); if(colmunIndex!=-1) &#123; if(type==String.class) &#123; field.set(item,cursor.getString(colmunIndex));//åå°„æ–¹å¼èµ‹å€¼ &#125;else if(type==Double.class) &#123; field.set(item,cursor.getDouble(colmunIndex)); &#125;else if(type==Integer.class) &#123; field.set(item,cursor.getInt(colmunIndex)); &#125;else if(type==Long.class) &#123; field.set(item,cursor.getLong(colmunIndex)); &#125;else &#123;//ä¸æ”¯æŒçš„ç±»å‹ continue; &#125; &#125; &#125; list.add(item); &#125; &#125; return list;&#125; OKï¼Œç®€æ˜“çš„æ•°æ®åº“æ¡†æ¶å°±æå®Œäº†ï¼Œè¦æƒ³äº†è§£æ›´å¤šè¿˜éœ€è¦æ·±å…¥æ¡†æ¶å»äº†è§£]]></content>
      <categories>
        <category>Androidæ¡†æ¶</category>
      </categories>
      <tags>
        <tag>Androidæ¡†æ¶</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Androidå±æ€§åŠ¨ç”»æºç åˆ†æ]]></title>
    <url>%2F2018%2F04%2F16%2F20180416_%E5%B1%9E%E6%80%A7%E5%8A%A8%E7%94%BB%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%2F</url>
    <content type="text"><![CDATA[å‰è¨€å¯¹äºå±æ€§åŠ¨ç”»æˆ‘ä»¬å¹¶ä¸é™Œç”Ÿï¼Œä»å¸§åŠ¨ç”»ã€è¡¥é—´åŠ¨ç”»åˆ°æœ€åçš„å±æ€§åŠ¨ç”»ï¼ŒçœŸå¯è°“æ˜¯ä¸€æ­¥ä¸€ä¸ªå‘çš„èµ°è¿‡æ¥äº†ã€‚è‡ªå·±ç»å¸¸åœ¨é¡¹ç›®ä¸­åº”ç”¨å±æ€§åŠ¨ç”»æ¥å®ç°è‡ªå®šä¹‰Viewï¼Œå¥½äº†ï¼ŒåºŸè¯å°‘è¯´ å±æ€§åŠ¨ç”»çš„ç”±æ¥å¯¹äºå±æ€§åŠ¨ç”»çš„åˆ°æ¥ç»éå¶ç„¶ï¼Œå¿…ç„¶æ˜¯ä¸ºäº†è§£å†³å¸§åŠ¨ç”»ã€è¡¥é—´åŠ¨ç”»çš„ç¼ºç‚¹æ¥çš„ï¼Œé‚£æˆ‘ä»¬æ¥è¯´ä¸€ä¸‹è¡¥é—´åŠ¨ç”»æœ‰ä»€ä¹ˆç¼ºç‚¹å‘¢ï¼Ÿ ä½œç”¨å¯¹è±¡åªå±€é™åœ¨Viewä¸Šï¼Œä½†æœ‰äº›æƒ…å†µé’ˆå¯¹è§†å›¾çš„æŸä¸ªå±æ€§ æ²¡æœ‰æ”¹å˜Viewå±æ€§ï¼Œåªæ˜¯æ”¹å˜äº†è§†è§‰çš„æ•ˆæœ åŠ¨ç”»æ•ˆæœå•ä¸€ï¼Œé‡åˆ°å¤æ‚çš„åŠ¨ç”»æ˜¾å¾—æ¯”è¾ƒåƒåŠ› å±æ€§åŠ¨ç”»çš„æºç åˆ†æåœ¨åˆ†ææºç ä¹‹å‰æˆ‘ä»¬éœ€è¦å…ˆäº†è§£ä¸€ä¸‹ç­–ç•¥æ¨¡å¼çš„æ¦‚å¿µ ç­–ç•¥æ¨¡å¼å®šä¹‰ç­–ç•¥æ¨¡å¼å®šä¹‰äº†ä¸€ç³»åˆ—çš„ç®—æ³•ï¼Œå¹¶å°†æ¯ä¸€ä¸ªç®—æ³•å°è£…èµ·æ¥ï¼Œè€Œä¸”ä½¿ä»–ä»¬ä¹‹é—´å¯ä»¥ç›¸äº’æ›¿æ¢ï¼Œç­–ç•¥æ¨¡å¼è®©ç®—æ³•ç‹¬ç«‹äºä½¿å®ƒçš„å®¢æˆ·ç‹¬ç«‹è€Œå˜åŒ– è§’è‰² ç¯å¢ƒ(Context)è§’è‰² - æŒæœ‰ä¸€ä¸ªStrategyçš„å¼•ç”¨ æŠ½è±¡ç­–ç•¥(Strategy)è§’è‰² - è¿™æ˜¯ä¸€ä¸ªæŠ½è±¡è§’è‰²ï¼Œé€šå¸¸ç”±ä¸€ä¸ªæ¥å£æˆ–æŠ½è±¡ç±»å®ç°ã€‚æ­¤è§’è‰²ç»™å‡ºæ‰€æœ‰çš„å…·ä½“ç­–ç•¥ç±»æ‰€éœ€çš„æ¥å£ã€‚ å…·ä½“ç­–ç•¥(ConcreteStrategy)è§’è‰² - åŒ…è£…äº†ç›¸å…³çš„ç®—æ³•æˆ–è¡Œä¸ºã€‚ ä¼˜ç‚¹ ç­–ç•¥æ¨¡å¼æä¾›äº†ç®¡ç†ç›¸å…³çš„ç®—æ³•æ—çš„åŠæ³•ã€‚ç­–ç•¥ç±»çš„ç­‰çº§ç»“æ„å®šä¹‰äº†ä¸€ä¸ªç®—æ³•æˆ–è¡Œä¸ºæ—ã€‚æ°å½“ä½¿ç”¨ç»§æ‰¿å¯ä»¥æŠŠå…¬å…±çš„ä»£ç ç§»åˆ°çˆ¶ç±»é‡Œé¢ï¼Œä»è€Œé¿å…ä»£ç é‡å¤ ä½¿ç”¨ç­–ç•¥æ¨¡å¼å¯ä»¥é¿å…ä½¿ç”¨å¤šé‡æ¡ä»¶(if-else)è¯­å¥ã€‚å¤šé‡æ¡ä»¶è¯­å¥ä¸æ˜“ç»´æŠ¤ï¼Œå®ƒæŠŠé‡‡å–å“ªä¸€ç§ç®—æ³•æˆ–é‡‡å–å“ªä¸€ç§è¡Œä¸ºçš„é€»è¾‘ä¸ç®—æ³•æˆ–è¡Œä¸ºçš„é€»è¾‘æ··åˆåœ¨ä¸€èµ·ï¼Œç»Ÿç»Ÿåˆ—åœ¨ä¸€ä¸ªå¤šé‡æ¡ä»¶è¯­å¥é‡Œé¢ï¼Œæ¯”ä½¿ç”¨ç»§æ‰¿çš„åŠæ³•è¿˜è¦åŸå§‹å’Œè½åã€‚ ç¼ºç‚¹ å®¢æˆ·ç«¯å¿…é¡»çŸ¥é“æ‰€æœ‰çš„ç­–ç•¥ç±»ï¼Œå¹¶è‡ªè¡Œå†³å®šä½¿ç”¨å“ªä¸€ä¸ªç­–ç•¥ç±»ã€‚è¿™å°±æ„å‘³ç€å®¢æˆ·ç«¯å¿…é¡»ç†è§£è¿™äº›ç®—æ³•çš„åŒºåˆ«ï¼Œä»¥ä¾¿é€‚æ—¶é€‰æ‹©æ°å½“çš„ç®—æ³•ç±»ã€‚æ¢è¨€ä¹‹ï¼Œç­–ç•¥æ¨¡å¼åªé€‚ç”¨äºå®¢æˆ·ç«¯çŸ¥é“ç®—æ³•æˆ–è¡Œä¸ºçš„æƒ…å†µã€‚ ç”±äºç­–ç•¥æ¨¡å¼æŠŠæ¯ä¸ªå…·ä½“çš„ç­–ç•¥å®ç°éƒ½å•ç‹¬å°è£…æˆä¸ºç±»ï¼Œå¦‚æœå¤‡é€‰çš„ç­–ç•¥å¾ˆå¤šçš„è¯ï¼Œé‚£ä¹ˆå¯¹è±¡çš„æ•°ç›®å°±ä¼šå¾ˆå¯è§‚ã€‚ å®ä¾‹å‡è®¾ç°åœ¨è¦ä¸€ä¸ªä¸Šå•†åº—ä¸ªææ´»åŠ¨ã€‚ å¯¹æ‰€æœ‰çš„é«˜çº§ä¼šå‘˜æ‰“20%çš„ä¿ƒé”€æŠ˜æ‰£ï¼›å¯¹ä¸­çº§ä¼šå‘˜æ‰“10%çš„ä¿ƒé”€æŠ˜æ‰£ï¼›å¯¹åˆçº§ä¼šå‘˜æ²¡æœ‰æŠ˜æ‰£ã€‚ ç®—æ³•ä¸€ï¼šå¯¹åˆçº§ä¼šå‘˜æ²¡æœ‰æŠ˜æ‰£ã€‚ ç®—æ³•äºŒï¼šå¯¹ä¸­çº§ä¼šå‘˜æä¾›10%çš„ä¿ƒé”€æŠ˜æ‰£ã€‚ ç®—æ³•ä¸‰ï¼šå¯¹é«˜çº§ä¼šå‘˜æä¾›20%çš„ä¿ƒé”€æŠ˜æ‰£ã€‚ æŠ½è±¡æŠ˜æ‰£ç±»12345678public interface MemberStrategy &#123; /** * è®¡ç®—å›¾ä¹¦çš„ä»·æ ¼ * @param booksPrice å›¾ä¹¦çš„åŸä»· * @return è®¡ç®—å‡ºæ‰“æŠ˜åçš„ä»·æ ¼ */ public double calcPrice(double booksPrice);&#125; åˆçº§ä¼šå‘˜æŠ˜æ‰£ç±» 12345678public class PrimaryMemberStrategy implements MemberStrategy &#123; @Override public double calcPrice(double booksPrice) &#123; System.out.println("å¯¹äºåˆçº§ä¼šå‘˜çš„æ²¡æœ‰æŠ˜æ‰£"); return booksPrice; &#125;&#125; ä¸­çº§ä¼šå‘˜æŠ˜æ‰£ç±»1234567public class IntermediateMemberStrategy implements MemberStrategy &#123; @Override public double calcPrice(double booksPrice) &#123; System.out.println("å¯¹äºä¸­çº§ä¼šå‘˜çš„æŠ˜æ‰£ä¸º10%"); return booksPrice * 0.9; &#125;&#125; ä»·æ ¼ç±»12345678910public class Price &#123; //æŒæœ‰ä¸€ä¸ªå…·ä½“çš„ç­–ç•¥å¯¹è±¡ private MemberStrategy strategy; public Price(MemberStrategy strategy)&#123; this.strategy = strategy; &#125; public double quote(double booksPrice)&#123; return this.strategy.calcPrice(booksPrice); &#125;&#125; è°ƒç”¨è€…1234567public static void main(String[] args) &#123; //é€‰æ‹©å¹¶åˆ›å»ºéœ€è¦ä½¿ç”¨çš„ç­–ç•¥å¯¹è±¡ MemberStrategy strategy = new AdvancedMemberStrategy(); Price price = new Price(strategy); double quote = price.quote(300); System.out.println("å›¾ä¹¦çš„æœ€ç»ˆä»·æ ¼ä¸ºï¼š" + quote);&#125; ç­–ç•¥æ¨¡å¼åœ¨å±æ€§åŠ¨ç”»çš„åº”ç”¨1valueAnimator.setInterpolator(new AccelerateDecelerateInterpolator()); ä¸Šé¢ä»£ç ä¾¿ä½¿ç”¨äº†ç­–ç•¥æ¨¡å¼ï¼Œå…¶ä¸­ç¯å¢ƒ(Context)è§’è‰² - ValueAnimatorç±»æŠ½è±¡ç­–ç•¥(Strategy)è§’è‰² - TimeInterpolatorå…·ä½“ç­–ç•¥(ConcreteStrategy)è§’è‰² - AccelerateDecelerateInterpolator æºç åˆ†æ]]></content>
      <categories>
        <category>Androidæºç åˆ†æ</category>
      </categories>
      <tags>
        <tag>Androidæºç åˆ†æ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Cameraä¹‹[èšç„¦]]]></title>
    <url>%2F2018%2F02%2F10%2F20180210_Camera%E8%81%9A%E7%84%A6%2F</url>
    <content type="text"><![CDATA[å‰è¨€&emsp;&emsp;ä¸Šä¸€ç¯‡æ–‡ç« æˆ‘ä»¬ä»‹ç»äº†äººè„¸è¯†åˆ«ï¼Œæœ€ååœ¨æˆ‘ä»¬å±•ç¤ºçš„å›¾ç‰‡æ—¶ä¼šçœ‹å‡ºäººè„¸æ˜¯è¯†åˆ«å‡ºæ¥äº†ï¼Œä½†æ˜¯é‚£æ˜¯ç›¸å½“æ¨¡ç³Šçš„ï¼Œè¿™ä¸€ç¯‡æ–‡ç« æˆ‘ä»¬å°±å¼€å§‹è®²èšç„¦äº†ã€‚ èšç„¦æ–¹å¼ä»‹ç» FOCUS_MODE_AUTO :è‡ªåŠ¨å¯¹ç„¦FOCUS_MODE_CONTINUOUS_PICTURE : æŒç»­å¯¹ç„¦ï¼ˆç”¨äºæ‹ç…§æ¨¡å¼ï¼‰FOCUS_MODE_CONTINUOUS_VIDEO : æŒç»­å¯¹ç„¦ï¼ˆåŒäºè§†é¢‘æ¨¡å¼ï¼‰FOCUS_MODE_EDOF :FOCUS_MODE_FIXED : å›ºå®šèšç„¦FOCUS_MODE_INFINITY : æ— ç©·è¿œèšç„¦FOCUS_MODE_MACRO : å¾®è·èšç„¦ æ‰‹æœºæ‰€æ­è½½çš„æ‘„åƒå¤´ä¸€èˆ¬éƒ½æ˜¯å®šç„¦çš„ï¼Œåªæ˜¯å„ä¸ªç„¦æ®µçš„ç‰¹æ€§ä¸ä¸€æ ·ï¼Œå³åªæœ‰ä¸€ä¸ªç„¦å¹³é¢æ˜¯å¯ä»¥åˆç„¦çš„ã€‚å› æ­¤åœ¨æ— ç©·è¿œå’Œå¾®è·æ¨¡å¼ä¸‹éƒ½æ˜¯é€šè¿‡äº‹å…ˆå†™åœ¨é©±åŠ¨ä¸­çš„ä¸€äº›å‚æ•°å»è®¾ç½®çš„ã€‚ åœ¨ä¸‹é¢æˆ‘ä»¬ä¸»è¦ä»‹ç»æŒç»­å¯¹ç„¦å’Œæ‰‹åŠ¨å¯¹ç„¦çš„å®ç° è‡ªåŠ¨å¯¹ç„¦æŒç»­å¯¹ç„¦çš„å®ç°å¾ˆç®€å•ï¼Œåˆ†ä¸ºä»¥ä¸‹ç®€å•çš„å‡ æ­¥ åˆ¤æ–­ç›¸æœºæ˜¯å¦æ”¯æŒå¯¹ç„¦è®¾ç½®ç›¸æœºçš„æŒç»­å¯¹ç„¦æ¨¡å¼å¯¹ç„¦å‰è®¾ç½® cancelAutoFocus()ä»¥ä½¿æŒç»­è‡ªåŠ¨å¯¹ç„¦æ­£å¸¸è¿è¡Œ 1234567891011121314151617181920212223242526272829//åˆ¤æ–­æ˜¯å¦æ”¯æŒèšç„¦public boolean isFocusAreaSupported() &#123; return (mParameters.getMaxNumFocusAreas() &gt; 0 &amp;&amp; isSupported(Camera.Parameters.FOCUS_MODE_AUTO, mParameters.getSupportedFocusModes())); &#125;private boolean isSupported(String value, List&lt;String&gt; supported) &#123; return supported == null ? false : supported.indexOf(value) &gt;= 0;&#125;// è®¾ç½®èšç„¦public void setFocusMode()&#123; Log.d(TAG, "setFocusMode: focus num = "+mParameters.getMaxNumFocusAreas()); if (mCamera != null &amp;&amp; isFocusAreaSupported())&#123; mCamera.cancelAutoFocus(); mParameters.setFocusMode(Camera.Parameters.FOCUS_MODE_CONTINUOUS_PICTURE); //èšç„¦çš„å›è°ƒå‡½æ•°ï¼Œå¯ä»¥åœ¨æ­¤åšéœ€è¦çš„ç•Œé¢æç¤ºè®¾è®¡ /*mCamera.setAutoFocusMoveCallback(new Camera.AutoFocusMoveCallback() &#123; @Override public void onAutoFocusMoving(boolean start, Camera camera) &#123; //ç§»åŠ¨å¯¹ç„¦çš„å›è°ƒï¼Œå¯ä»¥åœ¨æ­¤é™åˆ¶å¯¹ç„¦ç•Œé¢çš„æ˜¾ç¤º Log.d(TAG, "onAutoFocusMoving: "); &#125; &#125;);*/ &#125; &#125; å…¶ä¸­åœ¨è®¾ç½®èšç„¦ä¹‹å‰ä¸€å®šè¦æ‰§è¡Œ mCamera.cancelAutoFocus()ï¼Œå¦åˆ™è®¾ç½®çš„ç§»åŠ¨èšç„¦ä¸ä¼šç”Ÿæ•ˆï¼Œåœ¨å¼€å‘æ–‡æ¡£ä¸­å¯¹æ­¤å‡½æ•°æœ‰å¦‚ä¸‹è§£é‡Šï¼š Cancels any auto-focus function in progress. Whether or not auto-focus is currently in progress, this function will return the focus position to the default. If the camera does not support auto-focus, this is a no-op. æ‰‹åŠ¨èšç„¦]]></content>
      <categories>
        <category>æŠ€æœ¯å‘¨</category>
        <category>Cameraå¼€å‘</category>
      </categories>
      <tags>
        <tag>Cameraå¼€å‘</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Cameraä¹‹[äººè„¸è¯†åˆ«]]]></title>
    <url>%2F2018%2F02%2F03%2F20180131_Camera%E4%B9%8B%E4%BA%BA%E8%84%B8%E8%AF%86%E5%88%AB%2F</url>
    <content type="text"><![CDATA[å‰è¨€&emsp;&emsp;åœ¨ä½¿ç”¨ç›¸æœºæ—¶ï¼Œæˆ‘ä»¬ä¼šå‘ç°å¾ˆå¤šç›¸æœºéƒ½ä¼šæœ‰äººè„¸è¯†åˆ«åŠŸèƒ½ï¼Œå¼€å§‹çš„æ—¶å€™æ„Ÿè§‰å¾ˆå‰å®³ï¼Œåº”è¯¥éœ€è¦äº›å¾ˆå¤šä»£ç æ‰èƒ½å®ç°å§ï¼Œåæ¥æ‰çŸ¥é“google å·²ç»ç»™æˆ‘ä»¬æä¾›äº†äººè„¸è¯†åˆ«çš„æ¥å£ï¼Œä¸Šå±‚åªè¦æ ¹æ®æ¥å£è¿”å›çš„äººè„¸æ•°æ®è¿›è¡Œç»˜åˆ¶äººè„¸è¯†åˆ«æ¡†å°±å¯ä»¥äº†ã€‚ äººè„¸è¯†åˆ«æ¥å£FaceDetectionListener æ˜¯google æä¾›çš„ç”¨äºè¿›è¡Œäººè„¸è¯†åˆ«çš„æ¥å£ï¼Œä½¿ç”¨ä¹Ÿå¾ˆç®€å•ï¼š å®ç°æ¥å£ ä¸ºcamera æ·»åŠ ç›‘å¬ å¼€å¯äººè„¸ç›‘å¬ 123456789101112131415161718// 1. å®ç°æ¥å£private class MyFaceDection implements Camera.FaceDetectionListener&#123; @Override public void onFaceDetection(Camera.Face[] faces, Camera camera) &#123; //faces è·å–çš„äººè„¸æ•°æ® Log.d(TAG, "onFaceDetection: faces = "+faces.length); // è‡ªå®šä¹‰å®ç°çš„ç”¨äºç”»äººè„¸è¯†åˆ«æ¡†çš„ç±» if (mFaceView != null)&#123; mFaceView.setFace(faces); &#125; &#125; &#125;// 2.è®¾ç½®ç›‘å¬ mCamera.setFaceDetectionListener(listener);// 3.å¼€å¯äººè„¸è¯†åˆ«mCamera.startFaceDetection(); åœ¨è¦åœæ­¢äººè„¸æ£€æŸ¥æ—¶ 12mCamera.setFaceDetectionListener(null);mCamera.stopFaceDetection(); ç»è¿‡ä¸Šé¢ç®€å•çš„å‡ æ­¥å°±å¯ä»¥å®ç°äººè„¸è¯†åˆ«çš„ç›‘å¬å’Œåœæ­¢ç›‘å¬çš„åŠŸèƒ½ã€‚ä½†æ˜¯ç°åœ¨è¿˜ä¸èƒ½å¤ªé«˜å…´ï¼Œå› ä¸ºçœŸæ­£çš„å‘åœ¨åé¢ã€‚ ä½¿ç”¨äººè„¸è¯†åˆ«çš„æ³¨æ„ç‚¹ é¦–å…ˆå¼€å¯äººè„¸è¯†åˆ«ä¸€å®šè¦åœ¨startpreview ä¹‹å æ‰§è¡Œæ‹ç…§å®Œåè¦é‡æ–°è®¾ç½®äººè„¸è¯†åˆ«ç›‘å¬å¹¶å¼€å¯äººè„¸è¯†åˆ« åœ¨æ‰§è¡Œ autoFocus(AutoFocusCallback)(èšç„¦)æ—¶ï¼Œäººè„¸è¯†åˆ«æš‚æ—¶å¤±æ•ˆ åœ¨ä¸€æ¬¡é¢„è§ˆè°ƒç”¨åä¸èƒ½é‡å¤è°ƒç”¨ æœ‰äº›è®¾å¤‡ä¸æ”¯æŒäººè„¸è¯†åˆ«ï¼Œè®¾ç½®äººè„¸è¯†åˆ«ç›‘å¬ä¹‹å‰æœ€å¥½æ£€æµ‹æ˜¯å¦æ”¯æŒï¼šå¦‚æœmParameters.getMaxNumDetectedFaces()&gt;0 å³æ”¯æŒäººè„¸è¯†åˆ« ç”»äººè„¸è¯†åˆ«æ¡†è¿”å›çš„äººè„¸æ•°æ®æ‰€åœ¨çš„åæ ‡ç³»å¹¶ä¸æ˜¯æˆ‘ä»¬å±å¹•åæ ‡ç³»ä¸‹çš„æ•°æ®ï¼Œè€Œæ˜¯å¦‚ä¸‹åæ ‡ç³» å·¦ä¸Šè§’çš„åæ ‡æ˜¯(-1000,-1000),é¢„è§ˆç•Œé¢ä¸­å¿ƒç‚¹æ˜¯(0,0) çŸ¥é“äº†è¿™ä¸ªç‚¹ä¹‹æˆ‘ä»¬å°±å®ç°æ¥å®ç°ç”»äººè„¸è¯†åˆ«æ¡†çš„ç±» 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778public class FaceView extends View &#123; private static final String TAG = "FaceView"; private Camera.Face[] mFace; private Paint mPaint; private MainActivity mActivity; private int mDisplayOrientation; private int mOrientation; private boolean mMirror; private Matrix mMatrix = new Matrix(); public FaceView(Context context, @Nullable AttributeSet attrs) &#123; super(context, attrs); mActivity = (MainActivity)context; mPaint = new Paint(); mPaint.setAntiAlias(true); mPaint.setStyle(Paint.Style.STROKE); mPaint.setColor(Color.BLUE); mPaint.setStrokeWidth(2); &#125; public void setFace(Camera.Face[] faces)&#123; if (faces != null)&#123; Log.d(TAG, "onFaceDetection: faces = "+faces.length); &#125; mFace = faces; postInvalidate(); &#125; public void clear()&#123; mFace = null; postInvalidate(); &#125; public void setDisplayOrientation(int orientation)&#123; mDisplayOrientation = orientation; &#125; public void setOrientation(int orientation)&#123; mOrientation = orientation; postInvalidate(); &#125; public void setMirror(boolean mirror)&#123; mMirror = mirror; &#125; @Override protected void onDraw(Canvas canvas) &#123; /*rw rh è·å–çš„æ˜¯é¢„è§ˆç•Œé¢çš„å¤§å°ï¼ŒmDisplayOrientation æ˜¯ä¸Šä¸€ç¯‡ä¸­æˆ‘ä»¬ä»‹ç»çš„ ç›¸æœºéœ€è¦æ—‹è½¬ä»¥å®ç°æ­£å¸¸é¢„è§ˆçš„è§’åº¦ï¼ŒmOrientationæ˜¯æ‰‹æœºæ—‹è½¬çš„è§’åº¦ï¼ŒmMirror å‰æ‘„æ˜¯é•œåƒï¼Œåæ‘„éé•œåƒ*/ if (mFace != null &amp;&amp; mFace.length &gt; 0)&#123; int rw = mActivity.getPreviewWidth(); int rh = mActivity.getPreviewHeight(); if (((rh &gt; rw) &amp;&amp; ((mDisplayOrientation == 0) || (mDisplayOrientation == 180))) || ((rw &gt; rh) &amp;&amp; ((mDisplayOrientation == 90) || (mDisplayOrientation == 270)))) &#123; int temp = rw; rw = rh; rh = temp; &#125; Log.d(TAG, "onDraw: rw = "+rw+"; rh = "+rh+"; orientation = "+mDisplayOrientation+"; mMirror = "+mMirror); // å‡†å¤‡ä½¿è¿”å›çš„äººè„¸åæ ‡å˜æ¢ä¸ºå±å¹•åæ ‡çš„çŸ©é˜µ Util.prepareMatrix(mMatrix, mMirror, mDisplayOrientation, rw, rh); canvas.save(); mMatrix.postRotate(mOrientation); canvas.rotate(-mOrientation); RectF rect = new RectF(); for (int i = 0; i&lt;mFace.length;i++)&#123; rect.set(mFace[i].rect); mMatrix.mapRect(rect); canvas.drawRect(rect, mPaint); &#125; canvas.restore(); &#125; super.onDraw(canvas); &#125;&#125; å…¶ä¸­ Util.prepareMatrix(mMatrix, mMirror, mDisplayOrientation, rw, rh)çš„å®ç°å¦‚ä¸‹ï¼š 12345678public static void prepareMatrix(Matrix matrix,boolean isMirror,int orientation,int viewWidth, int viewHeight)&#123; matrix.setScale(isMirror?-1:1,1); matrix.postRotate(orientation); matrix.postScale(viewWidth / 2000f,viewHeight / 2000f); matrix.postTranslate(viewWidth / 2f,viewHeight / 2f); &#125; å¥½äº†ï¼Œåˆ°è¿™é‡Œæˆ‘ä»¬å°±å¯ä»¥å®ç°äººè„¸è¯†åˆ«åŠŸèƒ½äº†ï¼Œå±•ç¤ºä¸€ä¸‹æ•ˆæœ ğŸ˜‚è™½ç„¶å¾ˆæ¨¡ç³Šï¼Œä½†æ˜¯ä¼°è®¡å¤§å®¶ä¹Ÿèƒ½çœ‹å‡ºæ¥æ˜¯å¸…å¸…çš„é™ˆä¼Ÿéœ†å•¦ï¼Œä½†æ˜¯å¦‚æœçœŸçš„é‡åˆ°äº†è‡ªå·±çš„ç”·ç¥æ‹å‡ºè¿™æ ·çš„ç…§ç‰‡å²‚ä¸è¦æ°”çš„åœ¨åœ°ä¸Šè¸©ä¸¤è„šï¼Œä¸ºäº†è®©æ‰‹æœºå…å—è¿«å®³ï¼Œå°±ä¸‹æ¥çš„ä¸€ç¯‡å°±æ¥å®ç°èšç„¦ è®©æˆ‘ä»¬æ‹å‡ºçš„ç”·ç¥æ›´æ¸…æ™°ã€‚]]></content>
      <categories>
        <category>æŠ€æœ¯å‘¨</category>
        <category>Cameraå¼€å‘</category>
      </categories>
      <tags>
        <tag>Cameraå¼€å‘</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å†³æˆ˜UIç»˜åˆ¶(ä¸Šç¯‡)]]></title>
    <url>%2F2018%2F01%2F30%2F20180128_%E5%86%B3%E6%88%98UI%E7%BB%98%E5%88%B6(%E4%B8%8A%E7%AF%87)%2F</url>
    <content type="text"><![CDATA[å‰è¨€UIçš„ç»˜åˆ¶æ˜¯ä¸€ä¸ªæ¯”è¾ƒé‡è¦çš„ä¸€éƒ¨åˆ†å†…å®¹ï¼Œé€šè¿‡æœ¬ç¯‡çš„è®²è§£ï¼Œæˆ‘ä»¬å°†äº†è§£åˆ°ActivityåŠ è½½UIçš„è§†å›¾ç»“æ„ä»¥åŠViewçš„ç»˜åˆ¶æµç¨‹ã€‚æœ¬ç¯‡æ–‡ç« é€šè¿‡å¯¹é—®é¢˜è¿›è¡Œæ¢ç´¢ï¼Œåˆ†æç›¸åº”æºç å¾—åˆ°è§£ç­”ã€‚ Activityä¸­Viewçš„åŠ è½½è¿‡ç¨‹éšç€æ¯å¤©æ•²ç€é‡å¤ä»£ç å·¥ä½œï¼Œæˆ‘ä»¬æ…¢æ…¢çš„äº§ç”Ÿäº†ä¸€äº›ç–‘é—®ï¼Œè¿™é‡Œåˆ—ä¸¾è‡ªå·±çš„ä¸€äº›ç–‘é—®1ã€åªçŸ¥é“setContentViewèƒ½æ˜¾ç¤ºè§†å›¾ï¼Œä½†ä¸çŸ¥é“ä¸ºä»€ä¹ˆè°ƒç”¨äº†ä¹‹åå°±å¯ä»¥æ˜¾ç¤º2ã€PhoneWindowæ˜¯ä»€ä¹ˆï¼ŸWindowå’Œå®ƒæ˜¯ä»€ä¹ˆå…³ç³»?3ã€DecorViewæ˜¯åšä»€ä¹ˆçš„ï¼Ÿå’Œæˆ‘ä»¬çš„å¸ƒå±€åˆæœ‰ä»€ä¹ˆæ ·çš„å…³ç³»ï¼Ÿ4ã€requestFeatureä¸ºä»€ä¹ˆè¦åœ¨setContentViewä¹‹å‰è°ƒç”¨OKï¼Œé’ˆå¯¹ä»¥ä¸Šé—®é¢˜æˆ‘ä»¬å¼€å§‹äº†å­¦ä¹ æºç çš„å…´è¶£ï¼Œè¿›å…¥setContentView1234public void setContentView(@LayoutRes int layoutResID) &#123; getWindow().setContentView(layoutResID); initWindowDecorActionBar();&#125; getWindow()æ˜¯windowå¯¹è±¡ï¼Œé‚£å®ƒçš„å®ç°ç±»æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥åœ¨attachæ–¹æ³•é‡Œé¢çœ‹åˆ°mWindow = new PhoneWindow(this, window, activityConfigCallback); è¿™æ ·å°±æ¸…æ™°äº†ï¼ŒPhoneWindowæ˜¯Windowçš„å­ç±»ï¼Œé€šè¿‡çœ‹å®˜ç½‘è§£é‡ŠçŸ¥é“PhoneWindowæ˜¯windowçš„å”¯ä¸€å­ç±» è¿›å…¥PhoneWindow123456789101112131415161718192021@Overridepublic void setContentView(int layoutResID) &#123; if (mContentParent == null) &#123; installDecor(); // 1 &#125; else if (!hasFeature(FEATURE_CONTENT_TRANSITIONS)) &#123; mContentParent.removeAllViews(); // 2 &#125; if (hasFeature(FEATURE_CONTENT_TRANSITIONS)) &#123; //3 final Scene newScene = Scene.getSceneForLayout(mContentParent, layoutResID, getContext()); transitionTo(newScene); &#125; else &#123; mLayoutInflater.inflate(layoutResID, mContentParent); // 4 &#125; mContentParent.requestApplyInsets(); final Callback cb = getCallback(); if (cb != null &amp;&amp; !isDestroyed()) &#123; // 5 cb.onContentChanged(); &#125; mContentParentExplicitlySet = true;&#125; 1ã€ç”ŸæˆDecorViewå¯¹è±¡2ã€å½“ä¸æ˜¯ç¬¬ä¸€æ¬¡è¿›å…¥çš„æ—¶å€™æ‰§è¡ŒmContentParent.removeAllViewsæ–¹æ³•ï¼Œè¿™æ ·æˆ‘ä»¬åœ¨Activityå¤šæ¬¡setContentViewçš„æ—¶å€™å°†é‡æ–°åŠ è½½å¸ƒå±€3ã€åˆ¤æ–­æ˜¯å¦æœ‰è½¬åœºåŠ¨ç”»ï¼Œå¦‚æœæœ‰çš„è¯åˆ™ä½¿ç”¨TranstionManageræ¥è¿›è¡Œåˆ‡æ¢ï¼Œåœ¨è®²è§£ContraintSetçš„æ—¶å€™æœ‰è®²è§£åˆ°4ã€å°†layoutResIdå¸ƒå±€æ·»åŠ åˆ°mContentParentè§†å›¾ä¸­5ã€å½“åˆå§‹åŒ–å®Œæ¯•ä¹‹åè°ƒç”¨Activityçš„onContentChangedæ–¹æ³•(åœ¨æˆ‘ä»¬æŸ¥çœ‹Activityçš„attachæ–¹æ³•çš„æ—¶å€™æœ‰è¿™æ ·ä¸€è¡Œä»£ç mWindow.setCallback(this))ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨onContentChangedæ–¹æ³•é‡Œé¢åšä¸€äº›initViewæ“ä½œäº†OKï¼Œå½“é¦–æ¬¡è¿›å…¥çš„æ—¶å€™æ‰§è¡ŒinstallDecoræ–¹æ³•1234567891011121314private void installDecor() &#123; mForceDecorInstall = false; if (mDecor == null) &#123; mDecor = generateDecor(-1); mDecor.setDescendantFocusability(ViewGroup.FOCUS_AFTER_DESCENDANTS); mDecor.setIsRootNamespace(true); ...... &#125; else &#123; mDecor.setWindow(this); &#125; if (mContentParent == null) &#123; mContentParent = generateLayout(mDecor); .......&#125; é€šè¿‡æŸ¥çœ‹generateDecoræ–¹æ³•å¯çŸ¥DecorViewæ˜¯FrameLayoutçš„å­ç±»12345678910111213141516171819protected ViewGroup generateLayout(DecorView decor) &#123; // Apply data from current theme. TypedArray a = getWindowStyle(); ......//è®¾ç½®Flagå’ŒFeature WindowManager.LayoutParams params = getAttributes(); ......//è®¾ç½®èƒŒæ™¯é¢œè‰² // å¡«å……DecorView int layoutResource; ......//è®¾ç½®DecorViewçš„å¸ƒå±€æ–‡ä»¶ mDecor.startChanging(); mDecor.onResourcesLoaded(mLayoutInflater, layoutResource); ViewGroup contentParent = (ViewGroup)findViewById(ID_ANDROID_CONTENT); if (contentParent == null) &#123; throw new RuntimeException("Window couldn't find content container view"); &#125; ...... mDecor.finishChanging(); return contentParent;&#125; ä»ä¸Šé¢çš„åˆ†æçŸ¥é“contentParentæ˜¯android.R.id.contentçš„æ§ä»¶ï¼ŒOKï¼Œæˆ‘ä»¬ä»¥screen_simpleä¸ºä¾‹12345678910111213141516171819&lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" android:layout_width="match_parent" android:layout_height="match_parent" android:fitsSystemWindows="true" android:orientation="vertical"&gt; &lt;ViewStub android:id="@+id/action_mode_bar_stub" android:inflatedId="@+id/action_mode_bar" android:layout="@layout/action_mode_bar" android:layout_width="match_parent" android:layout_height="wrap_content" android:theme="?attr/actionBarTheme" /&gt; &lt;FrameLayout android:id="@android:id/content" android:layout_width="match_parent" android:layout_height="match_parent" android:foregroundInsidePadding="false" android:foregroundGravity="fill_horizontal|top" android:foreground="?android:attr/windowContentOverlay" /&gt;&lt;/LinearLayout&gt; æˆ‘ä»¬çœ‹åˆ°contentParentæ˜¯FrameLayoutå¸ƒå±€ï¼Œå¤–å±‚æ˜¯çº¿æ€§å¸ƒå±€ï¼Œè¿™æ ·æˆ‘ä»¬çš„æ•´ä¸ªViewçš„å±‚çº§ç»“æ„å¼„æ¸…æ¥šäº†ï¼Œå¤–å±‚æ˜¯ç»§æ‰¿FrameLayoutçš„DecorViewï¼Œé‡Œé¢åŒ…è£¹LinearLayoutï¼Œåœ¨é‡Œé¢æœ‰ActionBarã€ç»§æ‰¿FrameLayoutå¸ƒå±€çš„contentParentï¼Œæ¥ä¸ªå›¾ç†Ÿæ‚‰ä¸€ä¸‹ï¼šok,å¤§è‡´çš„å±‚çº§ç»“æ„æˆ‘ä»¬ä¹Ÿéƒ½ç†Ÿæ‚‰äº†ï¼Œé‚£æˆ‘ä»¬çš„å†™çš„å¸ƒå±€æ˜¯å¦‚ä½•æ·»åŠ åˆ°contentParenté‡Œé¢çš„å‘¢ï¼Ÿé’ˆå¯¹è¿™ä¸ªé—®é¢˜æˆ‘ä»¬éœ€è¦åˆ†æä¸€ä¸‹mLayoutInflater.inflate(layoutResID, mContentParent)æ–¹æ³•å†…éƒ¨åšäº†ä»€ä¹ˆæ“ä½œ1234567891011121314151617181920212223242526272829303132333435363738394041public View inflate(XmlPullParser parser, @Nullable ViewGroup root, boolean attachToRoot) &#123; synchronized (mConstructorArgs) &#123; View result = root; try &#123; while ((type = parser.next()) != XmlPullParser.START_TAG &amp;&amp; type != XmlPullParser.END_DOCUMENT) &#123; // å¾ªç¯éå†æ‰¾åˆ°æ ¹æ ‡ç­¾ // Empty &#125; ....... if (TAG_MERGE.equals(name)) &#123; if (root == null || !attachToRoot) &#123; // å½“rootä¸ºmergeçš„æ—¶å€™ï¼Œåˆ¤æ–­root==nullæˆ–è€…attachToRoot=falseåˆ™æŠ›å¼‚å¸¸ throw new InflateException("&lt;merge /&gt; can be used only with a valid " + "ViewGroup root and attachToRoot=true"); &#125; rInflate(parser, root, inflaterContext, attrs, false); &#125; else &#123; //æ ¹æ®è·å–çš„Tagåˆ›å»ºç›¸åº”çš„View final View temp = createViewFromTag(root, name, inflaterContext, attrs); ViewGroup.LayoutParams params = null; if (root != null) &#123; // å¾—åˆ°rootç”ŸæˆLayoutparams params = root.generateLayoutParams(attrs); if (!attachToRoot) &#123; // 1 temp.setLayoutParams(params); &#125; &#125; // å¡«å……æ‰€æœ‰çš„å­Viewæ·»åŠ åˆ°tempä¸­ rInflateChildren(parser, temp, attrs, true); // 2 if (root != null &amp;&amp; attachToRoot) &#123; // 3 root.addView(temp, params); &#125; // å†³å®šæ˜¯å¦è¿”å›rootè¿˜æ˜¯temp if (root == null || !attachToRoot) &#123; // 4 result = temp; &#125; &#125; &#125; return result; &#125; &#125; æˆ‘ä»¬æ¥å¯¹1/3/4è¿›è¡Œåˆ†æä¸‹ï¼Œå› ä¸ºè¿™å‡ ä¸ªéƒ½æ¶‰åŠåˆ°äº†rootå’ŒattachToRoot1ã€attachToRoot = falseçš„æƒ…å†µä¸‹ï¼Œ1å°†æ‰§è¡Œtempçš„LayoutParams=rootçš„LayoutParams 3å°†ä¸æ‰§è¡Œ 4å°†æ‰§è¡Œ ï¼Œæ‰€ä»¥å¯ä»¥å¾—å‡ºè¿™æ ·çš„ç»“è®ºï¼šå½“attachToRootè¿”å›falseçš„æ—¶å€™ï¼Œinflateå¾—åˆ°çš„æ˜¯å¸ƒå±€ç”Ÿæˆçš„viewé‡Œé¢çš„å¸ƒå±€å‚æ•°å’Œä¼ å…¥çš„rootå‚æ•°ä¸€æ ·ï¼Œå¹¶ä¸”å†…éƒ¨å¹¶æ²¡æœ‰æ·»åŠ åˆ°rootä¸Šï¼Œéœ€è¦æ‰‹åŠ¨addView2ã€attachToRoot = trueçš„æƒ…å†µä¸‹ï¼Œ1å°†ä¸æ‰§è¡Œ 3å°†æ‰§è¡Œ 4å°†ä¸æ‰§è¡Œï¼Œæ‰€ä»¥å¯ä»¥å¾—å‡ºè¿™æ ·çš„ç»“è®ºï¼šå½“attachToRootè¿”å›trueçš„æ—¶å€™ï¼Œinflateå¾—åˆ°çš„æ˜¯rootå¹¶ä¸”å†…éƒ¨å°†è‡ªåŠ¨å°†å¸ƒå±€ç”Ÿæˆçš„viewæ·»åŠ åˆ°rootä¸­ok,è¿˜æœ‰2æ²¡æœ‰è¿›è¡Œåˆ†æï¼Œæ¥çœ‹2çš„æºç 12345678910111213141516171819202122232425262728293031void rInflate(XmlPullParser parser, View parent, Context context, AttributeSet attrs, boolean finishInflate) throws XmlPullParserException, IOException &#123; final int depth = parser.getDepth(); while (((type = parser.next()) != XmlPullParser.END_TAG || parser.getDepth() &gt; depth) &amp;&amp; type != XmlPullParser.END_DOCUMENT) &#123; if (type != XmlPullParser.START_TAG) &#123; continue; &#125; final String name = parser.getName(); if (TAG_TAG.equals(name)) &#123; parseViewTag(parser, parent, attrs); &#125; else if (TAG_INCLUDE.equals(name)) &#123; if (parser.getDepth() == 0) &#123;// è¿™é‡Œåˆ¤æ–­includeæ˜¯å¦æ ¹Viewï¼Œå¦‚æœæ˜¯æ ¹Viewåˆ™æŠ¥é”™ throw new InflateException("&lt;include /&gt; cannot be the root element"); &#125; parseInclude(parser, context, parent, attrs); &#125; else if (TAG_MERGE.equals(name)) &#123; // å¦‚æœå‘ç°æ˜¯mergeçš„è¯åˆ™æŠ¥é”™ å› ä¸ºmergeå¿…é¡»æ˜¯æ ¹å…ƒç´  throw new InflateException("&lt;merge /&gt; must be the root element"); &#125; else &#123; // é€’å½’è°ƒç”¨rInflateChildrenå¹¶å°†å­viewæ·»åŠ åˆ°viewGroupä¸­ final View view = createViewFromTag(parent, name, context, attrs); final ViewGroup viewGroup = (ViewGroup) parent; final ViewGroup.LayoutParams params = viewGroup.generateLayoutParams(attrs); rInflateChildren(parser, view, attrs, true); viewGroup.addView(view, params); &#125; &#125; if (finishInflate) &#123; // å½“finishInflateä¸ºtrueçš„è¯åˆ™è°ƒç”¨Parentçš„onFinishInflateæ–¹æ³• parent.onFinishInflate(); &#125;&#125; ok,LayoutInflaterçš„å¡«å……è§†å›¾å°±å®Œäº†ï¼Œæœ€åæ¥ä¸ªå›¾ç†Ÿæ‚‰ä¸€ä¸‹æµç¨‹ï¼š AppCompatActivityä¸­Viewçš„åŠ è½½è¿‡ç¨‹æœªå®Œï¼Œå¾…ç»­â€¦]]></content>
      <categories>
        <category>æŠ€æœ¯å‘¨</category>
        <category>ç©è½¬UI</category>
      </categories>
      <tags>
        <tag>ç©è½¬UI</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ‰‹å†™IOCæ¶æ„]]></title>
    <url>%2F2018%2F01%2F28%2F20180126_%E6%89%8B%E5%86%99IOC%E6%9E%B6%E6%9E%84%2F</url>
    <content type="text"><![CDATA[å‰è¨€&emsp;&emsp;è¿™ç¯‡æˆ‘ä»¬æ¥è®²è§£ä¸€ä¸‹IOCæ¶æ„ï¼ŒIOCåä¸ºæ§åˆ¶åè½¬ï¼ˆInversion of Controlï¼Œè‹±æ–‡ç¼©å†™ä¸ºIoCï¼‰ï¼ŒIOCçš„åŸåˆ™å°±æ˜¯æ— éœ€è‡ªå·±æ¥newå¯¹è±¡ï¼Œç­‰å¾…åŠ è½½è¿™ä¸ªç±»çš„æ—¶å€™ï¼ŒIOCå¸®ä½ æ³¨å…¥ï¼ˆnewï¼‰è¿›å»ï¼Œå¥½å•¦ï¼ç½‘ä¸Šå·²ç»æœ‰å¥½å¤šçš„æ–‡ç« äº†ï¼Œé‚£è¿˜ä¸ºå•¥è¿˜è¦å†™å‘¢ï¼Œæ„Ÿè§‰åˆ«äººå†™çš„æ˜¯åˆ«äººçš„ï¼Œè‡ªå·±å†™äº†ä¹‹åæ‰æ˜¯è‡ªå·±çš„ï¼Œæ‰€ä»¥è‡ªå·±åšæŒä¹Ÿè¦å†™ä¸€ä¸‹ï¼Œä¸‹é¢æœ‰ä¸€äº›å†™çš„ä¸é”™çš„æ–‡ç« ä¾›å¤§å®¶è§‚æ‘©ã€‚ Android è¿›é˜¶ æ•™ä½ æ‰“é€  Android ä¸­çš„ IOC æ¡†æ¶ ã€ViewInjectã€‘ ï¼ˆä¸Šï¼‰http://blog.csdn.net/lmj623565791/article/details/39269193Android è¿›é˜¶ æ•™ä½ æ‰“é€  Android ä¸­çš„ IOC æ¡†æ¶ ã€ViewInjectã€‘ ï¼ˆä¸Šï¼‰http://blog.csdn.net/lmj623565791/article/details/39269193 ä»£ç†æ¨¡å¼åŸæœ¬ä»£ç†æ¨¡å¼åº”è¯¥æ”¾åˆ°è®¾è®¡æ¨¡å¼æ¿å—ï¼Œä½†æ˜¯åœ¨æœ¬æ–‡ä¸­ä½¿ç”¨åˆ°äº†ï¼Œè¿™é‡Œä¹Ÿä»‹ç»ä¸€ä¸‹å§ï¼Œä»£ç†æ¨¡å¼åˆ†ä¸ºåŠ¨æ€ä»£ç†å’Œé™æ€ä»£ç†ï¼Œå½“ç„¶åœ¨Javawebä¸­ä¹Ÿæœ‰CGLibåŠ¨æ€ä»£ç†ï¼Œè¿™é‡Œæˆ‘ä»¬æ¥è¯¦ç»†ä»‹ç»ä¸€ä¸‹å®ƒä»¬çš„åŒºåˆ«å’Œæ¼”è¿›è¿‡ç¨‹ï¼Œletâ€™s goåœ¨å¼€å§‹ä¹‹å‰æˆ‘ä»¬å…ˆæ¥ä»æ— ä»£ç†å¼€å§‹è®²èµ·æ— ä»£ç†å…ˆæ¥çœ‹ä¸€ä¸‹ä»£ç ï¼Œå¾ˆç®€å•123public interface Humen&#123; void eat(String food);&#125; 12345public class HumenImpl extends Humen&#123; void eat(String food)&#123; System.out.println("eat"); &#125;&#125; ä¸Šé¢çš„ä»£ç å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªäººåƒé¥­ï¼Œå¦‚æœæˆ‘ä»¬è¦åœ¨åƒé¥­å‰å’Œåƒé¥­åéœ€è¦åšä¸€äº›äº‹è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿæˆ–è€…ä¿®æ”¹HumenImplå†…éƒ¨çš„ä»£ç æˆ–è€…é‡å†™ä¸€ä¸ªeatæ–¹æ³•ç­‰ç­‰ï¼Œè¿™äº›éƒ½è®¾å®šäº†æ­»çš„ä¸šåŠ¡é€»è¾‘ï¼Œåœ¨ä»£ç å¤ç”¨å’Œä¸šåŠ¡æ‹“å±•çš„è§’åº¦çœ‹è¿™æ˜¯éå¸¸ä¸å¥½çš„åšæ³•é™æ€ä»£ç†å¯¹ä¸Šé¢çš„ä»£ç è¿›è¡Œæ”¹é€ 123456789101112131415161718public class HumenProxy implements Humen &#123; private Humen humen; public HumenProxy(Humen humen)&#123; this.humen = humen; &#125; @Override public void eat(String food) &#123; before(); humen.eat(food); after(); &#125; private void before() &#123; &#125; private void after() &#123; &#125;&#125; é™æ€ä»£ç†ä¸ºæˆ‘ä»¬å¸¦æ¥äº†ä¸€å®šçš„çµæ´»æ€§ï¼Œåœ¨ä¸ä¿®æ”¹è¢«ä»£ç†ç±»çš„åŸºç¡€ä¸Šï¼Œå®ç°ä¿®æ”¹å°‘é‡çš„ä»£ç æ¥è·å¾—é¢å¤–çš„åŠŸèƒ½ã€‚é‚£é™æ€ä»£ç†æ˜¯å¦çœŸæ­£å°±èƒ½æ»¡è¶³æ‰€æœ‰çš„éœ€æ±‚å‘¢ï¼Ÿç­”æ¡ˆæ˜¯no,æˆ‘ä»¬æ¥ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœæˆ‘ä»¬è¿˜æœ‰å…¶ä»–çš„é€»è¾‘å¹¶ä¸”beforeå’Œafteræ˜¯ä¸€æ ·çš„ï¼Œé‚£è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿæˆ‘ä»¬å¯èƒ½è®©è¿™ä¸ªä»£ç†ç±»æ¥å®ç°åˆ«çš„æ¥å£çš„æ–¹æ³•ï¼Œä½†è¿™äº›æ–¹æ³•çš„è°ƒç”¨é€»è¾‘åŸºæœ¬ä¸Šç›¸ä¼¼ï¼Œæˆ‘ä»¬å°±éœ€è¦å†™å¾ˆå¤šçš„ä»£ç æ¥å®Œæˆç›¸åº”çš„éœ€æ±‚ï¼Œè¿™æ ·å°±è¡ç”Ÿå‡ºäº†åŠ¨æ€ä»£ç† åŠ¨æ€ä»£ç†12345678910111213public class DynamicProxy implements InvocationHandler &#123; private Object target; public DynamicProxy(Object target)&#123; this.target = target; &#125; @Override public Object invoke(Object proxy, Method method, Object[] args) throws Throwable &#123; before(); Object result = method.invoke(target, args); after(); return result; &#125;&#125; è°ƒç”¨12345678910public static void main(String[] args) &#123; Humen humen = new HumenImpl(); DynamicProxy dynamicProxy = new DynamicProxy(humen); Humen humenProxy = (Humen) Proxy.newProxyInstance( humen.getClass().getClassLoader(), humen.getClass().getInterfaces(), dynamicProxy); humenProxy.eat("rice");&#125; é™æ€ä»£ç†å’ŒåŠ¨æ€ä»£ç†éƒ½è®²å®Œäº†ï¼Œæ€»ç»“ä¸€ä¸‹ ç„¶è€Œï¼ŒProxyå·²ç»è®¾è®¡çš„éå¸¸çš„å®Œç¾äº†ï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰ä¸€ç‚¹ç‚¹å°å°çš„é—æ†¾ä¹‹å¤„ï¼Œé‚£å°±æ˜¯å®ƒæ— æ³•ä»…æ”¯æŒinterfaceçš„æ¡æ¢ã€‚ä¸å®Œç¾å¹¶ä¸ç­‰äºä¸ä¼Ÿå¤§ï¼Œä¼Ÿå¤§æ˜¯ä¸€ç§æœ¬è´¨ï¼ŒJava åŠ¨æ€ä»£ç†å°±æ˜¯ä¸€ä¸ªä¾‹å­ã€‚ CGLibåŠ¨æ€ä»£ç†é“¾æ¥åœ°å€ï¼šhttps://sourceforge.net/projects/cglib/files/CGlibåŠ¨æ€ä»£ç†æ˜¯é€šè¿‡ç»§æ‰¿ä¸šåŠ¡ç±»ï¼Œç”Ÿæˆçš„åŠ¨æ€ä»£ç†ç±»æ˜¯ä¸šåŠ¡ç±»çš„å­ç±»ï¼Œé€šè¿‡é‡å†™ä¸šåŠ¡æ–¹æ³•è¿›è¡Œä»£ç†ã€‚CGLibæ˜¯ä¸€ä¸ªç±»åº“ è¢«ä»£ç†ç±»12345public class BookFace &#123; public void add()&#123; System.out.println("add BookFace"); &#125;&#125; GCLibä»£ç†ç±»123456789101112131415161718192021222324public class CGLibProxy implements MethodInterceptor&#123; private Object target; public Object getInstance(Object target)&#123; this.target = target; // ç»™ä¸šåŠ¡å¯¹è±¡èµ‹å€¼ Enhancer enhancer = new Enhancer(); // åˆ›å»ºåŠ é€Ÿå™¨ï¼Œç”¨æ¥åˆ›å»ºåŠ¨æ€ä»£ç† enhancer.setSuperclass(this.target.getClass()); // ä¸ºåŠ é€Ÿå™¨æŒ‡å®šè¦ä»£ç†çš„ä¸šåŠ¡ç±» enhancer.setCallback(this);// å¯¹äºä»£ç†ç±»ä¸Šçš„æ‰€æœ‰æ–¹æ³•çš„è°ƒç”¨éƒ½ä¼šè°ƒç”¨CallBackï¼Œè€ŒCallBackåˆ™éœ€è¦å®ç°interceptæ–¹æ³•è¿›è¡Œæ‹¦æˆª return enhancer.create(); // åˆ›å»ºåŠ¨æ€ä»£ç†ç±»å¯¹è±¡å¹¶è¿”å› &#125; @Override public Object intercept(Object arg0, Method arg1, Object[] arg2, MethodProxy proxy) throws Throwable &#123; before(); Object result = proxy.invokeSuper(arg0, arg2);// æ³¨æ„è¿™é‡Œè°ƒç”¨çš„æ˜¯invokeSuperæ–¹æ³• after(); return result; &#125; private void before() &#123; System.out.println("before"); &#125; private void after() &#123; System.out.println("after"); &#125;&#125; è°ƒç”¨123456public static void main(String[] args) &#123; BookFace bookface = new BookFace(); CGLibProxy cgLibProxy = new CGLibProxy(); BookFace bookFaceProxy = (BookFace) cgLibProxy.getInstance(bookface); bookFaceProxy.add();&#125; åœ¨ä½¿ç”¨CGLibåŠ¨æ€ä»£ç†çš„ä¼˜åŠ¿æ˜¯å¾ˆæ˜æ˜¾äº†ï¼Œå¯¹å®ƒæˆ‘ä»¬å°±å¯ä»¥æˆ‘æ²¡æœ‰æ¥å£çš„ç±»åŒ…è£…å‰ç½®å’Œåç½®æ–¹æ³•äº†ï¼Œè™½ç„¶CGLibä¸éœ€è¦æ¥å£ä¿¡æ¯ï¼Œä½†æ˜¯å®ƒæ‹¦æˆªå¹¶åŒ…è£…è¢«ä»£ç†ç±»çš„æ‰€æœ‰æ–¹æ³•ã€‚ç»¼ä¸Šï¼Œå„æœ‰ä¼˜åŠ¿ï¼Œçµæ´»æŒæ¡ æ‰‹å†™IOCæ¶æ„XUtilsçš„ä½¿ç”¨ï¼šhttps://github.com/wyouflf/xUtils3å½“ç„¶åœ¨æœ¬æ–‡ä¸­å¹¶éå°†XUtilsä¸­çš„æ‰€æœ‰å†…å®¹éƒ½è®²è§£ä¸€éï¼Œè¿™é‡Œä¸»è¦é’ˆå¯¹ä¸‰ä¸ªæ¨¡å—ï¼šsetContentViewã€findViewByIdåˆå§‹åŒ–Viewã€äº‹ä»¶ setContentViewåˆå§‹åŒ–å¸ƒå±€æ¯”è¾ƒç®€å•ï¼Œå°±æ˜¯ç®€å•çš„åå°„è§„åˆ™123456789101112131415public static void injectLayout(Context context) &#123; int layoutId = 0; Class&lt;?&gt; clazz = context.getClass(); //æ‹¿åˆ°MainActivityç±»ä¸Šé¢çš„æ³¨è§£ ContentView contentView = clazz.getAnnotation(ContentView.class); if (contentView != null) &#123; layoutId = contentView.value(); try &#123; Method method = clazz.getMethod("setContentView", int.class); method.invoke(context, layoutId); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125;&#125; findViewByIdåˆå§‹åŒ–View12345678910111213141516171819202122232425262728public static void injectView(Context context) &#123; Class&lt;?&gt; aClass = context.getClass(); //è·å–åˆ°MainActivityé‡Œé¢æ‰€æœ‰çš„æˆå‘˜å˜é‡ åŒ…å« textView Field[] fields = aClass.getDeclaredFields(); for (Field field : fields) &#123; //å¾—åˆ°æˆå‘˜å˜é‡çš„æ³¨è§£ ViewInject viewInject = field.getAnnotation(ViewInject.class); if (viewInject != null) &#123; //æ‹¿åˆ°id R.id.text int valueId = viewInject.value(); try &#123; //View view=activity.findViewById() Method method = aClass.getMethod("findViewById", int.class); //åå°„è°ƒç”¨æ–¹æ³• View view = (View) method.invoke(context, valueId); field.setAccessible(true); field.set(context, view); &#125; catch (NoSuchMethodException e) &#123; e.printStackTrace(); &#125; catch (InvocationTargetException e) &#123; e.printStackTrace(); &#125; catch (IllegalAccessException e) &#123; e.printStackTrace(); &#125; &#125; &#125;&#125; äº‹ä»¶å¤„ç†äº‹ä»¶å¤„ç†å°±æœ‰å¿…è¦äº†è§£ä¸€ä¸‹äº‹ä»¶ä¸‰è¦ç´ ï¼šäº‹ä»¶æºã€äº‹ä»¶ã€äº‹ä»¶å›è°ƒï¼Œå¦‚ä¸‹å›¾ï¼š ä¸ºäº†å­˜å‚¨äº‹ä»¶çš„ä¸‰è¦ç´ ï¼Œè¿™é‡Œä½¿ç”¨äº†æ³¨è§£ä¸­çš„æ³¨è§£1234567891011121314151617181920212223242526272829@Retention(RetentionPolicy.RUNTIME)@Target(ElementType.ANNOTATION_TYPE)public @interface EventBase &#123; /** * è®¾ç½®ç›‘å¬çš„æ–¹æ³• * @return */ String listenerSetter(); /** * äº‹ä»¶ç±»å‹ * @return */ Class&lt;?&gt; listenerType(); /** * å›è°ƒæ–¹æ³• * äº‹ä»¶è¢«è§¦å‘åï¼Œæ‰§è¡Œå›è°ƒæ–¹æ³•åç§° */ String callBackMethod();&#125;@Retention(RetentionPolicy.RUNTIME)@Target(ElementType.METHOD)@EventBase(listenerSetter = "setOnClickListener", listenerType = View.OnClickListener.class, callBackMethod = "onClick")public @interface OnClick&#123; int[] value();&#125; å½“åœ¨æ–¹æ³•ä¸Šå†™äº†@OnClick({R.id.a,R.id.b})è¿™ç§ï¼Œè¯¥æ€ä¹ˆå–å‡ºç›¸åº”çš„IDå’ŒçŸ¥é“è¯¥IDçš„æ§ä»¶è¦è®¾ç½®å“ªä¸ªç‚¹å‡»äº‹ä»¶ï¼Œè¿™æ—¶å€™å°±éœ€è¦å¯¹Methodè¿›è¡Œéå†äº†å–å‡ºäº‹ä»¶ä¸‰è¦ç´ 1234567891011121314151617181920212223//è·å–Activityé‡Œé¢ æ‰€æœ‰æ–¹æ³•Method[] methods = clazz.getDeclaredMethods();//éå†Activityæ‰€æœ‰æ–¹æ³•for (Method method : methods) &#123;//è·å–æ–¹æ³•ä¸Šæ‰€æœ‰çš„æ³¨è§£Annotation[] annotations = method.getAnnotations();for (Annotation annotation : annotations) &#123; //è·å–æ³¨è§£ anntionType OnClick OnLongClck Class&lt;?&gt; anntionType = annotation.annotationType(); //è·å–æ³¨è§£çš„æ³¨è§£ onClick æ³¨è§£ä¸Šé¢çš„EventBase EventBase eventBase = anntionType.getAnnotation(EventBase.class); if (eventBase == null) &#123; continue; &#125; /* å¼€å§‹è·å–äº‹ä»¶ä¸‰è¦ç´  é€šè¿‡åå°„æ³¨å…¥è¿›å» 1 listenerSetter è¿”å› setOnClickListenerå­—ç¬¦ä¸² */ String listenerSetter = eventBase.listenerSetter(); //å¾—åˆ° listenerType--ã€‹ View.OnClickListener.class, Class&lt;?&gt; listenerType = eventBase.listenerType(); //callMethod---&gt;onClick String callMethod = eventBase.callBackMethod(); å–å‡ºonClickçš„IDs12Method valueMethod = anntionType.getDeclaredMethod("value");int[] viewIds = (int[]) valueMethod.invoke(annotation); ä½¿ç”¨åŠ¨æ€ä»£ç†Invocation 1234567891011 /* listenerSetter setOnClickLitener listenerType View.OnClickListener.class */Method setOnClickListener = view.getClass().getMethod(listenerSetter, listenerType);ListenerInvocationHandler handler = new ListenerInvocationHandler(context, methodMap);//proxyyå·²ç»å®ç°äº†listenerTypeæ¥å£Object proxy = Proxy.newProxyInstance (listenerType.getClassLoader(), new Class[]&#123;listenerType&#125;, handler);setOnClickListener.invoke(view, proxy); ok,è¿™æ ·ä½ å°±å¯ä»¥åœ¨ä»£ç é‡Œé¢ä½¿ç”¨æ³¨è§£æ¥ä»£æ›¿setOnClickListeneräº† 12345@OnClick(R.id.text2)public void onClick()&#123; Toast.makeText(this,"å•å‡»",Toast.LENGTH_SHORT).show();&#125; è¿™é‡Œç›¸åº”çš„æ•ˆæœå°±ä¸è´´äº†ï¼Œéå¸¸ç®€å•ã€‚ç»è¿‡ä¸€æ®µå­¦ä¹ ä¹‹åæ„Ÿè§‰IOCçš„æ¶æ„ä¹Ÿä¸è¿‡å¦‚æ­¤å˜›ï¼Fighting]]></content>
      <categories>
        <category>æŠ€æœ¯å‘¨</category>
        <category>Androidæ¶æ„</category>
      </categories>
      <tags>
        <tag>Androidæ¶æ„</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç‚¹æ»´é¢è¯•ç»(ç®—æ³•ç¯‡)]]></title>
    <url>%2F2018%2F01%2F27%2F20180127_%E7%82%B9%E6%BB%B4%E9%9D%A2%E8%AF%95%E7%BB%8F(%E7%AE%97%E6%B3%95%E7%AF%87)%2F</url>
    <content type="text"><![CDATA[å‰è¨€&emsp;&emsp;åšå®¢æ˜¯è®°å½•è®°å¿†çš„åœ°æ–¹ï¼Œæ˜¯æŸ¥æ¼è¡¥ç¼ºçš„åœ°æ–¹ï¼Œæ›´æ˜¯å¿—åŒé“åˆæˆé•¿çš„åœ°æ–¹ã€‚ç°åœ¨å¼€å¯é¢è¯•æ–‡ç« çš„å…¥å£ï¼Œæ¬¢è¿å¤§å®¶å­¦ä¹ å¹¶æŒ‡ç‚¹ï¼Œç”±äºç›®å‰æœ¬åšå®¢è¿˜æ²¡æœ‰åŠ å…¥è¯„è®ºçš„åŠŸèƒ½ï¼Œå¯ä»¥å…ˆåŠ æˆ‘QQï¼š2414923649 &emsp;&emsp;æœ¬ç¯‡æ–‡ç« ç”¨æ¥è®°å½•ç®—æ³•é¢è¯•çš„ä¸€äº›ä¸œè¥¿ï¼Œæˆ‘ä¼šä¸æ–­çš„åœ¨é‡Œé¢åŠ å…¥æ–°çš„çŸ¥è¯†ï¼Œæ–°çš„èŠ±æ ·ï¼Œå¸Œæœ›å¤§å®¶å–œæ¬¢ã€‚ å¼€ç¯‡é¢ä¸€é¢ æ’åºç®—æ³•ç”±äºç½‘ä¸Šå·²ç»æœ‰æ¯”è¾ƒå¥½çš„æ–‡ç« äº†ï¼Œè¿™é‡Œåˆ—å‡ºç›¸åº”çš„åœ°å€ï¼Œæ¥ä¸‹æ¥å°±æ˜¯ä¸æ–­çš„å»ç ”ç©¶ï¼Œä¸æ–­çš„å»å­¦ä¹ å°±å“¦äº†ï¼Œå¥½äº†ä¸å¤šè¯´äº†https://www.jianshu.com/p/ae97c3ceea8d æ–æ³¢é‚£å¥‘æ•°åˆ—æ–æ³¢é‚£å¥‘æ•°åˆ—æ˜¯é€’æ¨ç®—æ³•çš„ç»å…¸ä¾‹å­ï¼Œå…¸å‹çš„ä¾‹å­æ˜¯å…”å­äº§ä»”çš„é—®é¢˜ä¸Šï¼šå¦‚æœä¸€å¯¹ä¸¤ä¸ªæœˆå¤§çš„å…”å­ä»¥åæ¯ä¸€ä¸ªæœˆéƒ½å¯ä»¥ç”Ÿä¸€å¯¹å°å…”å­ï¼Œè€Œä¸€å¯¹æ–°ç”Ÿçš„å…”å­å‡ºç”Ÿä¸¤ä¸ªæœˆåæ‰å¯ä»¥ç”Ÿå°å…”å­ã€‚é‚£ä¹ˆå‡å®šåœ¨ä¸€å¹´å†…æ²¡æœ‰å‘ç”Ÿå…”å­çš„æ­»äº¡äº‹ä»¶ï¼Œé‚£ä¹ˆä¸€å¹´åå…±æœ‰å¤šå°‘å¯¹å…”å­å‘¢ï¼Ÿè§£ç­”ï¼šä½¿ç”¨é€’æ¨æ¥è§£å†³ï¼Œæœ€ç»ˆå¾—å‡ºF(n) = F(n-2) + F(n-1)ä»£ç ï¼š12345678910int Fibonacci(int n)&#123; // nä¸ºæœˆæ•° int t1,t2; if(n == 1 || n == 2)&#123; // å½“nä¸º1æˆ–è€…2çš„æ—¶å€™éƒ½ä¸º1å¯¹å…”å­ return 1; &#125;else&#123; t1 = Fibonacci(n-1); t2 = Fibonacci(n-2); return t1 + t2; &#125;&#125; #### â€™]]></content>
      <categories>
        <category>ç‚¹æ»´é¢è¯•ç»</category>
        <category>ç®—æ³•é¢è¯•</category>
      </categories>
      <tags>
        <tag>ç‚¹æ»´é¢è¯•ç»</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç‚¹æ»´é¢è¯•ç»(javaç¯‡)]]></title>
    <url>%2F2018%2F01%2F25%2F20180125_%E7%82%B9%E6%BB%B4%E9%9D%A2%E8%AF%95%E7%BB%8F(java%E7%AF%87)%2F</url>
    <content type="text"><![CDATA[å‰è¨€&emsp;&emsp;åšå®¢æ˜¯è®°å½•è®°å¿†çš„åœ°æ–¹ï¼Œæ˜¯æŸ¥æ¼è¡¥ç¼ºçš„åœ°æ–¹ï¼Œæ›´æ˜¯å¿—åŒé“åˆæˆé•¿çš„åœ°æ–¹ã€‚ç°åœ¨å¼€å¯é¢è¯•æ–‡ç« çš„å…¥å£ï¼Œæ¬¢è¿å¤§å®¶å­¦ä¹ å¹¶æŒ‡ç‚¹ï¼Œç”±äºç›®å‰æœ¬åšå®¢è¿˜æ²¡æœ‰åŠ å…¥è¯„è®ºçš„åŠŸèƒ½ï¼Œå¯ä»¥å…ˆåŠ æˆ‘QQï¼š2414923649 &emsp;&emsp;æœ¬ç¯‡æ–‡ç« ç”¨æ¥è®°å½•javaé¢è¯•çš„ä¸€äº›ä¸œè¥¿ï¼Œæˆ‘ä¼šä¸æ–­çš„åœ¨é‡Œé¢åŠ å…¥æ–°çš„çŸ¥è¯†ï¼Œæ–°çš„èŠ±æ ·ï¼Œå¸Œæœ›å¤§å®¶å–œæ¬¢ã€‚ å¼€ç¯‡é¢ä¸€é¢æ¥å£çš„æ„ä¹‰(1)é‡è¦æ€§åœ¨javaè¯­è¨€ä¸­ï¼Œabstract classå’Œinterfaceæ˜¯æ”¯æŒæŠ½è±¡ç±»å®šä¹‰çš„ä¸¤ç§æœºåˆ¶(2)ç®€å•ã€è§„èŒƒæ€§å¦‚æœé¡¹ç›®æ¯”è¾ƒåºå¤§å°±éœ€è¦æ¥å®šä¹‰ä¸€äº›æ¥å£ï¼Œè¿™äº›æ¥å£ä¸ä»…ä»…å‘Šè¯‰å¼€å‘äººå‘˜ä½ éœ€è¦å®ç°é‚£äº›ä¸šåŠ¡ï¼Œè€Œä¸”ä¹Ÿå°†å‘½åçš„è§„èŒƒä¹Ÿç»™é™åˆ¶ä½äº†ï¼Œé˜²æ­¢ç¨‹åºå‘˜é”™è¯¯çš„å‘½åã€‚(3)ç»´æŠ¤ã€æ‰©å±•æ€§æ¯”å¦‚ä½ è¦åšä¸€ä¸ªç”»æ¿ç¨‹åºï¼Œå…¶ä¸­é‡Œé¢æœ‰ä¸€ä¸ªé¢æ¿ç±»ï¼Œä¸»è¦è´Ÿè´£ç»˜ç”»åŠŸèƒ½ï¼Œç„¶åä½ å°±è¿™æ ·å®šä¹‰äº†è¿™ä¸ªç±»ã€‚å¯æ˜¯åœ¨ä¸ä¹…å°†æ¥ï¼Œä½ çªç„¶å‘ç°è¿™ä¸ªç±»æ»¡è¶³ä¸äº†ä½ äº†ï¼Œç„¶åä½ åˆè¦é‡æ–°è®¾è®¡è¿™ä¸ªç±»ï¼Œæ›´ç³Ÿç³•æ˜¯ä½ å¯èƒ½è¦æ”¾å¼ƒè¿™ä¸ªç±»ï¼Œé‚£ä¹ˆå…¶ä»–åœ°æ–¹å¯èƒ½æœ‰å¼•ç”¨ä»–ï¼Œè¿™æ ·ä¿®æ”¹èµ·æ¥å¾ˆéº»çƒ¦ã€‚å¦‚æœä½ ä¸€å¼€å§‹å®šä¹‰ä¸€ä¸ªæ¥å£ï¼ŒæŠŠç»˜åˆ¶åŠŸèƒ½æ”¾åœ¨æ¥å£é‡Œï¼Œç„¶åå®šä¹‰ç±»æ—¶å®ç°è¿™ä¸ªæ¥å£ï¼Œç„¶åä½ åªè¦ç”¨è¿™ä¸ªæ¥å£å»å¼•ç”¨å®ç°å®ƒçš„ç±»å°±è¡Œäº†ï¼Œä»¥åè¦æ¢çš„è¯åªä¸è¿‡æ˜¯å¼•ç”¨å¦ä¸€ä¸ªç±»è€Œå·²ï¼Œè¿™æ ·å°±è¾¾åˆ°ç»´æŠ¤ã€æ‹“å±•çš„æ–¹ä¾¿æ€§ã€‚(4)å®‰å…¨ã€ä¸¥å¯†æ€§æ¥å£æ˜¯å®ç°è½¯ä»¶è§£è€¦åˆçš„é‡è¦æ‰‹æ®µ æŠ½è±¡ç±»çš„æ„ä¹‰æœ¬è´¨ä¸Šæ˜¯ç›¸åŒå…·ä½“æ¦‚å¿µçš„æŠ½è±¡1ã€å› ä¸ºæŠ½è±¡ç±»ä¸èƒ½å®ä¾‹åŒ–å¯¹è±¡ï¼Œå¿…é¡»æœ‰å­ç±»æ¥å®ç°æ‰å¯ä»¥ä½¿ç”¨ã€‚è¿™æ ·å°±å¯ä»¥æŠŠä¸€äº›å…·æœ‰ç›¸åŒå±æ€§å’Œæ–¹æ³•çš„ç»„ä»¶è¿›è¡ŒæŠ½è±¡ï¼Œè¿™æ ·æœ‰åˆ©äºä»£ç å’Œç¨‹åºçš„ç»´æŠ¤ã€‚2ã€å½“åˆæœ‰ä¸€ä¸ªå…·æœ‰ç›¸ä¼¼ç»„ä»¶äº§ç”Ÿçš„æ—¶å€™ï¼Œåªéœ€è¦å®ç°è¯¥æŠ½è±¡ç±»å°±å¯ä»¥è·å¾—è¯¥æŠ½è±¡ç±»çš„é‚£äº›å±æ€§å’Œæ–¹æ³• æŠ½è±¡ç±»æ¥å£åŒºåˆ«1ï¼‰æŠ½è±¡ç±»è¦è¢«å­ç±»ç»§æ‰¿ï¼Œæ¥å£è¦è¢«ç±»å®ç°2ï¼‰æ¥å£åªèƒ½åšæ–¹æ³•å£°æ˜ï¼ŒæŠ½è±¡ç±»ä¸­æ—¢å¯ä»¥åšæ–¹æ³•å£°æ˜ï¼Œä¹Ÿå¯ä»¥åšæ–¹æ³•å®ç°3ï¼‰æ¥å£é‡Œå®šä¹‰çš„å˜é‡åªèƒ½æ˜¯å…¬å…±çš„é™æ€çš„å¸¸é‡ï¼ŒæŠ½è±¡ç±»ä¸­çš„å˜é‡æ˜¯æ™®é€šå˜é‡ã€‚4ï¼‰æŠ½è±¡ç±»é‡Œçš„æŠ½è±¡æ–¹æ³•å¿…é¡»å…¨éƒ¨è¢«å­ç±»æ‰€å®ç°ï¼Œå¦‚æœå­ç±»ä¸èƒ½å…¨éƒ¨å®ç°çˆ¶ç±»æŠ½è±¡æ–¹æ³•ï¼Œé‚£ä¹ˆè¯¥å­ç±»åªèƒ½æ˜¯æŠ½è±¡ç±»ã€‚åŒæ ·ï¼Œä¸€ä¸ªå®ç°æ¥å£çš„æ—¶å€™ï¼Œå¦‚ä¸èƒ½å…¨éƒ¨å®ç°æ¥å£æ–¹æ³•ï¼Œé‚£ä¹ˆè¯¥ç±»ä¹Ÿåªèƒ½ä¸ºæŠ½è±¡ç±»ã€‚5ï¼‰æŠ½è±¡æ–¹æ³•åªèƒ½å£°æ˜ï¼Œä¸èƒ½å®ç°ï¼Œæ¥å£æ˜¯è®¾è®¡çš„ç»“æœ ï¼ŒæŠ½è±¡ç±»æ˜¯é‡æ„çš„ç»“æœ6ï¼‰æ¥å£å¯ç»§æ‰¿æ¥å£ï¼Œå¹¶å¯å¤šç»§æ‰¿æ¥å£ï¼Œä½†ç±»åªèƒ½å•æ ¹ç»§æ‰¿ã€‚ å†…éƒ¨ç±»çš„ä½œç”¨æ”¾åœ¨ä¸€ä¸ªç±»çš„å†…éƒ¨çš„ç±»æˆ‘ä»¬å«åšå†…éƒ¨ç±»,ä½œç”¨ï¼š1ã€å†…éƒ¨ç±»å¯ä»¥å¾ˆå¥½çš„å®ç°éšè—ï¼Œä¸€èˆ¬çš„éå†…éƒ¨ç±»ï¼Œæ˜¯ä¸å…è®¸æœ‰2ã€private ä¸protectedæƒé™çš„ï¼Œä½†å†…éƒ¨ç±»å¯ä»¥3ã€å†…éƒ¨ç±»æ‹¥æœ‰å¤–éƒ¨ç±»çš„æ‰€æœ‰å…ƒç´ çš„è®¿é—®æƒé™4ã€å¯æ˜¯å®ç°å¤šé‡ç»§æ‰¿5ã€å¯ä»¥é¿å…ä¿®æ”¹æ¥å£å»å®ç°åŒä¸€ä¸ªç±»ä¸­ä¸¤ç§åŒåæ–¹æ³•çš„è°ƒç”¨ çˆ¶ç±»çš„é™æ€æ–¹æ³•èƒ½å¦è¢«å­ç±»é‡å†™ï¼Œä¸ºä»€ä¹ˆï¼Ÿçˆ¶ç±»çš„é™æ€æ–¹æ³•æ˜¯ä¸èƒ½è¢«å­ç±»é‡å†™çš„ï¼Œé‡å†™åªèƒ½é€‚ç”¨äºå®ä¾‹æ–¹æ³•ï¼Œä¸èƒ½ç”¨äºé™æ€æ–¹æ³•ï¼Œå¹¶ä¸”staticæ–¹æ³•ä¸æ˜¯åæœŸç»‘å®šçš„ï¼Œå®ƒåœ¨ç¼–è¯‘æœŸå°±ç»‘å®šäº†ã€‚æ¢å¥è¯è¯´ï¼Œè¿™ä¸ªæ–¹æ³•ä¸ä¼šè¿›è¡Œå¤šæ€çš„åˆ¤æ–­ï¼Œåªä¸å£°æ˜çš„ç±»æœ‰å…³ã€‚ å“ªäº›æƒ…å†µä¸‹çš„å¯¹è±¡ä¼šè¢«åƒåœ¾å›æ”¶æœºåˆ¶å¤„ç†æ‰(1)è¶…å‡ºå¯¹è±¡çš„å¼•ç”¨ä½œç”¨åŸŸçš„æ—¶å€™ï¼Œè¿™ä¸ªå¯¹è±¡å°±ä¼šå˜æˆåƒåœ¾(2)æ²¡æœ‰è¶…å‡ºå¯¹è±¡çš„å¼•ç”¨ä½œç”¨åŸŸï¼Œç»™è¿™ä¸ªå¼•ç”¨èµ‹å€¼ä¸ºç©ºçš„æ—¶å€™ï¼Œè¿™ä¸ªå¼•ç”¨çš„å¯¹è±¡ä¹Ÿä¼šå˜æˆåƒåœ¾(3)åˆ›å»ºåŒ¿åå¯¹è±¡æ—¶å€™ï¼ŒåŒ¿åå¯¹è±¡ç”¨å®Œä¹‹åä¼šå˜æˆåƒåœ¾ è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«è¿›ç¨‹å’Œçº¿ç¨‹éƒ½æ˜¯ä¸€ä¸ªæ—¶é—´æ®µçš„æè¿°ï¼Œæ˜¯CPUå·¥ä½œæ—¶é—´æ®µçš„æè¿°ï¼Œä¸è¿‡æ˜¯é¢—ç²’å¤§å°ä¸åŒ(1)ä¸€ä¸ªç¨‹åºè‡³å°‘æœ‰ä¸€ä¸ªè¿›ç¨‹ï¼Œä¸€ä¸ªè¿›ç¨‹è‡³å°‘æœ‰ä¸€ä¸ªçº¿ç¨‹(2)çº¿ç¨‹çš„åˆ’åˆ†å°ºåº¦å°äºè¿›ç¨‹ï¼Œä½¿å¾—å¤šçº¿ç¨‹ç¨‹åºçš„å¹¶å‘æ€§é«˜(3)å¦å¤–ï¼Œè¿›ç¨‹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­æ‹¥æœ‰ç‹¬ç«‹çš„å†…å­˜å•å…ƒï¼Œè€Œå¤šä¸ªçº¿ç¨‹å…±äº«å†…å­˜ï¼Œä»è€Œæå¤§çš„æé«˜äº†ç¨‹åºçš„è¿è¡Œæ•ˆç‡(4)çº¿ç¨‹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ä¸è¿›ç¨‹è¿˜æ˜¯æœ‰åŒºåˆ«çš„ã€‚æ¯ä¸ªç‹¬ç«‹çš„è¿›ç¨‹æœ‰ä¸€ä¸ªç¨‹åºè¿è¡Œçš„å…¥å£ã€é¡ºåºæ‰§è¡Œåºåˆ—å’Œç¨‹åºçš„å‡ºå£ã€‚ä½†æ˜¯çº¿ç¨‹ä¸èƒ½å¤Ÿç‹¬ç«‹æ‰§è¡Œï¼Œå¿…é¡»ä¾å­˜åœ¨åº”ç”¨ç¨‹åºä¸­ï¼Œç”±åº”ç”¨ç¨‹åºæä¾›å¤šä¸ªçº¿ç¨‹æ‰§è¡Œæ§åˆ¶(5)å¤šçº¿ç¨‹çš„æ„ä¹‰åœ¨äºä¸€ä¸ªåº”ç”¨ç¨‹åºä¸­ï¼Œæœ‰å¤šä¸ªæ‰§è¡Œéƒ¨åˆ†å¯ä»¥åŒæ—¶æ‰§è¡Œã€‚ä½†æ“ä½œç³»ç»Ÿå¹¶æ²¡æœ‰å°†å¤šä¸ªçº¿ç¨‹çœ‹åšå¤šä¸ªç‹¬ç«‹çš„åº”ç”¨ï¼Œæ¥å®ç°è¿›ç¨‹çš„è°ƒåº¦å’Œç®¡ç†ä»¥åŠèµ„æºåˆ†é…ã€‚è¿™å°±æ˜¯è¿›ç¨‹å’Œçº¿ç¨‹çš„é‡è¦åŒºåˆ« Java ä¸­==å’Œ equals çš„åŒºåˆ«ï¼Œ equals å’Œ hashCode çš„åŒºåˆ«(1) ==æ“ä½œç¬¦åŸºæœ¬ç±»å‹å˜é‡æ¯”è¾ƒçš„æ˜¯å€¼ï¼›å¼•ç”¨ç±»å‹å˜é‡æ¯”è¾ƒçš„æ˜¯å¼•ç”¨çš„åœ°å€(2) equalsæ–¹æ³•æ˜¯åŸºç±»Objectçš„æ–¹æ³•ï¼Œç”¨äºæ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡çš„å†…å®¹æ˜¯å¦ç›¸åŒï¼Œå®é™…å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¼šé‡å†™equalsæ–¹æ³•ï¼Œé‡æ–°å®šä¹‰æ¯”è¾ƒè§„åˆ™(3) hashCodeå½“æ¶‰åŠåˆ°åƒHashMapç­‰ä¸å“ˆå¸Œè¡¨ç»“æ„ç›¸å…³çš„ä¸€äº›ç±»æ—¶ä¼šä½¿ç”¨åˆ°hashCodeæ–¹æ³•ï¼Œé»˜è®¤çš„hashCodeå®ç°ä¸€èˆ¬æ˜¯å†…å­˜åœ°å€å¯¹åº”çš„æ•°å­—ï¼Œæ‰€ä»¥ä¸åŒçš„å¯¹è±¡ï¼ŒhashCode()çš„è¿”å›å€¼æ˜¯ä¸ä¸€æ ·çš„equals(object)ç›¸åŒæ—¶ï¼ŒhashCode()çš„è¿”å›å€¼ä¹Ÿè¦å°½é‡ç›¸åŒï¼Œå½“equals(object)ä¸ç›¸åŒæ—¶ï¼ŒhashCode()ä¹Ÿæ˜¯å°½é‡ä¸ç›¸åŒä»¥è·å–å¥½çš„æ€§èƒ½ java int ä¸ integer çš„åŒºåˆ«int æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼Œintegeræ˜¯åŒ…è£…æ•°æ®ç±»å‹ï¼ˆå¼•ç”¨ç±»å‹ï¼‰ï¼ŒJDK1.5ä¹‹åï¼Œè‡ªåŠ¨è£…åŒ…/æ‹†åŒ…å¤§å¤§æ–¹ä¾¿äº†åŸºæœ¬ç±»å‹æ•°æ®å’Œå®ƒä»¬åŒ…è£…ç±»åœ°ä½¿ç”¨ã€‚ string stringbuffer stringbuilder åŒºåˆ«å…±åŒç‚¹ï¼šString StringBuffer StringBuilder éƒ½æ˜¯å­—ç¬¦ä¸²ç›¸å…³å‡½æ•°ï¼ŒStringBuffer StringBuilderæ˜¯AbstractStringBuilderçš„å­ç±»ä¸åŒç‚¹ï¼šStringå†…å®¹ä¸å¯å˜ï¼ŒStringBuffer StringBuilderå†…å®¹å¯å˜Stringä¸StringBufferçº¿ç¨‹å®‰å…¨ï¼ŒStringBuilderéçº¿ç¨‹å®‰å…¨å¦‚æœç¨‹åºä¸æ˜¯å¤šçº¿ç¨‹çš„ï¼Œé‚£ä¹ˆä½¿ç”¨StringBuilderæ•ˆç‡é«˜äºStringBuffer Java å¤šæ€é™æ€å¤šæ€ï¼šæ–¹æ³•é‡è½½åŠ¨æ€å¤šæ€ï¼šæ–¹æ³•é‡å†™å¤šæ€å‘ç”Ÿçš„æ¡ä»¶ï¼š1ï¼‰è¦æœ‰ç»§æ‰¿2ï¼‰è¦æœ‰é‡å†™3ï¼‰çˆ¶ç±»å¼•ç”¨æŒ‡å‘å­ç±»å¯¹è±¡å¤šæ€çš„å¥½å¤„ï¼š1ï¼‰å¯æ›¿æ¢æ€§2ï¼‰å¯æ‰©å……æ€§3ï¼‰æ¥å£æ€§4ï¼‰ç®€åŒ–æ€§ å®¹å™¨ç±»ä¹‹é—´çš„åŒºåˆ«1&gt; Vectorå’ŒArrayList(1)vectoræ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼ŒArrayListæ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼Œå¦‚æœä¸è€ƒè™‘çº¿ç¨‹çš„å®‰å…¨å› ç´ ä½¿ç”¨ArrayListçš„æ•ˆç‡æ¯”è¾ƒé«˜(2)vectorå¢é•¿ç‡ä¸ºç›®å‰æ•°ç»„é•¿åº¦çš„100%ï¼Œè€ŒArrayListå¢é•¿ç‡ä¸ºå½“å‰æ•°ç»„é•¿åº¦çš„50%ï¼Œå¦‚æœæ•°æ®ç‰¹åˆ«çš„å¤§çš„æ—¶å€™ä½¿ç”¨Vectorå ä¸€å®šçš„ä¼˜åŠ¿(3)ArrayList å’ŒVectoræ˜¯é‡‡ç”¨æ•°ç»„æ–¹å¼å­˜å‚¨æ•°æ®ï¼Œæ‰€ä»¥ç´¢å¼•æ•°æ®å¿«æ’å…¥æ•°æ®æ…¢ï¼ŒVectorç”±äºä½¿synchronizedæ–¹æ³•ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰æ‰€ä»¥æ€§èƒ½ä¸Šæ¯”ArrayListè¦å·®2&gt; ArrayListå’ŒLinkedList(1)ArrayListæ˜¯å®ç°äº†åŸºäºåŠ¨æ€æ•°ç»„çš„æ•°æ®ç»“æ„ï¼ŒLinkedListåŸºäºé“¾è¡¨çš„æ•°æ®ç»“æ„(2)ArrayListé€‚åˆæ”¹æŸ¥ï¼ŒLinkedListé€‚åˆå¢åˆ 3&gt; HashMapä¸TreeMap(1)HashMapé€šè¿‡hashcodeå¯¹å…¶å†…å®¹è¿›è¡Œå¿«é€ŸæŸ¥æ‰¾ï¼Œè€ŒTreeMapä¸­æ‰€æœ‰çš„å…ƒç´ éƒ½ä¿æŒç€æŸç§å›ºå®šçš„é¡ºåºï¼Œå¦‚æœä½ éœ€è¦å¾—åˆ°ä¸€ä¸ªæœ‰åºçš„ç»“æœä½ å°±åº”è¯¥ä½¿ç”¨TreeMapï¼ˆHashMapä¸­å…ƒç´ çš„æ’åˆ—é¡ºåºæ˜¯ä¸å›ºå®šçš„ï¼‰ï¼ŒTreeMapå®ç°SortedMapæ¥å£(2)åœ¨Map ä¸­æ’å…¥ã€åˆ é™¤å’Œå®šä½å…ƒç´ ï¼ŒHashMap æ˜¯æœ€å¥½çš„é€‰æ‹©ã€‚ä½†å¦‚æœæ‚¨è¦æŒ‰è‡ªç„¶é¡ºåºæˆ–è‡ªå®šä¹‰é¡ºåºéå†é”®ï¼Œé‚£ä¹ˆTreeMapä¼šæ›´å¥½ã€‚ä½¿ç”¨HashMapè¦æ±‚æ·»åŠ çš„é”®ç±»æ˜ç¡®å®šä¹‰äº†hashCode()å’Œ equals()çš„å®ç°4&gt; HashTableä¸HashMap(1)HashTableæ˜¯åŸºäºé™ˆæ—§çš„Dictionaryç±»çš„ï¼ŒHashMapæ˜¯Java1.2å¼•è¿›çš„Mapæ¥å£çš„ä¸€ä¸ªå®ç°(2)Hashtableæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä¹Ÿå°±æ˜¯è¯´æ˜¯åŒæ­¥çš„ï¼Œè€ŒHashMapæ˜¯çº¿ç¨‹åºä¸å®‰å…¨çš„ï¼Œä¸æ˜¯åŒæ­¥çš„(3)HashMapå¯ä»¥è®©ä½ å°†ç©ºå€¼ä½œä¸ºä¸€ä¸ªè¡¨çš„æ¡ç›®çš„keyæˆ–value5&gt; Setä¸ListSetä¸­çš„æ•°æ®å¯¹è±¡æ²¡æœ‰é¡ºåºä¸”ä¸å¯ä»¥é‡å¤ï¼ŒListä¸­çš„æ•°æ®å¯¹è±¡æœ‰é¡ºåºä¸”å¯ä»¥é‡å¤ã€‚ æ­»é”çš„å››ä¸ªå¿…è¦æ¡ä»¶(1)äº’æ–¥æ¡ä»¶ï¼Œå³æŸä¸ªèµ„æºåœ¨ä¸€æ®µæ—¶é—´å†…åªèƒ½ç”±ä¸€ä¸ªçº¿ç¨‹å æœ‰ï¼Œä¸èƒ½åŒæ—¶è¢«ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„çº¿ç¨‹å æœ‰(2)ä¸å¯æŠ¢å æ¡ä»¶ï¼Œçº¿ç¨‹æ‰€è·å¾—çš„èµ„æºåœ¨æœªä½¿ç”¨å®Œæ¯•ä¹‹å‰ï¼Œèµ„æºç”³è¯·è€…ä¸èƒ½å¼ºè¡Œåœ°ä»èµ„æºå æœ‰è€…æ‰‹ä¸­å¤ºå–èµ„æºï¼Œè€Œåªèƒ½ç”±è¯¥èµ„æºçš„å æœ‰è€…çº¿ç¨‹è‡ªè¡Œé‡Šæ”¾(3)å æœ‰ä¸”ç”³è¯·æ¡ä»¶ï¼Œçº¿ç¨‹è‡³å°‘å·²ç»å æœ‰ä¸€ä¸ªèµ„æºï¼Œä½†åˆç”³è¯·æ–°çš„èµ„æºï¼›ç”±äºè¯¥èµ„æºå·²è¢«å¦å¤–çº¿ç¨‹å æœ‰ï¼Œæ­¤æ—¶è¯¥çº¿ç¨‹é˜»å¡ï¼›ä½†æ˜¯ï¼Œå®ƒåœ¨ç­‰å¾…æ–°èµ„æºä¹‹æ—¶ï¼Œä»ç»§ç»­å ç”¨å·²å æœ‰çš„èµ„æºã€‚(4)å¾ªç¯ç­‰å¾…æ¡ä»¶ï¼Œå­˜åœ¨ä¸€ä¸ªçº¿ç¨‹ç­‰å¾…åºåˆ—{P1ï¼ŒP2ï¼Œâ€¦ï¼ŒPn}ï¼Œå…¶ä¸­P1ç­‰å¾…P2æ‰€å æœ‰çš„æŸä¸€èµ„æºï¼ŒP2ç­‰å¾…P3æ‰€å æœ‰çš„æŸä¸€æºï¼Œâ€¦â€¦ï¼Œè€ŒPnç­‰å¾…P1æ‰€å æœ‰çš„çš„æŸä¸€èµ„æºï¼Œå½¢æˆä¸€ä¸ªçº¿ç¨‹å¾ªç¯ç­‰å¾…ç¯ å¤„ç†æ­»é”çš„åŸºæœ¬æ–¹æ³•(1)é¢„é˜²æ­»é”ï¼šé€šè¿‡è®¾ç½®ä¸€äº›é™åˆ¶æ¡ä»¶ï¼Œå»ç ´åäº§ç”Ÿæ­»é”çš„å¿…è¦æ¡ä»¶(2)é¿å…æ­»é”ï¼šåœ¨èµ„æºåˆ†é…è¿‡ç¨‹ä¸­ï¼Œä½¿ç”¨æŸç§æ–¹æ³•é¿å…ç³»ç»Ÿè¿›å…¥ä¸å®‰å…¨çš„çŠ¶æ€ï¼Œä»è€Œé¿å…å‘ç”Ÿæ­»é”(3)æ£€æµ‹æ­»é”ï¼šå…è®¸æ­»é”çš„å‘ç”Ÿï¼Œä½†æ˜¯é€šè¿‡ç³»ç»Ÿçš„æ£€æµ‹ä¹‹åï¼Œé‡‡å–ä¸€äº›æªæ–½ï¼Œå°†æ­»é”æ¸…é™¤æ‰(4)è§£é™¤æ­»é”ï¼šè¯¥æ–¹æ³•ä¸æ£€æµ‹æ­»é”é…åˆä½¿ç”¨ å¸¸è§ç¼–ç æ–¹å¼ï¼› utf-8 ç¼–ç ä¸­çš„ä¸­æ–‡å å‡ ä¸ªå­—èŠ‚ï¼›æ•°å­—å‡ ä¸ªå­—èŠ‚ä¸€ä¸ªutf8æ•°å­—å 1ä¸ªå­—èŠ‚ï¼Œä¸€ä¸ªutf8è‹±æ–‡å­—æ¯å 1ä¸ªå­—èŠ‚ï¼Œå°‘æ•°æ˜¯æ±‰å­—æ¯ä¸ªå ç”¨3ä¸ªå­—èŠ‚ï¼Œå¤šæ•°å ç”¨4ä¸ªå­—èŠ‚ã€‚ Httpå’ŒHttpsçš„ä¸åŒä¹‹å¤„1ã€Httpçš„URLä»¥http://å¼€å¤´ï¼Œè€Œhttpsçš„URLä»¥https://å¼€å¤´2ã€Httpæ˜¯ä¸å®‰å…¨çš„ï¼Œè€ŒHttpsæ˜¯å®‰å…¨çš„3ã€Httpæ ‡å‡†ç«¯å£æ˜¯80ï¼Œè€ŒHttpsçš„æ ‡å‡†ç«¯å£æ˜¯4434ã€åœ¨OSIç½‘ç»œæ¨¡å‹ä¸­ï¼ŒHttpå·¥ä½œäºåº”ç”¨å±‚ï¼Œè€ŒHttpså·¥ä½œåœ¨ä¼ è¾“å±‚5ã€Httpæ— éœ€åŠ å¯†ï¼Œè€ŒHttpséœ€è¦è®¤è¯è¯ä¹¦ SocketæœåŠ¡ç«¯/å®¢æˆ·ç«¯é€šä¿¡æ­¥éª¤1ã€åˆ›å»ºServerSocketå’ŒSocket2ã€æ‰“å¼€è¿æ¥åˆ°Socketçš„è¾“å…¥/è¾“å‡ºæµ3ã€æŒ‰ç…§åè®®å¯¹socketè¿›è¡Œè¯»/å†™æ“ä½œ4ã€å…³é—­è¾“å…¥è¾“å‡ºæµã€å…³é—­Socket javaçš„IOæ¥å£1ã€åŸºäºå­—èŠ‚æ“ä½œçš„IOæ¥å£ inputStream outputStream2ã€åŸºäºå­—ç¬¦æ“ä½œçš„IOæ¥å£ BufferedReader BufferWriter3ã€åŸºäºç£ç›˜æ“ä½œçš„IOæ¥å£ File4ã€åŸºäºç½‘ç»œæ“ä½œçš„IOæ¥å£ Socket é˜»å¡å¼IOå‘ç”Ÿæ¡ä»¶1ã€BIOæ•°æ®åœ¨å†™å…¥outputStreamæˆ–è€…inputStreamè¯»å–æ—¶å¯èƒ½ä¼šé˜»å¡2ã€å½“å‰ä¸€äº›éœ€è¦å¤§é‡Httpé•¿è¿æ¥çš„æƒ…å†µ3ã€éœ€è¦å¦å¤–ä¸€ç§æ–°çš„IOæ“ä½œæ–¹å¼ Charå‹å˜é‡ä¸­èƒ½ä¸èƒ½å­˜å‚¨ä¸€ä¸ªä¸­æ–‡æ±‰å­—ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿcharå‹å˜é‡æ˜¯ç”¨æ¥å­˜å‚¨Unicodeç¼–ç å­—ç¬¦çš„ï¼ŒUnicodeç¼–ç å­—ç¬¦é›†ä¸­åŒ…å«äº†æ±‰å­—ï¼Œæ‰€ä»¥charå‹å˜é‡ä¸­å½“ç„¶å¯ä»¥å­˜å‚¨æ±‰å­—å•¦ã€‚ä¸è¿‡ï¼Œå¦‚æœæŸä¸ªç‰¹æ®Šçš„æ±‰å­—æ²¡æœ‰è¢«åŒ…å«åœ¨Unicodeç¼–ç å­—ç¬¦é›†ä¸­ï¼Œé‚£ä¹ˆï¼Œè¿™ä¸ªcharå‹å˜é‡ä¸­å°±ä¸èƒ½å­˜å‚¨è¿™ä¸ªç‰¹æ®Šçš„æ±‰å­—ã€‚Unicodeç¼–ç å ç”¨ä¸¤ä¸ªå­—èŠ‚ï¼Œæ‰€ä»¥charå‹å˜é‡ä¹Ÿæ˜¯å ç”¨ä¸¤ä¸ªå­—èŠ‚ â€¦.æœªå®Œå¾…ç»­]]></content>
      <categories>
        <category>ç‚¹æ»´é¢è¯•ç»</category>
        <category>javaé¢è¯•</category>
      </categories>
      <tags>
        <tag>ç‚¹æ»´é¢è¯•ç»</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç‚¹æ»´é¢è¯•ç»(Androidç¯‡)]]></title>
    <url>%2F2018%2F01%2F24%2F20180124_%E7%82%B9%E6%BB%B4%E9%9D%A2%E8%AF%95%E7%BB%8F(Android%E7%AF%87)%2F</url>
    <content type="text"><![CDATA[å‰è¨€&emsp;&emsp;åšå®¢æ˜¯è®°å½•è®°å¿†çš„åœ°æ–¹ï¼Œæ˜¯æŸ¥æ¼è¡¥ç¼ºçš„åœ°æ–¹ï¼Œæ›´æ˜¯å¿—åŒé“åˆæˆé•¿çš„åœ°æ–¹ã€‚ç°åœ¨å¼€å¯é¢è¯•æ–‡ç« çš„å…¥å£ï¼Œæ¬¢è¿å¤§å®¶å­¦ä¹ å¹¶æŒ‡ç‚¹ï¼Œç”±äºç›®å‰æœ¬åšå®¢è¿˜æ²¡æœ‰åŠ å…¥è¯„è®ºçš„åŠŸèƒ½ï¼Œå¯ä»¥å…ˆåŠ æˆ‘QQï¼š2414923649 &emsp;&emsp;æœ¬ç¯‡æ–‡ç« ç”¨æ¥è®°å½•Androidé¢è¯•çš„ä¸€äº›ä¸œè¥¿ï¼Œæˆ‘ä¼šä¸æ–­çš„åœ¨é‡Œé¢åŠ å…¥æ–°çš„çŸ¥è¯†ï¼Œæ–°çš„èŠ±æ ·ï¼Œå¸Œæœ›å¤§å®¶å–œæ¬¢ã€‚ å¼€ç¯‡é¢ä¸€é¢1ã€æ•°æ®åº“çš„æ“ä½œç±»å‹æœ‰å“ªäº›ï¼Œå¦‚ä½•å¯¼å…¥å¤–éƒ¨æ•°æ®åº“ï¼Ÿ1&gt; ä½¿ç”¨æ•°æ®åº“çš„æ–¹å¼æœ‰å“ªäº›ï¼Ÿï¼ˆ1ï¼‰openOrCreateDatabase(String path);ï¼ˆ2ï¼‰ç»§æ‰¿SqliteOpenHelperç±»å¯¹æ•°æ®åº“åŠå…¶ç‰ˆæœ¬è¿›è¡Œç®¡ç†(onCreate,onUpgrade)å½“åœ¨ç¨‹åºå½“ä¸­è°ƒç”¨è¿™ä¸ªç±»çš„æ–¹æ³•getWritableDatabase()æˆ–è€…getReadableDatabase();çš„æ—¶å€™æ‰ä¼šæ‰“å¼€æ•°æ®åº“ã€‚å¦‚æœå½“æ—¶æ²¡æœ‰æ•°æ®åº“æ–‡ä»¶çš„æ—¶å€™ï¼Œç³»ç»Ÿå°±ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªæ•°æ®åº“ã€‚2&gt; æ“ä½œçš„ç±»å‹ï¼šå¢åˆ æ”¹æŸ¥CRUDç›´æ¥æ“ä½œSQLè¯­å¥ï¼šSQliteDatabase.execSQL(sql);é¢å‘å¯¹è±¡çš„æ“ä½œæ–¹å¼ï¼šSQLiteDatabase.insert(table, nullColumnHack, ContentValues);3&gt;å¦‚ä½•å¯¼å…¥å¤–éƒ¨æ•°æ®åº“ï¼Ÿä¸€èˆ¬å¤–éƒ¨æ•°æ®åº“æ–‡ä»¶å¯èƒ½æ”¾åœ¨SDå¡æˆ–è€…res/rawæˆ–è€…assetsç›®å½•ä¸‹é¢ã€‚å†™ä¸€ä¸ªDBManagerçš„ç±»æ¥ç®¡ç†ï¼Œæ•°æ®åº“æ–‡ä»¶æ¬å®¶ï¼Œå…ˆæŠŠæ•°æ®åº“æ–‡ä»¶å¤åˆ¶åˆ°/data/data/åŒ…å/databases/ç›®å½•ä¸‹é¢ï¼Œç„¶åé€šè¿‡db.openOrCreateDatabase(dbæ–‡ä»¶),æ‰“å¼€æ•°æ®åº“ä½¿ç”¨ã€‚æ¯”å¦‚ï¼šå¤šçº¿ç¨‹æ“ä½œæ•°æ®åº“çš„æ—¶å€™ï¼Œæˆ‘é‡‡å–çš„æ˜¯å°è£…ä½¿ç”¨äº’æ–¥é”æ¥è§£å†³â€¦â€¦ 2ã€æ˜¯å¦ä½¿ç”¨è¿‡æœ¬åœ°å¹¿æ’­ï¼Œå’Œå…¨å±€å¹¿æ’­æœ‰ä»€ä¹ˆå·®åˆ«ï¼Ÿå¼•å…¥æœ¬åœ°å¹¿æ’­çš„æœºåˆ¶æ˜¯ä¸ºäº†è§£å†³å®‰å…¨æ€§çš„é—®é¢˜(1)å‘é€æœ¬åœ°å¹¿æ’­ä¸ä¼šè„±ç¦»åº”ç”¨ç¨‹åºï¼Œæ¯”ç”¨æ‹…å¿ƒappçš„æ•°æ®æ³„éœ²ï¼›(2)å…¶ä»–çš„ç¨‹åºæ— æ³•å‘é€åˆ°æˆ‘çš„åº”ç”¨ç¨‹åºå†…éƒ¨ï¼Œä¸æ‹…å¿ƒå®‰å…¨æ¼æ´ã€‚ï¼ˆæ¯”å¦‚ï¼šå¦‚ä½•åšä¸€ä¸ªæ€ä¸æ­»çš„æœåŠ¡â€”ç›‘å¬ç«çš„app æ¯”å¦‚å¾®ä¿¡ã€å‹ç›Ÿã€æå…‰çš„å¹¿æ’­ï¼Œæ¥å¯åŠ¨è‡ªå·±ã€‚ï¼‰(3)å‘é€æœ¬åœ°å¹¿æ’­æ¯”å‘é€å…¨å±€çš„å¹¿æ’­é«˜æ•ˆã€‚ï¼ˆå…¨å±€å¹¿æ’­è¦ç»´æŠ¤çš„å¹¿æ’­é›†åˆè¡¨ æ•ˆç‡æ›´ä½ã€‚å…¨å±€å¹¿æ’­ï¼Œæ„å‘³ç€å¯ä»¥è·¨è¿›ç¨‹ï¼Œå°±éœ€è¦åº•å±‚çš„æ”¯æŒã€‚ï¼‰æœ¬åœ°å¹¿æ’­ä¸èƒ½ç”¨é™æ€æ³¨å†Œã€‚â€”-é™æ€æ³¨å†Œï¼šå¯ä»¥åšåˆ°ç¨‹åºåœæ­¢åè¿˜èƒ½ç›‘å¬ã€‚æ³¨å†ŒLocalBroadcastManager.getInstance(this).registerReceiver(new XXXBroadCastReceiver(), new IntentFilter(action));å–æ¶ˆæ³¨å†ŒLocalBroadcastManager.getInstance(this).unregisterReceiver(receiver) æ˜¯å¦ä½¿ç”¨è¿‡ IntentServiceï¼Œä½œç”¨æ˜¯ä»€ä¹ˆï¼Œ AIDL è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ1&gt; IntentServiceä½œç”¨å¦‚æœæœ‰ä¸€ä¸ªä»»åŠ¡ï¼Œå¯ä»¥åˆ†æˆå¾ˆå¤šä¸ªå­ä»»åŠ¡ï¼Œéœ€è¦æŒ‰ç…§é¡ºåºæ¥å®Œæˆï¼Œå¦‚æœéœ€è¦æ”¾åˆ°ä¸€ä¸ªæœåŠ¡ä¸­å®Œæˆï¼Œé‚£ä¹ˆä½¿ç”¨IntentServiceæ˜¯æœ€å¥½çš„é€‰æ‹©ã€‚ä¸€èˆ¬æˆ‘ä»¬æ‰€ä½¿ç”¨çš„Serviceæ˜¯è¿è¡Œåœ¨ä¸»çº¿ç¨‹å½“ä¸­çš„ï¼Œæ‰€ä»¥åœ¨serviceé‡Œé¢ç¼–å†™è€—æ—¶çš„æ“ä½œä»£ç ï¼Œåˆ™ä¼šå¡ä¸»çº¿ç¨‹ä¼šANRã€‚ä¸ºäº†è§£å†³è¿™æ ·çš„é—®é¢˜ï¼Œè°·æ­Œå¼•å…¥äº†IntentService.IntentServiceçš„ä¼˜ç‚¹ï¼šï¼ˆ1ï¼‰å®ƒåˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„å·¥ä½œçº¿ç¨‹æ¥å¤„ç†æ‰€æœ‰ä¸€ä¸ªä¸€ä¸ªintentã€‚ï¼ˆ2ï¼‰åˆ›å»ºäº†ä¸€ä¸ªå·¥ä½œé˜Ÿåˆ—ï¼Œæ¥é€ä¸ªå‘é€intentç»™onHandleIntent()ï¼ˆ3ï¼‰ä¸éœ€è¦ä¸»åŠ¨è°ƒç”¨stopSelf()æ¥ç»“æŸæœåŠ¡ï¼Œå› ä¸ºæºç é‡Œé¢è‡ªå·±å®ç°äº†è‡ªåŠ¨å…³é—­ã€‚ï¼ˆ4ï¼‰é»˜è®¤å®ç°äº†onBind()è¿”å›çš„nullã€‚ï¼ˆ5ï¼‰é»˜è®¤å®ç°çš„onStartCommand()çš„ç›®çš„æ˜¯å°†intentæ’å…¥åˆ°å·¥ä½œé˜Ÿåˆ—ã€‚2&gt; AIDL è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼ŸAIDLçš„å…¨ç§°ï¼šAndroid Interface Definition Languageï¼Œå®‰å“æ¥å£å®šä¹‰è¯­è¨€ã€‚ç”±äºAndroidç³»ç»Ÿä¸­çš„è¿›ç¨‹ä¹‹é—´ä¸èƒ½å…±äº«å†…å­˜ï¼Œæ‰€ä»¥éœ€è¦æä¾›ä¸€äº›æœºåˆ¶åœ¨ä¸åŒçš„è¿›ç¨‹ä¹‹é—´è¿›è¡Œæ•°æ®é€šä¿¡ã€‚è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼šRPCâ€”Remote Procedure Callï¼Œå®‰å“å°±æ˜¯æä¾›äº†ä¸€ç§IDLçš„è§£å†³æ–¹æ¡ˆæ¥å…¬å¼€è‡ªå·±çš„æœåŠ¡æ¥å£ã€‚AIDL:å¯ä»¥ç†è§£ä¸ºåŒæ–¹çš„ä¸€ä¸ªåè®®åˆåŒã€‚åŒæ–¹éƒ½è¦æŒæœ‰è¿™ä»½åè®®â€”æ–‡æœ¬åè®® xxx.aidlæ–‡ä»¶ï¼ˆå®‰å“å†…éƒ¨ç¼–è¯‘çš„æ—¶å€™ä¼šå°†aidlåè®®ç¿»è¯‘ç”Ÿæˆä¸€ä¸ªxxx.javaæ–‡ä»¶â€”ä»£ç†æ¨¡å¼ï¼šBinderé©±åŠ¨æœ‰å…³çš„ï¼ŒLinuxåº•å±‚é€šè®¯æœ‰å…³çš„ã€‚ï¼‰åœ¨ç³»ç»Ÿæºç é‡Œé¢æœ‰å¤§é‡ç”¨åˆ°aidlï¼Œæ¯”å¦‚ç³»ç»ŸæœåŠ¡ã€ç”µè§†æœºé¡¶ç›’ç³»ç»Ÿå¼€å‘ã€ä½ çš„æœåŠ¡è¦æš´éœ²ç»™åˆ«çš„å¼€å‘è€…æ¥ä½¿ç”¨ã€‚ Looperã€Handlerã€Messageä¸‰è€…å…³ç³» å…·ä½“çš„è¯¦æƒ…å¯ä»¥çœ‹é¸¿æ´‹å¤§ç¥çš„åšå®¢ï¼šhttp://blog.csdn.net/lmj623565791/article/details/38377229 è¿›ç¨‹é—´é€šä¿¡çš„å‡ ç§æ–¹å¼è¿›ç¨‹é—´é€šä¿¡å¤§æ¦‚æœ‰å››ç§æ–¹å¼ï¼š1ã€åº”ç”¨ä¹‹é—´çš„è·³è½¬Intentæ–¹å¼2ã€åº”ç”¨ä¹‹é—´å…±äº«æ•°æ®åº“æ–¹å¼ContentProvider3ã€å¹¿æ’­æ–¹å¼ï¼Œå¦‚åº”ç”¨æ¥å—ç³»ç»Ÿçš„å¹¿æ’­4ã€AIDLæœåŠ¡æ–¹å¼/Messagerä¿¡ä½¿ ä¸‰çº§ç¼“å­˜(1)å†…å­˜ç¼“å­˜LruCache (2)æœ¬åœ°ç¼“å­˜DiskLruCache (3)ç½‘ç»œå…·ä½“çš„è¯¦æƒ…å¯ä»¥çœ‹éƒ­éœ–å¤§ç¥çš„è®²è§£å†…å­˜ï¼šhttp://blog.csdn.net/guolin_blog/article/details/9526203æœ¬åœ°ï¼šhttp://blog.csdn.net/guolin_blog/article/details/28863651è¿™é‡Œéœ€è¦æ³¨æ„ä¸€ç‚¹çš„æ˜¯ï¼šå†…å­˜ç¼“å­˜å’Œæœ¬åœ°ç¼“å­˜éƒ½æ¶‰åŠåˆ°å­˜å‚¨çš„é—®é¢˜ï¼Œå†…å­˜ç¼“å­˜å¯ä»¥å°†ç½‘ç»œåœ°å€è½¬åŒ–ä¸ºhashcodeå€¼ä½œä¸ºLruCacheçš„key,æœ¬åœ°ç¼“å­˜DiskLruCacheå¯ä»¥å°†å­˜å‚¨çš„ç›®å½•åœ°å€ç”¨hashcodeæ¥å­˜å‚¨ ä»€ä¹ˆæ˜¯ActivityActivityæ˜¯Androidç¨‹åºä¸ç”¨æˆ·äº¤äº’çš„çª—å£ï¼Œå…·æœ‰ ç”Ÿå‘½å‘¨æœŸä»¥åŠä¸€äº›è·³è½¬é€»è¾‘ Activityç”Ÿå‘½çŠ¶æ€æœ‰å››ç§çŠ¶æ€ï¼š1ã€running Activityåœ¨å‰å° äº¤äº’çŠ¶æ€2ã€paused3ã€stopped4ã€killedï¼šå·²ç»è¢«å›æ”¶æ‰ Activityç”Ÿå‘½å‘¨æœŸåˆ†æActivityå¯åŠ¨-&gt;onCreate-&gt;onStart-&gt;onResumeç‚¹å‡»Homeé”®å›åˆ°ä¸»ç•Œé¢(Activityä¸å¯è§)-&gt;onPause-&gt;onStopå½“æˆ‘ä»¬å†æ¬¡å›åˆ°åŸActivityæ—¶-&gt;onRestart-&gt;onStart-&gt;onResumeé€€å‡ºå½“å‰Activity-&gt;onPause-&gt;onStop-&gt;onDestroy androidè¿›ç¨‹ä¼˜å…ˆçº§1ã€å‰å°è¿›ç¨‹ï¼šä¸ç”¨æˆ·äº¤äº’ã€ä¼˜å…ˆçº§æœ€é«˜2ã€å¯è§è¿›ç¨‹ï¼šå¦‚æœä¸€ä¸ªè¿›ç¨‹ä¸å«æœ‰ä»»ä½•å‰å°çš„ç»„ä»¶ï¼Œä½†ä»å¯è¢«ç”¨æˆ·åœ¨å±å¹•ä¸Šå¯è§3ã€æœåŠ¡è¿›ç¨‹ï¼šstartService4ã€åå°è¿›ç¨‹ï¼šä¸å¯è§5ã€ç©ºè¿›ç¨‹ï¼šä¸åŒ…å«ä»»ä½•æ´»è·ƒçš„ç»„ä»¶åˆ™è®¤ä¸ºç©ºè¿›ç¨‹ schemeè·³è½¬åè®®androidä¸­çš„schemeæ˜¯ä¸€ç§é¡µé¢å†…è·³è½¬åè®®ï¼Œæ˜¯ä¸€ç§éå¸¸å¥½çš„å®ç°æœºåˆ¶ï¼Œé€šè¿‡å®šä¹‰è‡ªå·±çš„schemeåè®®ï¼Œå¯ä»¥éå¸¸æ–¹ä¾¿è·³è½¬appä¸­çš„å„ä¸ªé¡µé¢ï¼›é€šè¿‡schemeåè®®ï¼ŒæœåŠ¡å™¨å¯ä»¥å®šåˆ¶åŒ–å‘Šè¯‰appè·³è½¬é‚£ä¸ªé¡µé¢ï¼Œå¯ä»¥é€šè¿‡é€šçŸ¥æ æ¶ˆæ¯å®šåˆ¶åŒ–è·³è½¬é¡µé¢ï¼Œå¯ä»¥é€šè¿‡H5é¡µé¢è·³è½¬é¡µé¢ç­‰ FragmentPagerAdapterä¸FragmentStatePageAdapterçš„åŒºåˆ«FragmentPagerAdapterä¸­çš„destroyItemä¸­è°ƒç”¨äº†Fragmentçš„detachæ–¹æ³•ï¼Œå¹¶æ²¡æœ‰é‡Šæ”¾å†…å­˜ï¼Œé€‚ç”¨äºé¡µé¢è¾ƒå°‘æƒ…å†µFragmentStatePageAdapterä¸­çš„destroyItemä¸­è°ƒç”¨äº†removeæ–¹æ³•æ˜¯çœŸæ­£çš„é‡Šæ”¾äº†ï¼Œå†…å­˜é€‚ç”¨äºé¡µé¢è¾ƒå¤šæƒ…å†µ Fragmenté€šä¿¡1ã€åœ¨Fragmentä¸­è°ƒç”¨Activityä¸­çš„æ–¹æ³• getActivity2ã€åœ¨Activityä¸­è°ƒç”¨Fragmentä¸­çš„æ–¹æ³• æ¥å£å›è°ƒ3ã€åœ¨Fragmentä¸­è°ƒç”¨Fragmentä¸­çš„æ–¹æ³• findFragmentById Threadå’ŒServiceçš„åŒºåˆ«Thread:Threadæ˜¯ç¨‹åºæ‰§è¡Œçš„æœ€å°å•å…ƒï¼Œå®ƒæ˜¯åˆ†é…CPUçš„åŸºæœ¬å•ä½ã€‚å¯ä»¥ç”¨Threadæ¥æ‰§è¡Œä¸€äº›ä¸€æ­¥çš„æ“ä½œService:Serviceæ˜¯Androidçš„ä¸€ç§æœºåˆ¶ï¼Œå½“å®ƒè¿è¡Œçš„æ—¶å€™å¦‚æœæ˜¯Local Serviceï¼Œé‚£ä¹ˆå¯¹åº”çš„Serviceæ˜¯è¿è¡Œåœ¨ä¸»è¿›ç¨‹çš„mainçº¿ç¨‹ä¸Šçš„ï¼›å¦‚æœæ˜¯Remote Serviceï¼Œé‚£ä¹ˆå¯¹åº”çš„ Service åˆ™æ˜¯è¿è¡Œåœ¨ç‹¬ç«‹è¿›ç¨‹çš„ main çº¿ç¨‹ä¸Šã€‚å› æ­¤è¯·ä¸è¦æŠŠ Service ç†è§£æˆçº¿ç¨‹ï¼Œå®ƒè·Ÿçº¿ç¨‹åŠæ¯›é’±çš„å…³ç³»éƒ½æ²¡æœ‰ï¼ å¹¿æ’­ç§ç±»1ã€æ™®é€šå¹¿æ’­ sendBroadcast2ã€æœ‰åºå¹¿æ’­ sendOrderedBroadcast3ã€æœ¬åœ°å¹¿æ’­ LocalBroadcastManager å¹¿æ’­çš„å†…éƒ¨å®ç°æœºåˆ¶1ã€è‡ªå®šä¹‰å¹¿æ’­æ¥å—è€…BroadcastReceiverï¼Œå¹¶å¤å†™onRecvice2ã€é€šè¿‡Binderæœºåˆ¶å‘AMSï¼ˆActivityManagerServiceï¼‰è¿›è¡Œæ³¨å†Œ3ã€å¹¿æ’­å‘é€è€…é€šè¿‡Binderæœºåˆ¶å‘AMSå‘é€å¹¿æ’­4ã€AMSæŸ¥æ‰¾ç¬¦åˆç›¸åº”æ¡ä»¶(IntentFilterç­‰)çš„BroadcastReceiverï¼Œå°†å¹¿æ’­å‘é€åˆ°BroadcastReceiverç›¸åº”çš„æ¶ˆæ¯å¾ªç¯é˜Ÿåˆ—5ã€æ¶ˆæ¯å¾ªç¯æ‰§è¡Œæ‹¿åˆ°æ­¤å¹¿æ’­ï¼Œå›è°ƒBroadcastReceiverä¸­çš„onReceiveæ–¹æ³• LocalBroadcastManagerè¯¦è§£1ã€ä½¿ç”¨å®ƒå‘é€çš„å¹¿æ’­å°†åªåœ¨è‡ªèº«APPå†…ä¼ æ’­ï¼Œå› æ­¤ä½ ä¸å¿…æ‹…å¿ƒæ³„éœ²éšç§æ•°æ®2ã€å…¶å®ƒAPPæ— æ³•å¯¹ä½ çš„APPå‘é€è¯¥å¹¿æ’­ï¼Œå› ä¸ºä½ çš„APPæ ¹æœ¬å°±ä¸å¯èƒ½æ¥å—åˆ°éè‡ªèº«åº”ç”¨å‘é€çš„è¯¥å¹¿æ’­ï¼Œå› æ­¤ä½ ä¸å¿…æ‹…å¿ƒæœ‰å®‰å…¨æ¼æ´å¯ä»¥åˆ©ç”¨3ã€æ¯”ç³»ç»Ÿçš„å…¨å±€å¹¿æ’­æ›´åŠ é«˜æ•ˆ LocalBroadcastManagerå†…éƒ¨è¯¦è§£1ã€LocalBroadcastManageré«˜æ•ˆçš„åŸå› ä¸»è¦æ˜¯å› ä¸ºå®ƒå†…éƒ¨æ˜¯é€šè¿‡Handlerå®ç°çš„ï¼Œå®ƒçš„sendBroadcastæ–¹æ³•å«ä¹‰å¹¶éå’Œæˆ‘ä»¬å¹³æ—¶æ‰€ç”¨çš„ä¸€æ ·ï¼Œå®ƒçš„sendBroadcastæ–¹æ³•å…¶å®æ˜¯é€šè¿‡handlerå‘é€ä¸€ä¸ªMessageå®ç°çš„2ã€æ—¢ç„¶æ˜¯å®ƒå†…éƒ¨æ˜¯é€šè¿‡Handleræ¥å®ç°å¹¿æ’­å‘é€çš„ï¼Œé‚£ä¹ˆç›¸æ¯”ä¸ç³»ç»Ÿå¹¿æ’­é€šè¿‡Binderå®ç°é‚£è‚¯å®šæ˜¯æ›´é«˜æ•ˆäº†ï¼ŒåŒæ—¶ä½¿ç”¨Handleræ¥å®ç°ï¼Œåˆ«çš„åº”ç”¨æ— æ³•å‘æˆ‘ä»¬çš„åº”ç”¨å‘é€è¯¥å¹¿æ’­ï¼Œè€Œæˆ‘ä»¬åº”ç”¨å†…å‘é€çš„å¹¿æ’­ä¹Ÿä¸ä¼šç¦»å¼€æˆ‘ä»¬çš„åº”ç”¨3ã€LocalBroadcastManagerå†…éƒ¨åä½œä¸»è¦æ˜¯é è¿™ä¸¤ä¸ªMapé›†åˆï¼šmReceiverså’ŒmActions,å½“ç„¶è¿˜æœ‰ä¸€ä¸ªListé›†åˆmPendingBroadcastsï¼Œè¿™ä¸ªä¸»è¦å°±æ˜¯å­˜å‚¨å¾…æ¥æ”¶çš„å¹¿æ’­å¯¹è±¡ã€‚ WebViewå¸¸è§çš„ä¸€äº›å‘1ã€åœ¨Android API16åŠä»¥å‰ç‰ˆæœ¬å­˜åœ¨è¿œç¨‹ä»£ç æ‰§è¡Œå®‰å…¨æ¼æ´ï¼Œè¯¥æ¼æ´æºäºç¨‹åºæ²¡æœ‰æ­£ç¡®é™åˆ¶ä½¿ç”¨WebView.addJavaScriptInterfaceæ–¹æ³•ï¼Œè¿œç¨‹æ”»å‡»è€…å¯é€šè¿‡ä½¿ç”¨java Reflection APIåˆ©ç”¨è¯¥æ¼æ´æ‰§è¡Œä»»æ„javaå¯¹è±¡çš„æ–¹æ³•2ã€WebViewåœ¨å¸ƒå±€æ–‡ä»¶ä¸­çš„ä½¿ç”¨éœ€è¦åœ¨onDestroyé‡Œé¢å…ˆremoveAllViewsä¹‹åå†è°ƒç”¨Webview.destroy()3ã€jsbridge nativeç«¯å’Œwebçš„æ¡¥4ã€åå°è€—ç”µ6ã€WebViewç¡¬ä»¶åŠ é€Ÿå¯¼è‡´é¡µé¢æ¸²æŸ“çš„é—®é¢˜ WebViewå†…å­˜æ³„æ¼1ã€åˆ›å»ºç‹¬ç«‹è¿›ç¨‹ï¼Œç®€å•æš´åŠ›ï¼Œä¸è¿‡å¯èƒ½æ¶‰åŠè¿›ç¨‹é—´é€šä¿¡ï¼ˆå¸¸ç”¨çš„æ–¹æ³•ï¼šå‡å°‘äº†ä¸»è¿›ç¨‹çš„å†…å­˜å®¹é‡ï¼‰2ã€åŠ¨æ€æ·»åŠ WebViewï¼Œå¯¹ä¼ å…¥WebViewä¸­ä½¿ç”¨çš„Contextä½¿ç”¨å¼±å¼•ç”¨ï¼ŒåŠ¨æ€æ·»åŠ WebViewæ„æ€åœ¨å¸ƒå±€åˆ›å»ºä¸ªViewGroupç”¨æ¥æ”¾ç½®WebViewï¼ŒActivityåˆ›å»ºæ—¶addè¿›æ¥ï¼Œåœ¨Activityåœæ­¢æ—¶removeæ‰ ä»€ä¹ˆæ˜¯Binder1ã€é€šå¸¸æ„ä¹‰ä¸‹ï¼ŒBinderæŒ‡çš„æ˜¯ä¸€ç§é€šä¿¡æœºåˆ¶2ã€å¯¹äºServerè¿›ç¨‹æ¥è¯´ï¼ŒBinderæŒ‡çš„æ˜¯Binderæœ¬åœ°å¯¹è±¡/å¯¹äºClientæ¥è¯´ï¼ŒBinderæŒ‡çš„æ˜¯Binderä»£ç†å¯¹è±¡3ã€å¯¹äºä¼ è¾“è¿‡ç¨‹è€Œè¨€ï¼ŒBinderæ˜¯å¯ä»¥è¿›è¡Œè·¨è¿›ç¨‹ä¼ é€’çš„å¯¹è±¡ ä¸ºä»€ä¹ˆè¦ä½¿ç”¨Binder1ã€Androidä½¿ç”¨çš„Linuxå†…æ ¸æ‹¥æœ‰ç€éå¸¸å¤šçš„è·¨è¿›ç¨‹é€šä¿¡æœºåˆ¶2ã€æ€§èƒ½ä¸Š3ã€å®‰å…¨ä¸Š åŒæ–¹æ ¡éªŒ OkHttpä½¿ç”¨1ã€åˆ›å»ºä¸€ä¸ªOkhttpClientå¯¹è±¡2ã€åˆ›å»ºä¸€ä¸ªrequestå¯¹è±¡ï¼Œé€šè¿‡å†…éƒ¨ç±»Builderè°ƒç”¨ç”ŸæˆRequestå¯¹è±¡3ã€åˆ›å»ºä¸€ä¸ªCallå¯¹è±¡ï¼Œè°ƒç”¨execute/enqueue OkHttpçš„æºç è§£æ Retrofitæºç è§£æ1ã€åœ¨retrofitä¸­é€šè¿‡ä¸€ä¸ªæ¥å£ä½œä¸ºhttpè¯·æ±‚çš„apiæ¥å£2ã€åˆ›å»ºä¸€ä¸ªretrofitçš„å®ä¾‹3ã€è°ƒç”¨APIæ¥å£ Retrofit åŠ¨æ€ä»£ç†è§£æ1ã€é¦–å…ˆï¼Œé€šè¿‡methodæŠŠå®ƒè½¬åŒ–æˆServiceMethod2ã€ç„¶åï¼Œé€šè¿‡serviceMethodï¼Œargsè·å–åˆ°OKhttpCallå¯¹è±¡3ã€æœ€åï¼Œå†æŠŠOKhttpCallè¿›ä¸€æ­¥å°è£…å¹¶è¿”å›Callå¯¹è±¡ Retrofitæºç è§£æ1ã€åˆ›å»ºä¸€ä¸ªRetrofitå¯¹è±¡2ã€é€šè¿‡Retrofit.createæ–¹æ³•æ˜¯æ€ä¹ˆæŠŠæˆ‘ä»¬æ‰€å®šä¹‰çš„æ¥å£è½¬åŒ–æˆæ¥å£å®ä¾‹å¹¶ä½¿ç”¨æ¥å£ä¸­çš„æ–¹æ³•3ã€æœ€ç»ˆçš„ç½‘ç»œè¯·æ±‚è°ƒç”¨çš„okhttp â€¦æœªå®Œï¼Œå¾…ç»­]]></content>
      <categories>
        <category>ç‚¹æ»´é¢è¯•ç»</category>
        <category>Androidé¢è¯•</category>
      </categories>
      <tags>
        <tag>ç‚¹æ»´é¢è¯•ç»</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Cameraä¹‹[æ–¹å‘ä¸å°ºå¯¸]]]></title>
    <url>%2F2018%2F01%2F23%2F20180120_Camera%E6%96%B9%E5%90%91%E5%92%8C%E5%B0%BA%E5%AF%B8%E9%80%82%E9%85%8D%2F</url>
    <content type="text"><![CDATA[å‰è¨€&emsp;&emsp; ä¸Šä¸€æ¬¡åˆ†æäº†Cameraçš„åŸºæœ¬ä½¿ç”¨ï¼Œå¹¶ä¸”ä½¿ç”¨å®ç°äº†åŸºæœ¬çš„é¢„è§ˆåŠŸèƒ½ï¼Œåœ¨ä¸Šä¸€æ¬¡æˆ‘ä»¬æåˆ°äº†ä½¿ç”¨setDisplayOrientation() è®¾ç½®ç›¸æœºçš„é¢„è§ˆæ–¹å‘ï¼Œè¿˜æœ‰çœ‹ä¸Šä¸€èŠ‚åˆ†äº«çš„é¢„è§ˆå›¾å¯ä»¥å‘ç°å›¾åƒè¢«æ‹‰ä¼¸äº†ã€‚é‚£æˆ‘ä»¬è¿™ä¸€èŠ‚ä¸è¦è®²è§£ä¸‹å¦‚ä½•æ§åˆ¶æ–¹å‘å’Œå°ºå¯¸çš„é—®é¢˜ã€‚ Camera ä¸­çš„æ–¹å‘&emsp;&emsp;åœ¨ç›¸æœºå¼€å‘ä¸­æœ‰ä¸‰ä¸ªæ–¹å‘çš„å®šä¹‰ï¼šå±å¹•æ–¹å‘ã€å›¾åƒä¼ æ„Ÿå™¨æ–¹å‘ã€æ‹ç…§åçš„ç…§ç‰‡æ–¹å‘ã€‚åœ¨å¼€å‘æ—¶ï¼Œæˆ‘ä»¬è¦ç¡®ä¿è¿™ä¸‰ä¸ªæ–¹å‘ä¿æŒä¸€è‡´ï¼Œè¿™æ ·æˆ‘ä»¬æ‰èƒ½é¢„è§ˆä»¥åŠæ‹å‡ºæˆ‘ä»¬æƒ³çœ‹åˆ°çš„ç…§ç‰‡ã€‚ å±å¹•æ–¹å‘ å›¾åƒä¼ æ„Ÿå™¨æ–¹å‘&emsp;&emsp;å±å¹•æ–¹å‘æˆ‘ä»¬åº”è¯¥éƒ½ä¸é™Œç”Ÿï¼Œå°±æ˜¯ä»¥å±å¹•å·¦ä¸Šè§’ä¸ºåŸç‚¹ï¼Œæ¨ªå‘ä¸ºXè½´æ­£æ–¹å‘ï¼Œçºµå‘ä¸ºYè½´æ­£æ–¹å‘ã€‚è€Œç›¸æœºçš„å›¾åƒä¼ æ„Ÿå™¨æ–¹å‘æ˜¯ç”±å®‰è£…çš„Image Sensorå†³å®šçš„ï¼Œåœ¨å¤šæ•°çš„æ‰‹æœºä¸­åç½®ç›¸æœºçš„å›¾åƒä¼ æ„Ÿå™¨çš„æ–¹å‘æ˜¯ä»¥å±å¹•å³ä¸Šè§’ä¸ºåŸç‚¹ï¼Œçºµå‘ä¸ºXçš„æ­£æ–¹å‘ï¼Œæ¨ªå‘ä¸ºYè½´çš„æ­£æ–¹å‘ã€‚ å¯¹äºæ¨ªå±åº”ç”¨æ¥è¯´ï¼Œå±å¹•çš„æ–¹å‘å’Œç»˜åˆ¶æ‘„åƒå¤´å›¾åƒä¼ æ„Ÿå™¨æ–¹å‘ä¸€è‡´ï¼Œæ‰€ä»¥çœ‹åˆ°çš„å›¾åƒæ˜¯æ­£æ–¹å‘çš„ è€Œå½“å±å¹•ç«–ç›´æ–¹å‘æ—¶ï¼Œå±å¹•æ–¹å‘å’Œå›¾åƒä¼ æ„Ÿå™¨æ–¹å‘ä¸ä¸€è‡´ï¼Œè¿™æ˜¯æˆ‘ä»¬çœ‹åˆ°çš„å›¾åƒå°±æ˜¯è¿™æ ·çš„ ä¸çŸ¥é“å¤§å®¶åˆšåˆšå¼€å§‹çœ‹åˆ°å›¾åƒæ—¶æ˜¯å¦ä¼šæ„Ÿè§‰å¾ˆå¥‡æ€ªï¼Œç»“åˆä¸Šé¢çš„åæ ‡ç³»ï¼Œè¿™ä¸ªå°äººçš„è„‘è¢‹ä¸æ˜¯åº”è¯¥æœå‘å³é¢å—,å¦‚æœæ˜¯è¿™æ ·å‘¢ï¼Œé‚£æˆ‘å°±å¾ˆé«˜å…´æ‰¾åˆ°ä¸€ä¸ªåŒç›Ÿï¼Œå“ˆå“ˆã€‚ä½†æ˜¯åæ¥ç»è¿‡äº‹å®éªŒè¯å°äººçš„è„‘è¢‹ç¡®å®æ˜¯æœå‘å·¦é¢çš„ï¼Œäºæ˜¯ç»è¿‡å„ç§ç†è§£ç»ˆäºæ‰¾åˆ°äº†ä¸€ç§è¯´æœè‡ªå·±çš„æ–¹æ³•ï¼Œè¿™ç§æ–¹æ³•å¯èƒ½ä¸æƒå¨ï¼Œä½†æ˜¯è¿˜æ˜¯æƒ³è¯´ä¸€ä¸‹ï¼šé¦–å…ˆä»ä¸Šé¢çš„å›¾ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å±å¹•çš„å’Œå›¾åƒä¼ æ„Ÿå™¨æœ‰90åº¦çš„å¤¹è§’ï¼Œå½“å›¾åƒä¼ æ„Ÿå™¨é‡‡é›†åˆ°å›¾åƒåä¼šä»¥æŸç§æ–¹å¼æ˜ å°„åˆ°å±å¹•ä¸Šçš„ï¼Œè¿™ç§æ–¹å¼å°±æ˜¯é€†æ—¶é’ˆæ—‹è½¬90åº¦ï¼Œå› ä¸ºåªæœ‰è¿™æ ·ä¸¤ä¸ªåæ ‡ç³»æ‰æ˜¯å¯¹åº”çš„ï¼Œç„¶åå†è¯´å›¾åƒä¼ æ„Ÿå™¨æ‰€ç”Ÿäº§çš„å›¾åƒåº”è¯¥å°±æˆ‘ä»¬æ‰€çœ‹åˆ°çš„ç‰©ä½“çš„æ–¹å‘ï¼Œä¹Ÿå°±æ˜¯å°äººè„‘è¢‹æ˜¯æœä¸Šçš„ï¼Œæ˜ å°„åˆ°å±å¹•ä¸Šé€†æ—¶é’ˆæ—‹è½¬90åº¦åï¼Œæˆ‘ä»¬ä¾¿çœ‹åˆ°äº†ä¸Šå›¾æ‰€ç¤ºçš„å›¾åƒã€‚ å¯¹äºå‰ç½®æ‘„åƒå¤´ä¸€èˆ¬æ˜¯å’Œåç½®æ‘„åƒå¤´æˆ180åº¦çš„ï¼Œä½†æ˜¯å‰ç½®æ‘„åƒå¤´é‡‡é›†çš„å›¾åƒæ˜¯ç»è¿‡é•œåƒå¤„ç†æ˜¾ç¤ºåœ¨å±å¹•ä¸Šçš„ï¼Œæ‰€ä»¥å¯¹äºå‰ç½®æ‘„åƒå¤´æˆ‘ä»¬ä¹Ÿæ˜¯æ—‹è½¬90æ‰€ä»¥å¯¹äºå‰ç½®æ‘„åƒå¤´æˆ‘ä»¬ä¹Ÿæ˜¯æ—‹è½¬90å°±å¯ä»¥æ­£ç¡®çš„é¢„è§ˆå›¾åƒäº† æ‰€ä»¥æˆ‘ä»¬ç°åœ¨è¦ä½¿ç”¨setDisplayOrientation()æ¥è®¾ç½®å›¾ç‰‡æ˜¾ç¤ºçš„æ–¹å‘å’Œå±å¹•æ–¹å‘ä¸€è‡´ï¼ŒAndroid å®˜ç½‘æä¾›äº†ä¸€ç§è®¾ç½®å›¾ç‰‡é¢„è§ˆæ–¹å‘å’Œå±å¹•æ–¹å‘ä¸€è‡´çš„è®¾ç½®æ“ä½œ 1234567891011121314151617181920212223242526272829public static void setCameraDisplayOrientation(Activity activity, int cameraId, android.hardware.Camera camera) &#123; android.hardware.Camera.CameraInfo info = new android.hardware.Camera.CameraInfo(); android.hardware.Camera.getCameraInfo(cameraId, info); //è·å–å±å¹•çš„æ–¹å‘ int rotation = activity.getWindowManager().getDefaultDisplay() .getRotation(); int degrees = 0; switch (rotation) &#123; case Surface.ROTATION_0: degrees = 0; break; case Surface.ROTATION_90: degrees = 90; break; case Surface.ROTATION_180: degrees = 180; break; case Surface.ROTATION_270: degrees = 270; break; &#125; int result; if (info.facing == Camera.CameraInfo.CAMERA_FACING_FRONT) &#123; //å‰ç½®æ‘„åƒå¤´ result = (info.orientation + degrees) % 360; result = (360 - result) % 360; // compensate the mirror &#125; else &#123; // back-facing //åç½®æ‘„åƒå¤´ result = (info.orientation - degrees + 360) % 360; &#125; camera.setDisplayOrientation(result); &#125; CameraInfo æ˜¯è·å–ç›¸æœºä¿¡æ¯çš„APIï¼Œå®˜æ–¹æ˜¯è¿™æ ·è§£é‡Šçš„ï¼šInformation about a camera cameraInfo.orientation: The orientation of the camera image. The value is the angle that the camera image needs to be rotated clockwise so it shows correctly on the display in its natural orientation. It should be 0, 90, 180, or 270. æ„æ€æ˜¯è¯´å›¾åƒæ˜¾ç¤ºè‡ªç„¶æ–¹å‘éœ€è¦é¡ºæ—¶é’ˆæ—‹è½¬çš„è§’åº¦ (ä»¥ä¸Šçš„å›¾ç‰‡å¼•è‡ªä¸€ä¸‹ç½‘ç«™ ï¼šhttps://www.cnblogs.com/bugly/p/6108758.htmlï¼Œè¿™ç¯‡æ–‡ç« æ€»ç»“çš„å¾ˆå¥½çš„ï¼Œå¦‚æœè§‰å¾—æˆ‘ä¸Šé¢è®²çš„ä¸å¥½å¯ä»¥çœ‹çœ‹è¿™ç¯‡æ–‡ç« ï¼‰ æ‰‹æœºä¼ æ„Ÿå™¨æ–¹å‘ ç…§ç‰‡æ–¹å‘&emsp;&emsp;åœ¨è®¾ç½®å¥½é¢„è§ˆæ–¹å‘åï¼Œæˆ‘ä»¬è¿›è¡Œæ‹ç…§ï¼ŒæŸ¥çœ‹æ‹å¥½çš„ç…§ç‰‡æˆ‘ä»¬ä¼šå‘ç°æ‹æ‘„çš„ç…§ç‰‡æ–¹å‘å¹¶ä¸å¯¹ï¼Œåˆšåˆšè´¹äº†é‚£ä¹ˆå¤§çš„åŠ›æ°”å¼„æ˜ç™½äº†é¢„è§ˆæ–¹å‘çš„è®¾ç½®ï¼Œå‘ç°å…¶æ‹æ‘„çš„ç…§ç‰‡æ–¹å‘å¹¶ä¸ç”Ÿæ•ˆï¼Œæ˜¯ä¸æ˜¯å¾ˆæ°”ï¼Œä¸è¿‡ç”Ÿæ°”ä¹Ÿæ²¡æœ‰åŠæ³•å•¦ï¼Œè¿˜å¾—ä¹–ä¹–çš„æ¥ç ”ç©¶ä¸‹æ€ä¹ˆæŠŠæ‹æ‘„å¥½çš„ç…§ç‰‡æ–¹å‘æ•´å¥½æ‰æ˜¯ã€‚ åœ¨android api ä¸­çœ‹setDisplayOrientation()æ—¶ï¼Œå¯¹è¯¥æ–¹æ³•æœ‰è¿™æ ·ä¸€å¥æ³¨è§£ï¼šThis does not affect the order of byte array passed in onPreviewFrame(byte[], Camera), JPEG pictures, or recorded videosã€‚ æ„æ€å°±æ˜¯è¯´ä¸ä¼šè°ƒç”¨onPreviewFrame æ–¹æ³•ç”Ÿæˆçš„JPEGå›¾åƒï¼Œæˆ–è€…å½•åˆ¶çš„è§†é¢‘äº§ç”Ÿä½œç”¨ã€‚å› æ­¤æˆ‘ä»¬å¿…é¡»ä½¿ç”¨å¦å¤–çš„æ–¹æ³•æ¥è®¾ç½®ç”Ÿæˆçš„ç…§ç‰‡çš„æ–¹å‘äº†ã€‚ é¦–å…ˆè·å–åˆ°ç›¸æœºçš„è®¾ç½®æœåŠ¡ç±»Camera.Parameters,è¿™ä¸ªç±»ä¸»è¦ç”¨äºè®¾ç½®ç›¸æœºçš„æ˜¾ç¤ºæ•ˆæœï¼Œè¯¥ç±»ä¸­ä¼šæœ‰setXXXæ–¹æ³•ä¾›æˆ‘ä»¬è®¾ç½®æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœï¼Œä½†æ˜¯åœ¨è¿™ä¹‹å‰æˆ‘ä»¬å¿…é¡»é€šè¿‡getXXXè·å–æ­¤æ•ˆæœå…è®¸æˆ‘ä»¬è®¾ç½®çš„å‚æ•°ï¼Œå¦‚æœæˆ‘ä»¬è®¾ç½®äº†ç³»ç»Ÿä¸æ”¯æŒçš„å°ºå¯¸ä¼šå‘ç”Ÿä¸å¥½çš„äº‹æƒ…çš„ï¼ˆå´©æºƒï¼‰ï¼Œè®¾ç½®å¥½ä¹‹åæˆ‘ä»¬è¿˜è¦é€šè¿‡camera.setParameters(..)æ–¹æ³•ä½¿æˆ‘ä»¬ä¸Šé¢è®¾ç½®çš„å‚æ•°ç”Ÿæ•ˆã€‚ åœ¨Camera.Parametersä¸­ç³»ç»Ÿæä¾›äº†è®¾ç½®ç…§ç‰‡æ–¹å‘çš„æ–¹æ³•ï¼šsetRotation (int rotation)ï¼š Sets the clockwise rotation angle in degrees relative to the orientation of the camera. This affects the pictures returned from JPEG Camera.PictureCallback. The camera driver may set orientation in the EXIF header without rotating the picture. Or the driver may rotate the picture and the EXIF thumbnail. If the Jpeg picture is rotated, the orientation in the EXIF header will be missing or 1 (row #0 is top and column #0 is left side). If applications want to rotate the picture to match the orientation of what users see, apps should use OrientationEventListener and Camera.CameraInfo. The value from OrientationEventListener is relative to the natural orientation of the device. CameraInfo.orientation is the angle between camera orientation and natural device orientation. The sum of the two is the rotation angle for back-facing camera. The difference of the two is the rotation angle for front-facing camera. Note that the JPEG pictures of front-facing cameras are not mirrored as in preview display. For example, suppose the natural orientation of the device is portrait. The device is rotated 270 degrees clockwise, so the device orientation is 270. Suppose a back-facing camera sensor is mounted in landscape and the top side of the camera sensor is aligned with the right edge of the display in natural orientation. So the camera orientation is 90. The rotation should be set to 0 (270 + 90). å¹¶ä¸”å®˜æ–¹è¿˜ç»™æˆ‘ä»¬æä¾›äº†è·å–å›¾ç‰‡è¯¥è®¾ç½®çš„è§’åº¦çš„æ–¹æ³•ï¼Œä»¥ä¸‹æ˜¯å®˜æ–¹ç»™å‡ºçš„æ–¹æ³• 1234567891011121314public void onOrientationChanged(int orientation) &#123; if (orientation == ORIENTATION_UNKNOWN) return; android.hardware.Camera.CameraInfo info = new android.hardware.Camera.CameraInfo(); android.hardware.Camera.getCameraInfo(cameraId, info); orientation = (orientation + 45) / 90 * 90; int rotation = 0; if (info.facing == CameraInfo.CAMERA_FACING_FRONT) &#123; rotation = (info.orientation - orientation + 360) % 360; &#125; else &#123; // back-facing camera rotation = (info.orientation + orientation) % 360; &#125; mParameters.setRotation(rotation); &#125; å…¶ä¸­onOrientationChanged(int orientation)æ˜¯OrientationEventListenerä¸­çš„å›è°ƒæ–¹æ³•ï¼ŒOrientationEventListeneræ˜¯ç›‘æµ‹æ‰‹æœºï¼ˆä¸æ˜¯å±å¹•å“¦ï¼‰æ—‹è½¬äº†å¤šå°‘åº¦çš„ï¼ŒonOrientationChanged ä¸­çš„orientationæ˜¯æŒ‡æ‰‹æœºé¡ºæ—¶é’ˆæ—‹è½¬çš„è§’åº¦ã€‚é€šè¿‡ä»¥ä¸Šè®¡ç®—åç»™ç›¸æœºè®¾ç½®è®¡ç®—åçš„è§’åº¦ï¼Œè¿™ä¸ªè§’åº¦ä¸€å®šæ˜¯0,90,180,270ä¸­çš„ä¸€ä¸ªã€‚ æœ€åæŠŠç›¸æœºçš„æœåŠ¡ç±»è®¾ç½®ç»™ç›¸æœºï¼šcamera.setParameters(mParameters); ä¸€å®šè¦è®¾ç½®å¦åˆ™è®¾ç½®çš„å‚æ•°å°†ä¸ä¼šç”Ÿæ•ˆã€‚ å¥½äº†ï¼Œé€šè¿‡ä»¥ä¸Šè§£è¯´æˆ‘ä»¬è§£å†³äº†ç›¸æœºä¸­çš„æ–¹å‘çš„é—®é¢˜ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬èŠä¸€ä¸‹ç›¸æœºä¸­çš„å°ºå¯¸é—®é¢˜ã€‚ Camera ä¸­çš„å°ºå¯¸é—®é¢˜&emsp;&emsp;å¼€å‘ç›¸æœºæ—¶æˆ‘ä»¬è¦ä¿è¯é¢„è§ˆæ§ä»¶çš„å°ºå¯¸ã€å›¾åƒé¢„è§ˆçš„å°ºå¯¸ã€ç…§ç‰‡çš„å°ºå¯¸ çš„æ¯”ä¾‹å¿…é¡»ä¸€è‡´ï¼Œå¦åˆ™æˆ‘ä»¬ä¸æ˜¯çœ‹åˆ°åœ¨é¢„è§ˆæ—¶ç•Œé¢æœ‰æ‹‰ä¼¸å°±æ˜¯æ‹å‡ºæ¥çš„ç…§ç‰‡æœ‰æ‹‰ä¼¸çš„é—®é¢˜ã€‚åœ¨ç›¸æœºä¸­æœ€å¸¸ç”¨åˆ°çš„é¢„è§ˆæ¯”ä¾‹æ˜¯16:9å’Œ4:3,åœ¨æˆ‘ä»¬ç¡®å®šäº†è¦è®¾ç½®çš„æ¯”ä¾‹ååˆ†åˆ«é€šè¿‡è®¾ç½®è¯¥æ¯”ä¾‹æ§ä»¶çš„å¤§å°ã€cameraçš„é¢„è§ˆå°ºå¯¸å’Œç…§ç‰‡çš„å¤§å°åï¼Œå°±å¯ä»¥å®ç°æ­£å¸¸çš„é¢„è§ˆå’Œæ‹æ‘„æ­£å¸¸å›¾ç‰‡çš„åŠŸèƒ½äº†ã€‚ è®¾ç½®æ§ä»¶çš„å°ºå¯¸å¯ä»¥é€šè¿‡åœ¨è‡ªå®šä¹‰viewä¸­é‡å†™onMeasureæ–¹æ³•è®¾ç½®ï¼Œä¸‹é¢ç»™å‡ºä¸€ç§è®¾ç½®é¢„è§ˆæ§ä»¶å¤§å°çš„å†™æ³• 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354 protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) &#123;// super.onMeasure(widthMeasureSpec, heightMeasureSpec); int previewWidth = MeasureSpec.getSize(widthMeasureSpec); int previewHeight = MeasureSpec.getSize(heightMeasureSpec); boolean widthLonger = previewWidth &gt; previewHeight?true:false; int longSide = (widthLonger ?previewWidth : previewHeight); int shortSide = (widthLonger ? previewHeight : previewWidth); if (Math.abs((mRatio - (16 / 9d))) &lt; Util.DEVIATION)&#123; Log.d(TAG, "onMeasure: 16:9"); if (longSide &lt; shortSide*mRatio)&#123; longSide = Math.round((float) (shortSide * mRatio) / 2)* 2; &#125;else &#123; shortSide = Math.round((float) (previewHeight / mRatio) / 2) * 2; &#125; &#125;else &#123; Log.d(TAG, "onMeasure: 4:3"); if (longSide &gt; shortSide * mRatio)&#123; longSide = Math.round((float) (shortSide * mRatio) / 2) * 2; &#125;else &#123; shortSide = Math.round((float) (previewHeight / mRatio) / 2) * 2; &#125; &#125; if (widthLonger)&#123; previewWidth = longSide; previewHeight = shortSide; &#125;else &#123; previewHeight = longSide; previewWidth = shortSide; &#125; int marginTop = getResources().getDimensionPixelOffset(R.dimen.surface_margin_top); FrameLayout.LayoutParams params = (FrameLayout.LayoutParams) getLayoutParams(); if (mRatio &lt; Util.FULL_SCREEN)&#123; params.setMargins(0,marginTop,0,0); &#125;else &#123; params.setMargins(0,0,0,0); &#125; setLayoutParams(params); setMeasuredDimension(previewWidth,previewHeight); &#125; public void setRatio(double ratio)&#123; Log.d(TAG, "setRatio: ratio = "+ratio); if (mRatio != ratio)&#123; mRatio = ratio; requestLayout(); &#125; &#125; æ¥ä¸‹æ¥æˆ‘ä»¬è¦è®¾ç½®ç›¸æœºçš„é¢„è§ˆå°ºå¯¸å’Œç…§ç‰‡å°ºå¯¸äº†ï¼Œ è·å–ParametersmCamera.getParameters() è®¾ç½®é¢„è§ˆå¤§å°å’Œå›¾ç‰‡å¤§å°123456789101112131415161718192021public void setPreviewSize(double ratio)&#123; Camera.Size previewSize = getAppropriateSize(mParameters.getSupportedPreviewSizes(),ratio); Log.d(TAG, "setPreviewSize: preview width = "+previewSize.width+"; height = "+previewSize.height); mParameters.setPreviewSize(previewSize.width,previewSize.height); Camera.Size picSize = getAppropriateSize(mParameters.getSupportedPictureSizes(),ratio); Log.d(TAG, "setPreviewSize: pic width = "+previewSize.width+"; height = "+previewSize.height); mParameters.setPictureSize(picSize.width,picSize.height); &#125; //è¿™é‡Œåªæ˜¯ç®€å•çš„ç­›é€‰äº†é€‚åˆæ¯”ä¾‹çš„å°ºå¯¸ï¼Œè‡ªå·±å†™æ—¶å¯ä»¥ä½¿ç”¨æ›´åŠ ä¸¥è°¨çš„ç­›é€‰è§„åˆ™ï¼Œ public static Camera.Size getAppropriateSize(List&lt;Camera.Size&gt; sizeList,double ratio)&#123; Camera.Size result = null; for (Camera.Size size:sizeList)&#123; if (Math.abs(ratio - size.width *1.0d / size.height) &lt; DEVIATION)&#123; result = size; &#125; &#125; Log.d(TAG, "getPreviewSize: ratio = "+ratio+"; result width = "+result.width+"; height = "+result.height); return result; &#125; å°†è®¾ç½®å¥½å‚æ•°çš„Parameters è®¾ç½®ç»™ç›¸æœºmCamera.setParameters(mParameters); ç»“åˆä¸Šé¢æ–¹å‘çš„è®¾ç½®ï¼Œæˆ‘ä»¬å°±å¯ä»¥å®ç°æ–¹å‘æ­£ç¡®è‡ªå®šä¹‰æ¯”ä¾‹çš„çš„ç…§ç‰‡äº†ã€‚ è‡ªå·±å†™äº†ä¸€ä¸ªå°demoä¾›å¤§å®¶å‚è€ƒï¼š https://github.com/AndLollipop/huahua_Camera/tree/master/huahua_Camera_02 åœ¨ä¸‹ä¸€ç¯‡ä¸­ä¼šç»§ç»­è®²è§£ç›¸æœºä¸­èšç„¦å’Œäººè„¸è¯†åˆ«çš„å®ç°ï¼Œè¯·ç»§ç»­å…³æ³¨å“¦ã€‚]]></content>
      <categories>
        <category>æŠ€æœ¯å‘¨</category>
        <category>Cameraå¼€å‘</category>
      </categories>
      <tags>
        <tag>Cameraå¼€å‘</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ConstraintSetå®Œå…¨è§£æ]]></title>
    <url>%2F2018%2F01%2F13%2F20180113_ConstraintSet%E5%AE%8C%E5%85%A8%E8%A7%A3%E6%9E%90%2F</url>
    <content type="text"><![CDATA[å‰è¨€&emsp;&emsp;åœ¨çœ‹è¿™ç¯‡æ–‡ç« çš„txï¼Œå¦‚æœæƒ³äº†è§£ConstraintLayoutçš„ä½¿ç”¨è¯·ç§»æ­¥ï¼šconstraintlayoutå®Œå…¨è§£æ å®˜æ–¹ç½‘å€ï¼šhttps://developer.android.com/reference/android/support/constraint/ConstraintSet.html ConstraintSetå¯¹æ§ä»¶å½±å“&emsp;&emsp;å¯¹äºConstraintSetï¼Œå®˜æ–¹æ–‡æ¡£è§£é‡Šåˆ°å®ƒæ˜¯ç”¨æ¥å­˜å‚¨çº¦æŸå’Œå°†è¿™äº›çº¦æŸé™„åŠ åˆ°ConstraintLayoutä¸Šï¼Œä¹‹ååˆç»™äº†ä¸€ä¸ªç®€å•çš„å°ä¾‹å­è®²è§£äº†ä¸€ä¸‹ConstraintSetçš„ä½¿ç”¨ï¼Œè¿™é‡Œä¹Ÿå°†å®˜ç½‘ä»£ç ä¸€å¹¶æ‹·å‡º 12345678910111213141516171819202122ConstraintSet mConstraintSet1 = new ConstraintSet();ConstraintSet mConstraintSet2 = new ConstraintSet();ConstraintLayout mConstraintLayout;boolean mOld = true;@Overrideprotected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); Context context = this; mConstraintSet2.clone(context, R.layout.state2); setContentView(R.layout.state1); mConstraintLayout = (ConstraintLayout) findViewById(R.id.activity_main); mConstraintSet1.clone(mConstraintLayout);&#125;public void foo(View view) &#123; TransitionManager.beginDelayedTransition(mConstraintLayout); if (mOld = !mOld) &#123; mConstraintSet1.applyTo(mConstraintLayout); &#125; else &#123; mConstraintSet2.applyTo(mConstraintLayout); &#125;&#125; &emsp;&emsp;å°±æ˜¯è¿™ä¸ªæ ·çº¸çš„ï¼Œçœ‹èµ·æ¥å¾ˆæ¸…æ™°ï¼Œä»å°†çº¦æŸå­˜å‚¨åˆ°ConstraintSetä¸­åˆ°ä¸ºConstraintLayoutè®¾ç½®ä¸€ä¸ªæ–°çš„çº¦æŸï¼Œå…¨ç¨‹æ¯«æ— å°¿ç‚¹ï¼Œä½†æ˜¯è¿è¡Œä¹‹åå‘ç°æœ‰ä¸ªç±»å¾ˆå¼ºå¤§ï¼Œé‚£å°±æ˜¯TransitionManagerï¼Œè¿™ä¸ªç±»ç”¨æ¥ç®¡ç†å¼€å§‹åœºæ™¯å’Œç»“æŸåœºæ™¯çš„è¿‡æ¸¡åŠ¨ç”»çš„ï¼Œå¯¹äºTransitionManagerç±»æœ¬æ–‡æœ€åå°†ä¼šè®²è§£ã€‚ ConstraintSetç±»é›†æˆäº†çº¦æŸçš„æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•å’Œåœ¨xmlé‡Œé¢æ˜¯åŒæ ·çš„æ•ˆæœï¼Œå½“ç„¶è¿˜æœ‰ä¸€äº›çº¦æŸæ–¹æ³•æ”¾åˆ°äº†ConstraintLayout.layoutParamsé‡Œé¢ï¼ŒOk,ç›´æ¥ä¸Šæ•ˆæœ åœ¨ä¹‹å‰è¦åšè¿™ä¹ˆä¸€ä¸ªæ•ˆæœå¯èƒ½è¦ä½¿ç”¨å±æ€§åŠ¨ç”»æ¥å®ç°ï¼Œä¼šæœ‰å¾ˆå¤šçš„è®¡ç®—å’Œæ§åˆ¶ï¼Œåœ¨ConstraintSeté‡Œé¢å®Œå…¨ä¸ç”¨ï¼Œåœ¨ä¿è¯ä½¿ç”¨ä¸€å±‚ConstraintLayoutå¸ƒå±€åµŒå¥—çš„æƒ…å†µä¸‹æ¥åšå„ç§åŠ¨ç”»ç¡®å®æ„Ÿè§‰èˆ’æœäº†è®¸å¤šï¼Œä»£ç å®ç°èµ·æ¥å¾ˆç®€å•ã€‚ 123456789101112131415161718192021222324constraintlayout = findViewById(R.id.constraintlayout);set.clone(constraintlayout);normal.clone(constraintlayout);iv_img.setOnClickListener(new View.OnClickListener() &#123; @Override public void onClick(View v) &#123; TransitionManager.beginDelayedTransition(constraintlayout); if (flag) &#123; set.connect(R.id.iv_img, ConstraintSet.LEFT, ConstraintSet.PARENT_ID, ConstraintSet.LEFT); set.connect(R.id.iv_img, ConstraintSet.TOP, ConstraintSet.PARENT_ID, ConstraintSet.TOP); set.connect(R.id.iv_img, ConstraintSet.RIGHT, ConstraintSet.PARENT_ID, ConstraintSet.RIGHT); set.connect(R.id.iv_img, ConstraintSet.BOTTOM, ConstraintSet.PARENT_ID, ConstraintSet.BOTTOM); set.constrainHeight(R.id.iv_img, 0); set.constrainWidth(R.id.iv_img, 0); set.setDimensionRatio(R.id.iv_img, "W,1:1"); set.applyTo(constraintlayout); flag = false; &#125; else &#123; flag = true; normal.applyTo(constraintlayout); &#125; &#125;&#125;); è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯connectæ‰€ä¼ çš„å‚æ•°ï¼Œå†åŠ ä¸Šä¸Šä¸€ç¯‡çš„ConstraintLayoutä½¿ç”¨ç†è§£è¿™äº›ä¸œè¥¿å°±å°caseäº†ï¼Œè¿™é‡Œéœ€è¦å®šä¹‰ä¸¤ä¸ªConstraintSetæ§åˆ¶ä¸€ä¸ªæ­£å¸¸ä¸€ä¸ªæ”¾å¤§æ•ˆæœï¼Œå½“ç„¶ä½ å¯ä»¥åƒåœ¨å±æ€§åŠ¨ç”»é‚£æ ·æ·»åŠ ä¸€ä¸ªåŠ é€Ÿå™¨ã€‚ 12345// API 19æ‰ä¼šèµ·ä½œç”¨Transition changeBounds = new ChangeBounds();changeBounds.setDuration(1000);changeBounds.setInterpolator(new BounceInterpolator());TransitionManager.beginDelayedTransition(constraintlayout, changeBounds); OKï¼Œå¯¹äºè¿™äº›è¿˜æ˜¯ä¸å¤Ÿçš„ï¼Œè¿˜éœ€è¦ç»“åˆConstraintLayout.LayoutParamsæ¥æ“ä½œï¼Œå°±åƒViewGroup.LayoutParamsä¸€æ · 123params = (ConstraintLayout.LayoutParams) ivLB.getLayoutParams();params.circleRadius = params.circleRadius + number;ivLB.setLayoutParams(params); è¿™é‡Œå’Œåœ¨å¸ƒå±€ä¸­æ“ä½œåœ†å®šä½æ•ˆæœæ˜¯ä¸€æ ·layout_constraintCircle : çº¦æŸæ§ä»¶çš„id layout_constraintCircleRadius : è¯¥æ§ä»¶ä¸­å¿ƒç‚¹å’Œçº¦æŸæ§ä»¶ä¸­å¿ƒç‚¹çš„è·ç¦» layout_constraintCircleAngle : è§’åº¦ ConstraintSetå¯¹å¸ƒå±€å½±å“ConstraintSetåœ¨æ“ä½œå¸ƒå±€çš„æ—¶å€™éå¸¸ç®€å•ï¼Œåªéœ€è¦å°†ä¸€ä¸ªå¸ƒå±€ç”Ÿæˆä¸€ä¸ªSceneåœºæ™¯ï¼Œç„¶ååœºæ™¯è¿›è¡Œåœºæ™¯ä¹‹é—´çš„åˆ‡æ¢å³å¯ï¼Œæ•ˆæœï¼š 12before.clone(constraintLayout);after.clone(this, R.layout.activity_layout02_after); é€šè¿‡å¸ƒå±€åˆå§‹åŒ–ConstraintSet,å…¶ä»–æ“ä½œå’Œä¸Šé¢ä¸€æ ·å°±å¯ä»¥æ¥å›åˆ‡æ¢å¸ƒå±€äº† TransitionManagerè§£æåœ¨ä¸Šé¢çš„ä¾‹å­ä¸­éƒ½ç”¨åˆ°äº†TransitionManagerï¼Œå®˜æ–¹è§£é‡Šåˆ°è¿™ä¸ªç±»ç”¨æ¥ç®¡ç†åœºæ™¯å˜åŒ–æ‰€å¼•èµ·çš„è½¬æ¢é›†ï¼Œå…¶ä¸­è°ƒç”¨å¯¹è±¡çš„setTransition(Scene, Transition) æˆ–setTransition(Scene, Scene, Transition)ä½¿ä¸€ç§åœºæ™¯å‘å¦ä¸€ç§åœºæ™¯è¿›è¡Œè½¬åŒ–ã€‚TransitionManagerçš„è½¬åŒ–æœ‰ä¸¤ç§å½¢å¼ TransitionManager.go(scene1); transitionManager.transitionTo(scene3) åœ¨å¼€å§‹ä¹‹å‰å…ˆæ¥ä»‹ç»ä¸€ä¸‹Sceneï¼ˆåœºæ™¯ï¼‰ A scene represents the collection of values that various properties in the View hierarchy will have when the scene is applied. A Scene can be configured to automatically run a Transition when it is applied, which will animate the various property changes that take place during the scene change. è¿™ä¸ªç±»å­˜å‚¨ç€ä¸€ä¸ªæ ¹viewä¸‹çš„å„ç§viewçš„å±æ€§ã€‚é€šå¸¸ä½¿ç”¨getSceneForLayout (ViewGroup sceneRoot,int layoutId,Context context)æ¥è·å–å®ä¾‹ã€‚ 123mScene1 = Scene.getSceneForLayout(relativelayout, R.layout.transition_scene1, this);mScene2 = Scene.getSceneForLayout(relativelayout, R.layout.transition_scene2, this);mScene3 = Scene.getSceneForLayout(relativelayout, R.layout.transition_scene3, this); åœºæ™¯æœ‰äº†ï¼Œæ¥ä¸‹æ¥çš„å°±æ˜¯ä½¿ç”¨transitionManagerè¿›è¡Œè½¬åŒ–äº†ã€‚é»˜è®¤æƒ…å†µä¸‹è½¬åŒ–ä½¿ç”¨äº†autotransition,å¦‚æœå¸Œæœ›æœ‰ä¸åŒçš„è½¬æ¢è¡Œä¸ºï¼Œå¯ä»¥åœ¨ä»£ç ä¸­è¿›è¡Œè®¾ç½®,ä¹Ÿå¯ä»¥åœ¨xmlé‡Œé¢è¿›è¡Œè®¾ç½® ä»£ç è¿›è¡Œè®¾ç½® ç±»ä¼¼äºChangeBoundsç±»çš„è¿˜æœ‰ä»¥ä¸‹å‡ ç§ï¼Œä»–ä»¬éƒ½æ˜¯ç»§æ‰¿Transitonç±» ChangeBounds:è¾¹ç•Œåˆ›å»ºç§»åŠ¨å’Œç¼©æ”¾åŠ¨ç”»ChangeTransform:åˆ›å»ºç¼©æ”¾å’Œæ—‹è½¬åŠ¨ç”»ChangeClipBounds:Viewçš„å‰ªåˆ‡åŒºåŸŸsetClipBound(Rect rect)ChangeImageTransform:ImageViewçš„å°ºå¯¸åŠ¨ç”»Fade,Slide,Explode:visibilityçš„å­ç±»ï¼Œæ¸å…¥ï¼Œæ»‘åŠ¨ï¼Œçˆ†ç‚¸åŠ¨ç”»AutoTransition:TransitionManagerçš„é»˜è®¤åŠ¨ç”» å¸ƒå±€ä¸­è¿›è¡Œè®¾ç½® åœ¨XMLèµ„æºæ–‡ä»¶é‡Œé¢çš„resç›®å½•å£°æ˜ï¼ŒtransitionManageræ ‡ç­¾é‡Œé¢åŒ…å«transitionæ ‡ç­¾ï¼Œæè¿°ä»ä¸€ä¸ªåœºæ™¯åˆ°å¦ä¸€ä¸ªåœºæ™¯çš„è½¬åŒ–,ä¾‹å¦‚ï¼š 12345&lt;transitionManager xmlns:android="http://schemas.android.com/apk/res/android"&gt; &lt;transition android:fromScene="@layout/transition_scene1" android:toScene="@layout/transition_scene2" android:transition="@transition/changebounds"/&gt;&lt;/transitionManager&gt; 1234TransitionInflater inflater = TransitionInflater.from(this);transitionManager = inflater.inflateTransitionManager(R.transition.transition_mgr, relativelayout);&#125;transitionManager.transitionTo(mScene1); ä¸Šé¢çš„æƒ…å†µæ˜¯æœ‰æ˜ç¡®åœºæ™¯çš„æ—¶å€™æ¥ä½¿ç”¨ï¼Œè¿˜æœ‰ä¸€ç§å°±æ˜¯ä¿®æ”¹æ§ä»¶çš„å®½é«˜ç­‰éƒ¨åˆ†å±æ€§å€¼åˆ™ä½¿ç”¨beginDelayedTransitionï¼Œè¿™ç§å½¢å¼ä¸æ˜¯ä¸€ä¸ªçœŸæ­£çš„åœºæ™¯ï¼Œé€šè¿‡è°ƒç”¨TransitionManagerçš„beginDelayedTransitionçš„æ–¹æ³•æ¥å‘Šè¯‰TransitionManageråœ¨ä¸‹ä¸€å¸§è¿›è¡Œè¿‡æ¸¡å˜æ¢ï¼Œåœ¨APIDemoä¸­ä¹Ÿæœ‰ç›¸åº”çš„ä¾‹å­ 12345TransitionManager.beginDelayedTransition(relativelayout);setNewSize(R.id.iv_kongjian, 30, 30);setNewSize(R.id.iv_qq, 30, 30);setNewSize(R.id.iv_wechat, 30, 30);setNewSize(R.id.iv_tw, 30, 30); æ•ˆæœå’Œä¸Šé¢ç±»ä¼¼ï¼Œä¸‹é¢å°†ç»™å‡ºæºç åœ°å€ï¼Œæ„Ÿå…´è¶£txå¯ä»¥å»è¯•è¯•ã€‚https://github.com/AndLollipop/ConstraintSet]]></content>
      <categories>
        <category>æŠ€æœ¯å‘¨</category>
        <category>ç©è½¬UI</category>
      </categories>
      <tags>
        <tag>ç©è½¬UI</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Cameraä¹‹[é¢„è§ˆç±»]]]></title>
    <url>%2F2018%2F01%2F07%2F20180107_Camera%E4%B9%8B%E9%A2%84%E8%A7%88%E7%B1%BB%2F</url>
    <content type="text"><![CDATA[å‰è¨€&emsp;&emsp; åšç›¸æœºå¼€å‘å·²ç»æœ‰ä¸€å¹´äº†ï¼Œä¸€ç›´æ²¡å†™å•¥ï¼Œä¸ºå•¥å‘¢ï¼Œæ‡’ï¼ä¸è¯´äº†ï¼Œè¿˜æ˜¯å¼€å†™å§ï¼Œè¦ä¸é’±å…¨éƒ½å……å…¬äº†Îµ(â”¬â”¬ï¹â”¬â”¬)3ã€‚ SurfaceView TextureView GLSurfaceView SurfaceTextureå…ˆå¤§æ¦‚è¯´ä¸€ä¸‹ä¸Šé¢å‡ ä¸ªçœ‹ä¸Šå»éå¸¸ç±»ä¼¼çš„ç±»ä»–ä»¬çš„ä½œç”¨å’ŒåŒºåˆ« SurfaceView : SurfaceView å…·æœ‰ç‹¬ç«‹çš„ç»˜å›¾è¡¨é¢ï¼ŒZè½´ä½ç½®æ˜¯å°äºç”¨æ¥å…¶å®¿ä¸»Activityçª—å£çš„Layerçš„Zè½´ä½ç½®ï¼Œå› æ­¤SurfaceViewçš„UIå°±å¯ä»¥åœ¨ä¸€ä¸ªç‹¬ç«‹çš„çº¿ç¨‹ä¸­è¿›è¡Œç»˜åˆ¶ï¼ŒåŒæ—¶ï¼Œä¹Ÿæœ‰ä¸€ä¸ªç¼ºç‚¹å°±æ˜¯æ˜¾ç¤ºä¸å—viewå±æ€§çš„æ§åˆ¶ï¼Œå¦‚ä¸èƒ½è®¾ç½®é€æ˜åº¦ï¼Œä¸èƒ½åº”ç”¨åŠ¨ç”»ã€‚ TextureViewï¼šåŒSurfaceViewä¸€æ ·æ˜¯åœ¨å•ç‹¬çš„çº¿ç¨‹ä¸­è¿›è¡Œç»˜åˆ¶çš„ï¼Œä½†æ˜¯å…¶å°†å†…å®¹æµç›´æ¥æŠ•å½±åˆ°Viewä¸­ï¼Œä½œä¸ºView hierachyä¸­çš„ä¸€ä¸ªæ™®é€šViewï¼Œå› æ­¤å¯ä»¥æ™®é€šViewä¸€æ ·è¿›è¡Œç§»åŠ¨ï¼Œæ—‹è½¬ï¼Œç¼©æ”¾ï¼ŒåŠ¨ç”»ç­‰å˜åŒ–ï¼Œä½†æ˜¯TextureViewå¿…é¡»è¿è¡Œåœ¨å¼€å¯äº†ç¡¬ä»¶åŠ é€Ÿå™¨çš„çª—å£ï¼Œå…¶æ¶ˆè€—çš„å†…å­˜æ›´é«˜ï¼Œæ®è¯´è¿˜ä¼šæœ‰1~3å¸§çš„å»¶è¿Ÿã€‚ GLSurfaceViewï¼šå…¶ç»§æ‰¿è‡ªSurfaceViewï¼Œå®ƒå¯ä»¥çœ‹ä½œæ˜¯SurfaceViewçš„ä¸€ç§å…¸å‹ä½¿ç”¨æ¨¡å¼ã€‚åœ¨SurfaceViewçš„åŸºç¡€ä¸Šï¼Œå®ƒåŠ å…¥äº†EGLçš„ç®¡ç†ï¼Œå¹¶è‡ªå¸¦äº†æ¸²æŸ“çº¿ç¨‹ã€‚ SurfaceTextureï¼šå’Œä¸Šå‡ ä¸ªä¸åŒï¼Œä»–å¹¶ä¸æ˜¯ä¸€ä¸ªViewï¼Œä»å‘½åä¸­ä¹Ÿå¯ä»¥çœ‹å‡ºæ¥ï¼Œå®ƒæ˜¯ä¸€ä¸ªTextureï¼Œå¯ä»¥ç†è§£ä¸ºViewçš„ä¸­é—´ä»¶ï¼Œå¯ä»¥å¯¹é‡‡é›†çš„æ•°æ®è¿›è¡Œå¤„ç†ï¼Œç„¶åå†äº¤ç»™ç‰¹å®šçš„Viewæ˜¾ç¤ºã€‚ ä¸Šé¢å¤§æ¦‚ä»‹ç»äº†è¿™å‡ ä¸ªç±»çš„ç‰¹ç‚¹ï¼Œåœ¨æ¥ä¸‹æ¥ç›¸æœºå¼€å‘çš„demoä¸­é‡‡ç”¨çš„æ˜¯SurfaceViewè¿›è¡Œé¢„è§ˆã€‚å¦‚æœæƒ³æ›´æ·±å…¥çš„äº†è§£ä»¥ä¸Šå‡ ä¸ªç±»çš„åŒºåˆ«å¯ä»¥çœ‹è¿™ç¯‡æ–‡ç«  Android 5.0(Lollipop)ä¸­çš„SurfaceTextureï¼ŒTextureView, SurfaceViewå’ŒGLSurfaceView http://blog.csdn.net/jinzhuojun/article/details/44062175 SurfaceView å®ç°ç›¸æœºé¢„è§ˆä½¿ç”¨SurfaceViewå®ç°ç›¸æœºçš„é¢„è§ˆä¸»è¦æœ‰ä»¥ä¸‹å‡ æ­¥ï¼š åˆå§‹åŒ–SurfaceView,å¹¶è·å–å…¶è·å–SurfaceHolder å®ç°SurfaceHolder.Callbackï¼Œå¹¶ä¸ºSurfaceHolderè®¾ç½®Callback åœ¨SurfaceViewåˆ›å»ºä¹‹åï¼Œä¹Ÿå°±æ˜¯Callback å›è°ƒsurfaceCreated(SurfaceHolder surfaceHolder)ä¹‹åä¸ºCameraè®¾ç½®PreviewDisplayï¼Œå¹¶å¼€å§‹é¢„è§ˆ é¦–å…ˆï¼Œæˆ‘ä»¬å®ç°äº†è‡ªå·±çš„previewviewï¼Œä»¥ä¾¿ä»¥åæˆ‘ä»¬å®ç°æ¯”ä¾‹è®¾ç½®æ“ä½œ 12345678public class PreviewSurfaceView extends SurfaceView &#123; private static final String TAG = "PreviewSurfaceView"; public PreviewSurfaceView(Context context, AttributeSet attrs) &#123; super(context, attrs); getHolder().setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS); &#125;&#125; è¿™é‡Œæˆ‘ä»¬çš„æ“ä½œå¾ˆç®€å•ï¼Œåªéœ€è¦ç®€å•çš„ç»§æ‰¿SurfaceViewå®ç°å…¶æ„é€ å‡½æ•°å³å¯ï¼Œå¯¹äºå…¶holderè®¾ç½®çš„Typeï¼Œç”±äºæ²¡æœ‰æ‰¾åˆ°å®˜æ–¹çš„è§£é‡Šï¼Œå‚è€ƒå…¶ä»–åšå®¢æœ‰ä»¥ä¸‹è¯´æ³• &emsp;&emsp;SURFACE_TYPE_NORMALï¼šç”¨RAMç¼“å­˜åŸç”Ÿæ•°æ®çš„æ™®é€šSurface&emsp;&emsp;SURFACE_TYPE_HARDWAREï¼šé€‚ç”¨äºDMA(Direct memory access )å¼•æ“å’Œç¡¬ä»¶åŠ é€Ÿçš„Surface&emsp;&emsp;SURFACE_TYPE_GPUï¼šé€‚ç”¨äºGPUåŠ é€Ÿçš„Surface&emsp;&emsp;SURFACE_TYPE_PUSH_BUFFERSï¼šè¡¨æ˜è¯¥Surfaceä¸åŒ…å«åŸç”Ÿæ•°æ®ï¼ŒSurfaceç”¨åˆ°çš„æ•°æ®ç”±å…¶ä»–å¯¹è±¡æä¾›ï¼Œåœ¨Cameraå›¾åƒé¢„è§ˆä¸­å°±ä½¿ç”¨è¯¥ç±»å‹çš„Surfaceï¼Œæœ‰Cameraè´Ÿè´£æä¾›ç»™é¢„è§ˆSurfaceæ•°æ®ï¼Œè¿™æ ·å›¾åƒé¢„è§ˆä¼šæ¯”è¾ƒæµç•…ã€‚å¦‚æœè®¾ç½®è¿™ç§ç±»å‹åˆ™å°±ä¸èƒ½è°ƒç”¨lockCanvasæ¥è·å–Canvaså¯¹è±¡äº†ã€‚ æ¥ç€å®ç°ä¸€ä¸ªç›¸æœºçš„ç®¡ç†ç±»ï¼ŒæŠŠç›¸æœºçš„æ“ä½œæ”¾åˆ°æ­¤ç±»ä¸­ 1234567891011121314151617181920212223242526272829303132333435363738394041public class CameraManager &#123; private static final String TAG = "CameraManager"; private Camera mCamera; public Camera getCamera()&#123; return mCamera; &#125; public void openCamera(int cameraId)&#123; Log.d(TAG, "openCamera: cameraId = "+cameraId); mCamera = Camera.open(cameraId); &#125; public void setPreviewDisplay(SurfaceHolder holder)&#123; Log.d(TAG, "setPreviewDisplay: camera = "+mCamera); if (mCamera != null)&#123; try &#123; mCamera.setPreviewDisplay(holder); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125; &#125; public void release()&#123; Log.d(TAG, "release: camera = "+mCamera); if (mCamera != null)&#123; mCamera.stopPreview(); mCamera.release(); mCamera = null; &#125; &#125; public void startPreview()&#123; Log.d(TAG, "startPreview: camera = "+mCamera); if (mCamera != null)&#123; mCamera.startPreview(); mCamera.setDisplayOrientation(90); &#125; &#125;&#125; åœ¨startPreviewä¸­ï¼Œæˆ‘ä»¬è®¾ç½®äº†mCamera.setDisplayOrientation(90)ï¼Œå¦åˆ™ä½ çœ‹åˆ°çš„å›¾å½¢å°±æ˜¯è¿™æ ·çš„ è¿™æ˜¯ç”±äºå±å¹•çš„æ–¹å‘å’Œç›¸æœºçš„å›¾å½¢ä¼ æ„Ÿå™¨æ–¹å‘ä¸ä¸€è‡´å¯¼è‡´çš„ï¼Œè¿™ä¸ªé—®é¢˜ä¼šåœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­åŠ ä»¥è§£é‡Š ç°åœ¨æˆ‘ä»¬åœ¨MainActivity ä¸­å¼€å¯ç›¸æœºå¹¶å¯åŠ¨é¢„è§ˆ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112public class MainActivity extends AppCompatActivity implements SurfaceHolder.Callback&#123; private static final String TAG = "MainActivity"; private CameraOP mCameraOp; private PerssionManager mPerssionManager; private PreviewSurfaceView mSurfaceView; private RelativeLayout mRoot; @Override protected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.activity_main); initView(); CameraManager manager = new CameraManager(); mCameraOp = new CameraOP(manager); mPerssionManager = new PerssionManager(); if (mPerssionManager.requesePerssion(this))&#123; mCameraOp.openCamera(); initSurfaceView(); &#125; &#125; @Override protected void onResume() &#123; super.onResume(); Log.d(TAG, "onResume: camera = "+mCameraOp.getCamera()); if(mPerssionManager.isCameraPerssionReady(this) &amp;&amp; mCameraOp.getCamera() == null)&#123; mCameraOp.openCamera(); initSurfaceView(); &#125; &#125; private void initView()&#123; mRoot = (RelativeLayout) findViewById(R.id.root); &#125; private void initSurfaceView()&#123; Log.d(TAG, "initSurfaceView: mSurfaceView = "+mSurfaceView); if (mSurfaceView == null)&#123; LayoutInflater inflater = LayoutInflater.from(this); View view = inflater.inflate(R.layout.camera_preview_layout,null); mSurfaceView = view.findViewById(R.id.camera_preview); SurfaceHolder holder = mSurfaceView.getHolder(); holder.addCallback(this); mRoot.addView(view); &#125; mSurfaceView.setVisibility(View.VISIBLE); &#125; @Override public void surfaceCreated(SurfaceHolder surfaceHolder) &#123; Log.d(TAG, "surfaceCreated: "); mCameraOp.setPreviewDisplay(surfaceHolder); mCameraOp.startPreview(); &#125; @Override public void surfaceChanged(SurfaceHolder surfaceHolder, int i, int i1, int i2) &#123; Log.d(TAG, "surfaceChanged: "); &#125; @Override public void surfaceDestroyed(SurfaceHolder surfaceHolder) &#123; Log.d(TAG, "surfaceDestroyed: "); mCameraOp.releaseCamera(); &#125; @Override protected void onPause() &#123; super.onPause(); Log.d(TAG, "onPause: "); mCameraOp.releaseCamera(); mSurfaceView.setVisibility(View.GONE); &#125; public class CameraOP&#123; CameraManager mCameraManager; public Camera getCamera()&#123; return mCameraManager.getCamera(); &#125; public void openCamera(int id)&#123; mCameraManager.openCamera(id); &#125; public void openCamera()&#123; openCamera(0); &#125; public CameraOP(CameraManager manager) &#123; this.mCameraManager = manager; &#125; public void setPreviewDisplay(SurfaceHolder holder)&#123; mCameraManager.setPreviewDisplay(holder); &#125; public void startPreview()&#123; mCameraManager.startPreview(); &#125; public void releaseCamera()&#123; mCameraManager.release(); &#125; &#125;&#125; æ³¨æ„ï¼šç›¸æœºçš„é¢„è§ˆå¿…é¡»åœ¨surfaceChangedä¹‹åå¼€å§‹ï¼Œå¹¶åœ¨surfaceDestroyedæ—¶ç»“æŸé¢„è§ˆå¹¶é‡Šæ”¾ç›¸æœºèµ„æºï¼Œç›¸æœºèµ„æºä¸é‡Šæ”¾ä¼šå¯¼è‡´å…¶è°ƒç”¨ç›¸æœºèµ„æºé¢åº”ç”¨æ— æ³•æ­£å¸¸æ‰“å¼€ åœ¨ä»£ç ä¸­æœ‰å…³äºæƒé™çš„æ“ä½œ mPerssionManager.requesePerssion(this)mPerssionManager.isCameraPerssionReady(this) è¿™æ˜¯ç”±äºå®‰å“6.0ä»¥åæƒé™ä¸ä»…è¦æ·»åŠ åœ¨Mainfestæ–‡ä»¶ä¸­ï¼Œè¿˜è¦åœ¨ä½¿ç”¨çš„æ—¶å€™è¿›è¡Œç”³è¯·ï¼Œå…³äºæƒé™çš„å¯ä»¥æŸ¥çœ‹è¿™ç¯‡æ–‡ç« ï¼Œå†™çš„å¾ˆæ¸…æ¥šï¼š Android 6.0 è¿è¡Œæ—¶æƒé™ç®¡ç†æœ€ä½³å®è·µ http://blog.csdn.net/yanzhenjie1003/article/details/52503533/ ä»¥ä¸Šä»£ç å°±å¯ä»¥å®ç°ç›¸æœºçš„åŸºæœ¬é¢„è§ˆåŠŸèƒ½äº†ï¼Œæ•ˆæœå¦‚ä¸‹ æ­¤é¡¹ç›®ä¸‹è½½åœ°å€ï¼šhttps://github.com/AndLollipop/huahua_Camera ä½†æ˜¯æˆ‘ä»¬ä¼šå‘ç°ç•Œé¢è¢«æ‹‰ä¼¸äº†ï¼Œåœ¨æ¥ä¸‹æ¥çš„æ–‡ç« ä¸­æˆ‘ä»¬ä¼šä»‹ç»å¦‚ä½•é€‚é…å°ºå¯¸ä»¥åŠç›¸æœºé¢„è§ˆæ–¹å‘çš„é—®é¢˜ã€‚(â”­â”®ï¹â”­â”® 15å¤§æ´‹æ²¡äº†)]]></content>
      <categories>
        <category>æŠ€æœ¯å‘¨</category>
        <category>Cameraå¼€å‘</category>
      </categories>
      <tags>
        <tag>Cameraå¼€å‘</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä¸ä¸ºäººçŸ¥çš„ConstraintLayoutå®Œå…¨è§£æ]]></title>
    <url>%2F2018%2F01%2F04%2F20180104_ConstraintLayout%E5%AE%8C%E5%85%A8%E8%A7%A3%E6%9E%90%2F</url>
    <content type="text"><![CDATA[å‰è¨€&emsp;&emsp;Constraintlayoutè¿™ä¸ªæ§ä»¶å‡ºæ¥ä¹Ÿæœ‰ä¸€æ®µæ—¶é—´äº†ï¼Œä»ä¹‹å‰åªæ˜¯ç®€å•çš„ä½¿ç”¨ï¼Œåˆ°ç°åœ¨ç®—æ˜¯æœ‰è‡ªå·±çš„ç†è§£ã€‚ConstraintLayouté¡¾åæ€ä¹‰çº¦æŸå¸ƒå±€ï¼Œä¸»è¦çš„åŠŸèƒ½å°±æ˜¯ç”¨æ¥çº¦æŸå­æ§ä»¶è¡Œä¸ºï¼Œç±»ä¼¼RelativeLayoutæ§ä»¶ä½†æ›´ä¼˜äºå®ƒï¼Œç½‘ä¸Šå¤§å¤šæ¨èä½¿ç”¨é¢„è§ˆç•Œé¢è¿›è¡Œæ“ä½œï¼Œå½“ç„¶æˆ‘ä¹Ÿä¸æ’æ–¥ï¼Œä½†æ˜¯å·¥å…·æ°¸è¿œéƒ½æ˜¯ç”¨æ¥ç”¨çš„ï¼Œæˆ‘ä»¬åº”è¯¥çŸ¥å…¶ç„¶åˆçŸ¥å…¶æ‰€ä»¥ç„¶ã€‚ åœ¨å¼€å§‹ä¹‹å‰æœ‰å¿…è¦åˆ†äº«ä¸€ä¸‹è‡ªå·±æ‰€ç¿»é˜…çš„èµ„æ–™ éƒ­éœ–å¤§ç¥å¯è§†åŒ–æ“ä½œ http://blog.csdn.net/guolin_blog/article/details/53122387 å®˜æ–¹å¯è§†åŒ–æ“ä½œ https://developer.android.com/training/constraint-layout/index.html å®˜æ–¹ConstraintLayoutæ–‡æ¡£ https://developer.android.com/reference/android/support/constraint/ConstraintLayout.html ConstraintLayoutçš„ä½¿ç”¨&emsp;&emsp;ä»¥å‰æˆ‘ä»¬åœ¨å†™å¸ƒå±€éƒ½è¦åµŒå¥—å¥½å¤šå±‚å…ˆä¸è¯´åšæ•²ç€æœ‰æ²¡æœ‰åŠ²ï¼Œå°±è¯´æ€§èƒ½ä¸Šä¹Ÿä¼šå› ä¸ºåµŒå¥—å±‚æ•°è¿‡å¤šå¯¼è‡´æ€§èƒ½ä½ä¸‹ï¼Œé’ˆå¯¹è¿™æ ·çš„é—®é¢˜å’Œåˆè¡·æ‰æœ‰äº†å­¦ä¹ ConstraintLayoutçš„å¿…è¦ã€‚ &emsp;&emsp;æœ¬æ–‡æˆ‘ä»¬å°†ä»ConstraintLayoutçš„ä½¿ç”¨ã€Barrierçš„ä½¿ç”¨ã€Guidelineçš„ä½¿ç”¨ã€Placeholderçš„ä½¿ç”¨ã€Groupçš„ä½¿ç”¨æ¥æ­å¼€ConstraintLayoutç¥ç§˜çš„é¢çº±ï¼ŒOKï¼Œå¼€å§‹æˆ‘ä»¬çš„å­¦ä¹ ä¹‹æ—… ç¯å¢ƒæ­å»º&emsp;&emsp;åœ¨å¼€å§‹ä¹‹å‰æˆ‘ä»¬éœ€è¦ä¾èµ–ConstraintLayoutåº“ 123dependencies &#123; implementation 'com.android.support.constraint:constraint-layout:1.1.0-beta3'&#125; &emsp;&emsp;ä¸çŸ¥é“è¦ä¾èµ–é‚£ä¸ªç‰ˆæœ¬çš„txå¯ä»¥æŸ¥çœ‹Googleblogï¼Œæœ€å¥½å¼•ç”¨æœ€æ–°çš„åº“ï¼Œä¸ç„¶æœ‰ä¸€äº›åŠŸèƒ½å°†æ— æ³•ä½¿ç”¨ï¼Œå…·ä½“å“ªäº›åŠŸèƒ½çœ‹å®˜ç½‘ https://androidstudio.googleblog.com/2017/10/constraintlayout-110-beta-3-is-now.html &emsp;&emsp;å¯¹äºConstraintLayoutï¼Œå®˜æ–¹æ–‡æ¡£ä¸­ä¹Ÿé€šè¿‡å‡ ä¸ªæ–¹é¢æ¥è¿›è¡Œäº†è®²è§£ï¼Œå¯èƒ½æ˜¯å› ä¸ºè‹±æ–‡çš„åŸå› åŠ ä¸Šå®˜ç½‘ä¾‹å­å¾ˆå°‘å¯¼è‡´å¾ˆéš¾å»ç†è§£è¿™äº›çŸ¥è¯†ç‚¹ï¼Œæœ¬æ–‡å°†å’Œå®˜æ–¹æ–‡æ¡£è®²è§£æ€è·¯ä¸€è‡´å¯¹å…¶è¿›è¡Œé¡ºåºè®²è§£ï¼Œå¥½äº†ï¼Œå†™äº†è¿™ä¹ˆå¤šæ–‡å­—ä¸æ¥ä¸ªå›¾ç¡®å®å§”å±ˆäº†è¿™ä¹ˆé«˜å¤§ä¸Šçš„æ–‡ç«  &emsp;&emsp;å¯èƒ½å¤§å®¶æƒ³çŸ¥é“å­¦äº†è¿™ä¸ªèƒ½åšå‡ºä»€ä¹ˆï¼Œè¿™é‡Œå¯ä»¥å‘Šè¯‰ä½ çš„æ˜¯å­¦äº†ä¹‹åå¯ä»¥ä½¿ç”¨ä¸€å±‚å¸ƒå±€å†™å‡ºä¸Šé¢çš„æ•ˆæœå¹¶ä¸”å¯ä»¥ä½¿ç”¨ä¸€å±‚å¸ƒå±€åšå‡ºæ›´åŠ å¤æ‚çš„æ•ˆæœã€‚ ç›¸å¯¹å®šä½ï¼ˆRelativeLayout Positionï¼‰&emsp;&emsp;ç›¸å¯¹å®šä½æ˜¯ä¸€ä¸ªConstraintLayoutå¸ƒå±€çš„åŸºæœ¬å½¢æ€,è¿™äº›çº¦æŸå…è®¸æ‚¨å®šä½ç»™å®šçš„æ§ä»¶ç›¸å¯¹äºå¦ä¸€ä¸ªæ§ä»¶ã€‚è¯¥çº¦æŸå¯ä»¥æ˜¯æ°´å¹³è½´/å‚ç›´è½´,å…·ä½“çš„å†™æ³• 12345678&lt;Button android:id="@+id/button02" android:layout_width="120dp" android:layout_height="180dp" android:text="button02" app:layout_constraintBaseline_toBaselineOf="@id/button01" app:layout_constraintLeft_toRightOf="@id/button01" app:layout_constraintRight_toRightOf="parent"/&gt; &emsp;&emsp;layout_constraintLeft_toLeftOf æ„å‘³ç€å½“å‰æ§ä»¶çš„å·¦ä¾§å’ŒæŸä¸ªæ§ä»¶çš„å·¦ä¾§å¯¹é½è¿™é‡Œä¹Ÿæä¸€ä¸‹å¦‚æœä½ ä½¿ç”¨æ‹–æ‹½æ–¹å¼å°†ä¼šåœ¨ç”Ÿæˆtools:layout_editor_absoluteYä»£ç ï¼Œè¿™ä»£ç åªæ˜¯åœ¨å¯è§†åŒ–ç•Œé¢é‡Œé¢æœ‰æ•ˆæœ å¤–è¾¹è· (Margins)&emsp;&emsp;åœ¨å¤–è¾¹è·ConstraintLayoutæä¾›äº†å½“çº¦æŸæ§ä»¶goneæ‰ä¹‹åæ‰€è®¾ç½®çš„marginï¼Œä¹‹æ‰€ä»¥æœ‰è¿™ä¸ªå±æ€§çš„å­˜åœ¨å¤§æ¦‚Googleä¹Ÿæ˜¯è€ƒè™‘åœ¨goneæ‰ä¸€ä¸ªæ§ä»¶çš„æ—¶å€™ä¸æƒ³ç ´åæ‰å…¶å¸ƒå±€ç»“æ„ï¼Œæ¥çœ‹ç”¨æ³• layout_goneMarginStart layout_goneMarginEnd layout_goneMarginLeft layout_goneMarginTop layout_goneMarginRight layout_goneMarginBottom &emsp;&emsp;goneæ‰çš„æ§ä»¶ä¼šè¢«è§£ææˆä¸€ä¸ªç‚¹ï¼Œå¹¶å¿½ç•¥marginï¼Œå½“ä½ ä¸ºå…¶è®¾ç½®äº†çº¦æŸä¹Ÿè¿˜æ˜¯ä¼šèµ·ä½œç”¨ï¼Œç»å¸¸é…åˆapp:layout_goneMargin(åœ¨æ‰€çº¦æŸæ§ä»¶goneæ‰æ‰èµ·ä½œç”¨)æ¥ä½¿ç”¨ 123456789101112131415&lt;android.support.constraint.ConstraintLayout&gt; &lt;Button android:id="@+id/button01" android:layout_width="100dp" android:layout_height="60dp" android:text="button01" /&gt; &lt;Button android:id="@+id/button02" android:layout_width="120dp" android:layout_height="100dp" android:layout_marginLeft="10dp" android:text="æ¶ˆå¤±button01" app:layout_constraintLeft_toRightOf="@id/button01" app:layout_goneMarginLeft="110dp" /&gt;&lt;/android.support.constraint.ConstraintLayout&gt; &emsp;&emsp;éœ€è¦æ³¨æ„çš„æ˜¯è¿™é‡Œçš„goneMarginLeftçš„å€¼æ˜¯è‡ªèº«MarginLeft+Goneæ‰Buttonçš„å®½åº¦+Goneæ‰Buttonçš„Margin ä¸­å¿ƒä½ç½® (center position)&emsp;&emsp;åœ¨ConstraintLayoutä¸­å¦‚æœæƒ³è®©å­æ§ä»¶å±…ä¸­,åœ¨å®˜æ–¹æ–‡æ¡£ä¸­ç§°ä¹‹ä¸ºä¸å¯èƒ½å‘ç”Ÿï¼Œé€šè¿‡çœ‹å®˜æ–¹çš„å›¾æˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºå°±å¥½åƒä¸€ä¸ªæ§ä»¶å·¦å³ä¸¤è¾¹åŒæ—¶ç”¨åŒæ ·çš„åŠ›è‡´ä½¿æ§ä»¶å±…ä¸­æ˜¾ç¤º,å°±åƒä¸‹å›¾æ‰€å±•ç¤ºçš„é‚£æ · å…·ä½“æ“ä½œ1234567&lt;Button android:id="@+id/button01" android:layout_width="100dp" android:layout_height="60dp" android:text="button01" app:layout_constraintLeft_toLeftOf="parent" app:layout_constraintRight_toRightOf="parent" /&gt; &emsp;&emsp;è¿™æ ·ç†è§£å¯èƒ½æ›´åŠ æ·±åˆ»ä¸€ç‚¹ï¼Œå½“ç„¶ä¹‹æ‰€ä»¥è¿™ä¹ˆå»ç†è§£æ˜¯å› ä¸ºå®˜æ–¹åˆç»™äº†å«åå‘çš„å±æ€§bias(éœ€è¦ç»“åˆçº¦æŸæ¥ä½¿ç”¨)ï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯ç”¨æ¥ä½¿çº¦æŸæ›´åå‘äºå“ªä¸€è¾¹ï¼Œé»˜è®¤æ˜¯0.5 layout_constraintHorizontal_bias (0æœ€å·¦è¾¹ 1æœ€å³è¾¹) layout_constraintVertical_bias (0æœ€ä¸Šè¾¹ 1 æœ€åº•è¾¹) ä¾‹å¦‚å®šä¹‰horizontal 0.9 åˆ™ä¼šåœ¨æ°´å¹³æ–¹å‘ä¸Šå‘å³åç§»è‡³90% åœ†å®šä½ (Circular Position)&emsp;&emsp;å¯¹äºè¿™ä¸ªä¹Ÿæ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œè¿™é‡Œä¹Ÿæ¥ä¸€å¼ å®˜æ–¹å›¾ï¼Œé€šè¿‡çœ‹å®˜æ–¹å›¾ä¹Ÿå°±çŸ¥é“ä½¿ç”¨ä¹‹åçš„æ•ˆæœå•¦~ å¯¹äºè¿™å¼ å›¾æˆ‘ä»¬éœ€è¦å»ç†è§£ä¸‰ä¸ªå±æ€§ layout_constraintCircle : çº¦æŸæ§ä»¶çš„id layout_constraintCircleRadius : è¯¥æ§ä»¶ä¸­å¿ƒç‚¹å’Œçº¦æŸæ§ä»¶ä¸­å¿ƒç‚¹çš„è·ç¦» layout_constraintCircleAngle : è§’åº¦ è¿™å¼ å›¾å°±éœ€è¦ç†è§£ä¸€ä¸‹é€šè¿‡è®¾ç½®ä¹‹åæœ‰ä»€ä¹ˆæ ·çš„æ•ˆæœæ˜¾ç¤ºå°±å¯ä»¥äº† å°ºå¯¸çº¦æŸ (dimensions constraints)åœ¨ConstraintLayoutå¸ƒå±€é‡Œä¸ºæ§ä»¶è®¾ç½®å®½é«˜æä¾›äº†ä¸‰ç§æ–¹å¼ ç¡®å®šå°ºå¯¸ 12dp WRAP_CONTENT 0dpï¼Œå°±ç­‰äºMATCH_CONSTRAINT &emsp;&emsp;å”¯ä¸€ä¸åŒçš„æ˜¯MATCH_CONSTRAINT,åœ¨Googleæ–‡æ¡£ä¸­è¯´æ˜å¯¹äºåŒ…å«åœ¨ConstraintLayoutä¸­çš„æ§ä»¶ï¼Œä¸å»ºè®®ä½¿ç”¨MATCH_PARENTã€‚å¯¹äºä½¿ç”¨äº†MATCH_CONSTRAINTçš„æ§ä»¶å°†ä½¿è¯¥æ§ä»¶å’Œçº¦æŸæ§ä»¶çš„å®½é«˜ä¸€è‡´ï¼Œå¦‚æœä¸ºå…¶è®¾ç½®äº†marginå±æ€§åœ¨è®¡ç®—çš„æ—¶å€™ä¹Ÿè€ƒè™‘åœ¨å†… 1234567891011121314151617&lt;android.support.constraint.ConstraintLayout&gt; &lt;Button android:id="@+id/button01" android:layout_width="200dp" android:layout_height="90dp" android:text="button01" /&gt; &lt;Button android:id="@+id/button02" android:layout_width="0dp" android:layout_height="wrap_content" android:layout_marginLeft="20dp" android:layout_marginRight="20dp" android:text="Button02" app:layout_constraintLeft_toLeftOf="parent" app:layout_constraintRight_toRightOf="parent" app:layout_constraintTop_toBottomOf="@id/button01" /&gt;&lt;/android.support.constraint.ConstraintLayout&gt; ç»™ä¸ªæ•ˆæœä½“ä¼šä¸€ä¸‹ï¼š ä¸MATCH_CONSTRAINTä¸€èµ·ä½¿ç”¨çš„è¿˜æœ‰ratioæ¯”ä¾‹,å®ƒä»£è¡¨è¿™è‡ªèº«å®½é«˜æ¯”ä¾‹ã€‚æœ‰ä¸¤ç§å–å€¼ï¼š æµ®ç‚¹å€¼ï¼Œè¡¨ç¤ºå®½åº¦å’Œé«˜åº¦ä¹‹é—´çš„æ¯”ç‡ ï¼ˆ2,0.5ï¼‰ width:heightå½¢å¼çš„æ¯”ä¾‹ ï¼ˆ5:1,1:5ï¼‰ &emsp;&emsp;å½“æœ‰ä¸€ä¸ªç»´åº¦è®¾ç½®ä¸ºMATCH_CONSTRAINTï¼ˆ0dpï¼‰æ—¶ï¼Œå°±å¯ä»¥æ ¹æ®æ¯”ç‡æ¥è¿›è¡Œè®¡ç®—,å¦‚æœä¸¤ä¸ªç»´åº¦å‡è®¾ç½®ä¸ºMATCH_CONSTRAINTï¼ˆ0dpï¼‰ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œç³»ç»Ÿä¼šä½¿ç”¨æ»¡è¶³æ‰€æœ‰çº¦æŸæ¡ä»¶å’Œæ¯”ç‡çš„æœ€å¤§å°ºå¯¸ï¼Œå¦‚æœéœ€è¦æ ¹æ®ä¸€ä¸ªç»´åº¦çš„å°ºå¯¸å»çº¦æŸå¦ä¸€ä¸ªç»´åº¦çš„å°ºå¯¸åˆ™å¯ä»¥åœ¨æ¯”çš„å‰é¢åŠ ä¸ŠWæˆ–è€…Hæ¥çº¦æŸå®½é«˜ï¼Œç”¨é€—å·éš”å¼€ 1234567891011121314151617&lt;android.support.constraint.ConstraintLayout&gt;&lt;Button android:id="@+id/button03" android:layout_width="0dp" android:layout_height="100dp" android:text="Button02" app:layout_constraintDimensionRatio="1:1" /&gt;&lt;Button android:id="@+id/button4" android:layout_width="0dp" android:layout_height="0dp" android:layout_marginTop="100dp" android:text="button4" app:layout_constraintBottom_toBottomOf="parent" app:layout_constraintDimensionRatio="H,2:1" app:layout_constraintTop_toBottomOf="@id/button03" /&gt;&lt;/android.support.constraint.ConstraintLayout&gt; &emsp;&emsp;è¿™é‡Œç”¨â€œHâ€è¡¨ç¤ºä»¥é«˜åº¦ä¸ºçº¦æŸï¼Œé«˜åº¦çš„æœ€å¤§å°ºå¯¸å°±æ˜¯çˆ¶æ§ä»¶çš„é«˜åº¦ï¼Œâ€œ2:1â€è¡¨ç¤ºé«˜ï¼šå®½ = 2 : 1.åˆ™å®½åº¦ä¸ºé«˜åº¦çš„ä¸€åŠ é“¾ (Chains)&emsp;&emsp;å¦‚ä½•åˆ›å»ºä¸€ä¸ªé“¾å‘¢ï¼Œåªéœ€è¦ä¸€ç»„æ§ä»¶é€šè¿‡åŒå‘é“¾æ¥åœ¨ä¸€èµ·å°±æ„æˆäº†ä¸€ä¸ªé“¾ï¼Œå®˜æ–¹ä¹Ÿç»™å‡ºäº†å›¾å½¢ï¼Œè¿™é‡Œä¹Ÿå¼•ç”¨ä¸€ä¸‹ä¾¿äºç†è§£ è¿™ä¼¼ä¹å¹¶æ— åµç”¨ï¼Œç„¶è€Œé‡ç‚¹æ˜¯é“¾çš„æ ·å¼ &emsp;&emsp;è¿™çœ‹èµ·æ¥ä¼¼ä¹å’Œrnçš„flexå¸ƒå±€ç±»ä¼¼ï¼Œå¦‚æœä½ è¦æ˜¯å­¦è¿‡rnçš„è¯å¯¹äºé“¾ä¼šæœ‰æ›´å¥½çš„ç†è§£ï¼Œä¸‹é¢æ¥å¯¹æ¯ä¸ªæ ·å¼è¿›è¡Œè¯´æ˜ spread - å…ƒç´ å°†è¢«å±•å¼€ï¼ˆé»˜è®¤æ ·å¼ï¼‰ åŠ æƒé“¾ - åœ¨spreadæ¨¡å¼ä¸‹ï¼Œå¦‚æœæŸäº›å°éƒ¨ä»¶è®¾ç½®ä¸ºMATCH_CONSTRAINTï¼Œåˆ™å®ƒä»¬å°†æ‹†åˆ†å¯ç”¨ç©ºé—´ spread_inside - ç±»ä¼¼ï¼Œä½†é“¾çš„ç«¯ç‚¹å°†ä¸ä¼šæ‰©å±• packed - é“¾çš„å…ƒç´ å°†è¢«æ‰“åŒ…åœ¨ä¸€èµ·ã€‚ å­©å­çš„æ°´å¹³æˆ–å‚ç›´åå·®å±æ€§å°†å½±å“åŒ…è£…å…ƒç´ çš„å®šä½ å¯¹äºä½¿ç”¨è¯¥çŸ¥è¯†ç‚¹çš„åœ°æ–¹å¸¸è§çš„å°±æ˜¯åº•éƒ¨çš„TABå¹³åˆ†å±å¹•,ç»™ä¸ªä»£ç ä½“ä¼šä¸€ä¸‹12345678910111213141516171819202122232425&lt;Button android:id="@+id/button01" android:layout_width="100dp" android:layout_height="wrap_content" android:text="button01" app:layout_constraintHorizontal_chainStyle="spread" app:layout_constraintLeft_toLeftOf="parent" app:layout_constraintRight_toLeftOf="@id/button02" app:layout_constraintHorizontal_bias="1.0"/&gt;&lt;Button android:id="@+id/button02" android:layout_width="100dp" android:layout_height="wrap_content" android:text="button02" app:layout_constraintLeft_toRightOf="@id/button01" app:layout_constraintRight_toLeftOf="@id/button03" /&gt;&lt;Button android:id="@+id/button03" android:layout_width="100dp" android:layout_height="wrap_content" android:text="button02" app:layout_constraintLeft_toRightOf="@id/button02" app:layout_constraintRight_toRightOf="parent" /&gt; Barrierã€Guidelineçš„ä½¿ç”¨&emsp;&emsp;ä¸ºä»€ä¹ˆè¦æ”¾åœ¨ä¸€èµ·æ¥è¿›è¡Œè®²è§£å‘¢ï¼Ÿå› ä¸ºBarrierå’ŒGuidelineéƒ½æ˜¯è™šæ‹Ÿè§†å›¾ï¼Œæ›´é‡è¦çš„æ˜¯éƒ½æ˜¯ç”¨æ¥è¿›è¡Œçº¦æŸæ§ä»¶ã€‚å½“ç„¶ä¹Ÿæœ‰ä¸åŒä¹‹å¤„ï¼š Barrieræ˜¯æœ‰å¤šä¸ªViewçš„å¤§å°æ¥å†³å®šçš„ï¼Œé€šè¿‡constraint_referenced_ids ç”¨æ¥æŒ‡å®šå“ªäº›Viewæ¥è¿›è¡Œçº¦æŸï¼ŒbarrierDirection ç”¨æ¥Barrierç›¸å¯¹äºçº¦æŸViewçš„æ–¹å‘ Guidelinåœ¨å¸ƒå±€é‡Œé¢å……å½“è¾…åŠ©çº¿ï¼Œandroid:orientation å†³å®šçº¿çš„æ–¹å‘æ˜¯æ°´å¹³è¿˜æ˜¯ç«–ç›´æ–¹å‘,å…¶å®ƒçš„å±æ€§ layout_constraintGuide_begin layout_constraintGuide_end layout_constraintGuide_percent å½“orientationä¸ºæ°´å¹³çš„æ—¶å€™ begin=100dp ä¸ºè·ç¦»é¡¶éƒ¨100dpæœ‰ä¸ªè¾…åŠ©çº¿ end=100dp ä¸ºè·ç¦»åº•éƒ¨100dpæœ‰ä¸ªè¾…åŠ©çº¿ percent=0.8 ä¸ºè·ç¦»é¡¶éƒ¨80%æœ‰ä¸ªè¾…åŠ©çº¿ å¥½äº†ï¼Œä¸€å›¾èƒœåƒè¨€ï¼Œè®©æˆ‘ä»¬åœ¨æä¸€ä¸ªImageViewä½ç½®åœ¨å³ä¸‹è§’ç±»ä¼¼FloatActionBarçš„æ•ˆæœ123456789101112131415161718192021222324&lt;android.support.constraint.ConstraintLayout&gt; &lt;android.support.constraint.Guideline android:id="@+id/vertical_guideline" android:layout_width="wrap_content" android:layout_height="wrap_content" android:orientation="vertical" app:layout_constraintGuide_percent="0.8" /&gt; &lt;android.support.constraint.Guideline android:id="@+id/horizontal_guideline" android:layout_width="wrap_content" android:layout_height="wrap_content" android:orientation="horizontal" app:layout_constraintGuide_percent="0.8" /&gt; &lt;ImageView android:layout_width="wrap_content" android:layout_height="wrap_content" android:src="@mipmap/ic_launcher_round" app:layout_constraintLeft_toRightOf="@id/vertical_guideline" app:layout_constraintTop_toBottomOf="@id/horizontal_guideline" /&gt;&lt;/android.support.constraint.ConstraintLayout&gt; Placeholderçš„ä½¿ç”¨&emsp;&emsp;Placeholderé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯ç”¨æ¥ä¸€ä¸ªå ä½çš„ä¸œè¥¿ï¼Œå®ƒå¯ä»¥æŠŠè‡ªå·±çš„å†…å®¹è®¾ç½®ä¸ºConstraintLayoutå†…çš„å…¶å®ƒviewã€‚å› æ­¤å®ƒç”¨æ¥å†™å¸ƒå±€çš„æ¨¡ç‰ˆï¼Œä¹Ÿå¯ä»¥ç”¨æ¥åŠ¨æ€ä¿®æ”¹UIçš„å†…å®¹ã€‚ &emsp;&emsp;æ¯ä¸ªPlaceHolderéƒ½è®¾ç½®äº†è‡ªå·±çš„app:contentå±æ€§ï¼Œæ¯”å¦‚app:content=â€@+id/editâ€ï¼Œè¡¨ç¤ºç”¨idä¸ºeditçš„æ§ä»¶æ¥å¡«å……è¿™ä¸ªä½ç½®ï¼ŒOKï¼Œé€šè¿‡ä¸‹é¢çš„ä»£ç ç†Ÿæ‚‰ä¸€ä¸‹123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051&lt;android.support.constraint.ConstraintLayout&gt; &lt;android.support.constraint.Placeholder android:id="@+id/placeholder_action" android:layout_width="wrap_content" android:layout_height="wrap_content" app:content="@+id/kongjian" app:layout_constraintBottom_toBottomOf="parent" app:layout_constraintLeft_toLeftOf="parent" app:layout_constraintRight_toRightOf="parent" app:layout_constraintTop_toTopOf="parent" /&gt; &lt;ImageView android:id="@+id/kongjian" android:layout_width="wrap_content" android:layout_height="wrap_content" android:src="@mipmap/share_kongjian" app:layout_constraintBottom_toBottomOf="parent" app:layout_constraintLeft_toLeftOf="parent" app:layout_constraintRight_toLeftOf="@id/qq" /&gt; &lt;ImageView android:id="@+id/qq" android:layout_width="wrap_content" android:layout_height="wrap_content" android:src="@mipmap/share_qq" app:layout_constraintBottom_toBottomOf="parent" app:layout_constraintHorizontal_bias="0.5" app:layout_constraintLeft_toRightOf="@id/kongjian" app:layout_constraintRight_toLeftOf="@id/tw" /&gt; &lt;ImageView android:id="@+id/tw" android:layout_width="wrap_content" android:layout_height="wrap_content" android:src="@mipmap/share_tw" app:layout_constraintBottom_toBottomOf="parent" app:layout_constraintHorizontal_bias="0.5" app:layout_constraintLeft_toRightOf="@id/qq" app:layout_constraintRight_toLeftOf="@id/wechat" /&gt; &lt;ImageView android:id="@+id/wechat" android:layout_width="wrap_content" android:layout_height="wrap_content" android:src="@mipmap/share_wechat" app:layout_constraintBottom_toBottomOf="parent" app:layout_constraintHorizontal_bias="0.5" app:layout_constraintLeft_toRightOf="@id/tw" app:layout_constraintRight_toRightOf="parent" /&gt;&lt;/android.support.constraint.ConstraintLayout&gt; 12345678constraintLayout = findViewById(R.id.constraintLayout);findViewById(R.id.kongjian).setOnClickListener(new View.OnClickListener() &#123; @Override public void onClick(View v) &#123; TransitionManager.beginDelayedTransition(constraintLayout); placeholder_action.setContentId(v.getId()); &#125;&#125;); &emsp;&emsp;å¦å¤–æ³¨æ„ä¸€ä¸‹ï¼Œæˆ‘ä»¬åœ¨å®é™…å¼€å‘ä¸­å¯èƒ½ä¼šå°†ä½¿ç”¨placeholderçš„æ¨¡æ¿å•ç‹¬æ‹¿å‡ºæ¥ï¼Œä½†æ˜¯æ‹¿å‡ºæ¥ä¹‹åå°±æ²¡æœ‰äº†æç¤ºï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨tools:parentTag=â€android.support.constraint.ConstraintLayoutâ€ï¼Œè¿™æ ·åœ¨ç¼–è¾‘çš„æ—¶å€™å°±ä¼šè®©å®ƒæŒ‰ç…§ConstraintLayoutæ¥å¤„ç†ã€‚ Groupçš„ä½¿ç”¨&emsp;&emsp;è¯¥ç»„ä»¶çš„å¯è§æ€§å°†åº”ç”¨äºæ‰€å¼•ç”¨çš„æ§ä»¶ï¼Œè¿™æ˜¯ä¸€ç§ä¾¿åˆ©çš„æ–¹æ³•ï¼Œå¯ä»¥è½»æ¾çš„éšè—ä¸€ç»„çª—å£éƒ¨ä»¶è€Œæ— éœ€ä»¥ç¼–ç¨‹æ–¹å¼ç»´æŠ¤è¯¥é›†åˆï¼Œå¯¹äºGroupçš„ä½¿ç”¨æ¯”è¾ƒç®€å•ï¼Œè¿™é‡Œç»™å‡ºç›¸åº”çš„ä½¿ç”¨ä»£ç ï¼Œä¸å¤šè¯´ï¼Œä¸Šä»£ç 12345678910111213141516171819202122232425262728&lt;android.support.constraint.ConstraintLayout&gt; &lt;Button android:id="@+id/button1" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="Button1" /&gt; &lt;Button android:id="@+id/button2" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="Button2" app:layout_constraintTop_toBottomOf="@id/button1" /&gt; &lt;Button android:id="@+id/button3" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="éšè—æ˜¾ç¤º" app:layout_constraintTop_toBottomOf="@id/button2" /&gt; &lt;android.support.constraint.Group android:id="@+id/group" android:layout_width="wrap_content" android:layout_height="wrap_content" android:visibility="visible" app:constraint_referenced_ids="button1,button2" /&gt;&lt;/android.support.constraint.ConstraintLayout&gt; å®æˆ˜æœ€åå¼€å§‹æ’¸æˆ‘ä»¬å¼€å§‹å±•ç¤ºçš„å¸ƒå±€123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167&lt;android.support.constraint.ConstraintLayout android:padding="8dp"&gt; &lt;android.support.constraint.Guideline android:id="@+id/guideline1" android:layout_width="wrap_content" android:layout_height="wrap_content" android:orientation="vertical" app:layout_constraintGuide_begin="20dp" /&gt; &lt;android.support.constraint.Guideline android:id="@+id/guideline2" android:layout_width="wrap_content" android:layout_height="wrap_content" android:orientation="horizontal" app:layout_constraintGuide_begin="5dp" /&gt; &lt;ImageView android:id="@+id/img" android:layout_width="wrap_content" android:layout_height="wrap_content" android:src="@mipmap/head" app:layout_constraintBottom_toTopOf="@id/name" app:layout_constraintLeft_toLeftOf="@id/guideline1" app:layout_constraintTop_toTopOf="@id/guideline2" /&gt; &lt;android.support.constraint.Barrier android:id="@+id/img_barrier" android:layout_width="wrap_content" android:layout_height="wrap_content" app:barrierDirection="right" app:constraint_referenced_ids="img" /&gt; &lt;TextView android:id="@+id/name" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="Lypop" android:textColor="@android:color/white" android:textSize="16sp" app:layout_constraintLeft_toLeftOf="@id/guideline1" app:layout_constraintRight_toRightOf="@id/img_barrier" app:layout_constraintTop_toBottomOf="@id/img" /&gt; &lt;android.support.constraint.Barrier android:id="@+id/name_barrier" android:layout_width="wrap_content" android:layout_height="wrap_content" app:barrierDirection="bottom" app:constraint_referenced_ids="name" /&gt; &lt;TextView android:id="@+id/id" android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_marginLeft="10dp" android:text="åå­—IDï¼š123456789" android:textColor="@android:color/white" android:textSize="14sp" app:layout_constraintBottom_toTopOf="@id/sex" app:layout_constraintLeft_toRightOf="@id/img" app:layout_constraintTop_toTopOf="@id/guideline2" app:layout_constraintVertical_chainStyle="spread" /&gt; &lt;TextView android:id="@+id/sex" android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_marginLeft="10dp" android:text="æ€§åˆ«ï¼šman" android:textColor="@android:color/white" android:textSize="14sp" app:layout_constraintBottom_toTopOf="@id/sign" app:layout_constraintLeft_toRightOf="@id/img" app:layout_constraintTop_toBottomOf="@id/id" /&gt; &lt;TextView android:id="@+id/sign" android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_marginLeft="10dp" android:text="ä¸ªæ€§ç­¾åï¼šæˆ‘æ€æ•…æˆ‘åœ¨" android:textColor="@android:color/white" android:textSize="14sp" app:layout_constraintBottom_toBottomOf="@id/name_barrier" app:layout_constraintLeft_toRightOf="@id/img" app:layout_constraintTop_toBottomOf="@id/sex" /&gt; &lt;ImageView android:id="@+id/bottom1" android:layout_width="wrap_content" android:layout_height="wrap_content" android:src="@mipmap/share_tw" app:layout_constraintBottom_toTopOf="@id/share1" app:layout_constraintHorizontal_chainStyle="spread" app:layout_constraintLeft_toLeftOf="parent" app:layout_constraintRight_toLeftOf="@id/bottom2" /&gt; &lt;ImageView android:id="@+id/bottom2" android:layout_width="wrap_content" android:layout_height="wrap_content" android:src="@mipmap/share_qq" app:layout_constraintBottom_toTopOf="@id/share2" app:layout_constraintLeft_toRightOf="@id/bottom1" app:layout_constraintRight_toLeftOf="@id/bottom3" /&gt; &lt;ImageView android:id="@+id/bottom3" android:layout_width="wrap_content" android:layout_height="wrap_content" android:src="@mipmap/share_kongjian" app:layout_constraintBottom_toTopOf="@id/share3" app:layout_constraintLeft_toRightOf="@id/bottom2" app:layout_constraintRight_toLeftOf="@id/bottom4" /&gt; &lt;ImageView android:id="@+id/bottom4" android:layout_width="wrap_content" android:layout_height="wrap_content" android:src="@mipmap/share_wechat" app:layout_constraintBottom_toTopOf="@id/share4" app:layout_constraintLeft_toRightOf="@id/bottom3" app:layout_constraintRight_toRightOf="parent" /&gt; &lt;TextView android:id="@+id/share1" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="åˆ†äº«1" android:textSize="18sp" app:layout_constraintBottom_toBottomOf="parent" app:layout_constraintHorizontal_chainStyle="spread" app:layout_constraintLeft_toLeftOf="parent" app:layout_constraintRight_toLeftOf="@id/share2" /&gt; &lt;TextView android:id="@+id/share2" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="åˆ†äº«2" android:textSize="18sp" app:layout_constraintBottom_toBottomOf="parent" app:layout_constraintLeft_toRightOf="@id/share1" app:layout_constraintRight_toLeftOf="@id/share3" /&gt; &lt;TextView android:id="@+id/share3" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="åˆ†äº«3" android:textSize="18sp" app:layout_constraintBottom_toBottomOf="parent" app:layout_constraintLeft_toRightOf="@id/share2" app:layout_constraintRight_toLeftOf="@id/share4" /&gt; &lt;TextView android:id="@+id/share4" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="åˆ†äº«4" android:textSize="18sp" app:layout_constraintBottom_toBottomOf="parent" app:layout_constraintLeft_toRightOf="@id/share3" app:layout_constraintRight_toRightOf="parent" /&gt;&lt;/android.support.constraint.ConstraintLayout&gt; &emsp;&emsp;è¿™é‡Œé¢æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚ä½•æ‰èƒ½å°†ä¸‹é¢çš„åå­—å’Œå¤´åƒå±…ä¸­ï¼Œè¿™é‡Œé‡‡ç”¨çš„æ˜¯Barrierçš„ç‰¹æ€§ï¼Œåªéœ€è¦ç»™åå­—æ§ä»¶æ·»åŠ å‘å·¦ä¾èµ–å’Œå‘å³å’ŒBarrierçš„ä¾èµ–å³å¯å±…ä¸­ï¼Œçœ‹ä¸‹å›¾ ç»“æŸè¯­&emsp;&emsp;OKï¼ŒConstraintLayoutå°±è®²è§£å®Œæ¯•ï¼Œè™½ç„¶è¿™äº›å¯ä»¥é€šè¿‡æ‹–æ‹½æ¥è¿›è¡Œæ“ä½œå¯èƒ½è¿˜ä¼šå®Œæˆçš„æ›´å¥½ï¼Œä½†æ˜¯è¿˜æ˜¯é‚£å¥è¯æˆ‘ä»¬è¦åšåˆ°çŸ¥å…¶ç„¶åˆçŸ¥å…¶æ‰€ä»¥ç„¶ã€‚ æˆ‘æ€æ•…æˆ‘åœ¨ æºç ä¸‹è½½åœ°å€ï¼šhttps://github.com/AndLollipop/ConstraintLayout ä¿®æ­£1ã€åœ¨å¤´åƒå’Œä¸‹é¢çš„åå­—å¯ä»¥è®©TextViewå·¦å³å’ŒImageViewè¿›è¡Œçº¦æŸæ¥è¾¾åˆ°æ–‡å­—å’Œå›¾ç‰‡ä¸­é—´å¯¹é½ 1234567891011121314151617181920&lt;ImageView android:id="@+id/img" android:layout_width="62dp" android:layout_height="60dp" android:layout_marginLeft="30dp" android:layout_marginRight="20dp" android:src="@mipmap/head" app:layout_constraintLeft_toLeftOf="parent" app:layout_constraintRight_toLeftOf="@id/barrier" app:layout_constraintTop_toTopOf="@id/guideline1" /&gt;&lt;TextView android:id="@+id/name" android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_marginTop="10dp" android:text="hahhjha" app:layout_constraintLeft_toLeftOf="@id/img" app:layout_constraintRight_toRightOf="@id/img" app:layout_constraintTop_toBottomOf="@id/img" /&gt;]]></content>
      <categories>
        <category>æŠ€æœ¯å‘¨</category>
        <category>ç©è½¬UI</category>
      </categories>
      <tags>
        <tag>ç©è½¬UI</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æˆ‘åœ¨åŒ—äº¬çš„ä¸‰å¹´å’Œå³å°†åˆ°æ¥çš„2018]]></title>
    <url>%2F2017%2F12%2F25%2F20171231_2017%E6%80%BB%E7%BB%93%2F</url>
    <content type="text"><![CDATA[å‰è¯&emsp;&emsp;å¾ˆä¹…ä»¥å‰å°±æƒ³å†™ä¸€äº›æ€»ç»“æ€§çš„ä¸œè¥¿äº†ï¼Œå¥ˆä½•è‡ªå·±çš„æ‰§è¡ŒåŠ›æ€»æ˜¯æ…¢é‚£ä¹ˆä¸€ä¸¢ä¸¢ï¼Œä½†æ˜¯ç°åœ¨ç»ˆäºåœ¨è€å¤´çš„å¼•å¯¼ï¼ˆå¨èƒï¼‰ä¸‹å¼€å§‹äº†ï¼Œè¿™ç¯‡æ–‡ç« ä¹Ÿæ˜¯ä¼šå¾ˆè£å¹¸çš„æˆä¸ºæˆ‘çš„ç¬¬ä¸€ç¯‡æ€»ç»“æ€§çš„æ–‡ç« ã€‚ è¿™ä¸‰å¹´ç”Ÿæ´»ç¯‡&emsp;&emsp;2017å¹´æ˜¯æˆ‘æ¥åŒ—äº¬çš„ç¬¬ä¸‰å¹´äº†ï¼Œå‡ å¹´é‡Œï¼Œè‡ªå·±ä»ä¸€ä¸ªåœ¨æ ¡å­¦ç”Ÿè½¬å˜ä¸ºä¸€ä¸ªä¸‡åƒæ‰“å·¥è€…ä¸­çš„ä¸€å‘˜ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ä¹Ÿä»ä¸€ä¸ªäººåˆ°ç°åœ¨çš„ä¸¤ä¸ªäººã€‚ 2015å¹´ç”±äºè‡ªå·±çš„åˆ†æ•°è¶³å¤Ÿ(ï¿£â–½ï¿£)ï¼Œå¾ˆå¼€å¿ƒçš„å‡ºæ¥æ‰¾å®ä¹ çš„å·¥ä½œï¼Œè™½ç„¶æ‰¾å·¥ä½œçš„è¿‡ç¨‹å¹¶æ²¡æœ‰è‡ªå·±æƒ³è±¡çš„é¡ºåˆ©ï¼Œä½†æ˜¯ç»è¿‡è‡ªå·±çš„åŠªåŠ›è¿˜æ˜¯åœ¨åŒ—äº¬æ‰¾åˆ°äº†ä¸€ä»½åˆé€‚çš„å®ä¹ å·¥ä½œï¼Œè®°å¾—åˆšæ¥æ—¶æ˜¯ä¸‰ä¸ªåŒå­¦ä¸€èµ·ç§Ÿä½åœ¨åå‚æ‘é‚£ï¼Œç”±äºè‡ªå·±å¹´å°‘æ— çŸ¥ï¼Œåœ¨çœ‹åˆ°ç§Ÿä½çš„ç¯å¢ƒæ—¶ä¹Ÿæ˜¯å¤±è½äº†ä¸€ä¸¤å¤©ï¼Œä¸è¿‡è¿™ä¸ªå¾ˆå¿«å°±åœ¨è‡ªå·±è®¤æ¸…ç°å®åè‡ªå·±ä¿®å¤äº†ï¼ˆå“å‘€ï¼Œè¿˜çœŸæ˜¯ä½©æœè‡ªå·±çš„è‡ªæˆ‘ä¿®å¤èƒ½åŠ›biu~biu~biu~ï¼‰ï¼Œåæ¥ç”±äºæŸäº›åŸå› æˆ‘å’Œä¸€ä¸ªå®¤å‹åˆå¾—å‡ºå»æ‰¾æˆ¿å­äº†ï¼Œé‚£æ˜¯æˆ‘ä»¬åˆšå»ä¸å¤ªæ•¢è¯·å‡ï¼Œåªèƒ½åœ¨ç™½å¤©åœ¨å„ç§ç§Ÿæˆ¿å­çš„ç½‘ç«™æ‰¾è‡ªå·±è®¤ä¸ºåˆé€‚çš„æˆ¿å­ï¼Œæ™šä¸Šä¸‹ç­é©¬ä¸Šå¥”å‡ºå»åœ¨ä¸­ä»‹çš„å¸¦é¢†ä¸‹å„ä¸ªå°åŒºå¥”æ³¢ç€çœ‹æˆ¿å­ï¼Œä½†æ˜¯çœ‹äº†å‡ å¤©åæˆ‘ä»¬å‘ç°è‡ªå·±å¹¶ä¸é€‚åˆè¥¿äºŒæ——åœ°æ®µçš„æˆ¿å­ï¼Œäºæ˜¯æˆ‘ä»¬å°±å¾ˆæœ‰è‡ªçŸ¥ä¹‹æ˜çš„æ”¾å¼ƒåœ¨ç±»ä¼¼çš„åœ°æ®µæ‰¾æˆ¿å­äº†ï¼Œå¼€å§‹è½¬æˆ˜åŸå†œæ‘ï¼Œæœ€ååœ¨è¡¨å“¥çš„å¸®åŠ©ä¸‹ç»ˆäºæ‰¾åˆ°äº†é€‚åˆæˆ‘ä»¬çš„æˆ¿å­ï¼Œåœ¨é‚£é‡Œæˆ‘å’Œæˆ‘çš„å°ä¼™ä¼´ä½äº†ä¸€å¹´ï¼Œæ—©ä¸Šæœ€çˆ±åƒçš„å°±æ˜¯é‚£ä¸ª2.5å¤¹é¸¡è›‹å’Œè±†çš®çš„çƒ§é¥¼ï¼Œç”šè‡³æœ‰æ—¶æˆ‘ä»¬ä¼šå¤šä¹°ä¸€ä¸ªå¸¦åˆ°å…¬å¸ä¸­åˆåƒï¼Œç°åœ¨æƒ³æƒ³ä¹Ÿè¿˜æ˜¯å¾ˆæƒ³åƒçš„ï¼Œå“ˆå“ˆï¼è¿™ä¸€å¹´çš„ç”Ÿæ´»å¾ˆç®€å•ï¼Œä¸Šç­ï¼Œé€›è¡—ï¼Œå›å®¶ï¼Œä½†æ˜¯åœ¨è¿™ä¸€å¹´è‡ªå·±ä¹ŸæŒæ¡äº†å¾ˆå¤šåŸºæœ¬çš„æŠ€èƒ½ï¼Œè­¬å¦‚ååœ°é“å•¦ï¼Œåå…¬äº¤äº†ï¼Œè¿˜æœ‰çœ‹æ‰‹æœºåœ°å›¾å•¦ï¼Œåç”µæ¢¯ç­‰ç­‰~~ï¼ˆä¸è¦å˜²ç¬‘æˆ‘ï¼Œå› ä¸ºæˆ‘è€å®¶çš„ç”Ÿæ´»çœŸçš„å¾ˆå•çº¯ï¼‰ï¼Œå°±è¿™æ ·åœ¨æˆ‘å’Œå°ä¼™ä¼´çš„äº’ç›¸é™ªä¼´ä¸‹ç¬¬ä¸€å¹´çš„åŒ—äº¬ç”Ÿæ´»ä¹Ÿå°±ç»“æŸäº†ã€‚ &emsp;&emsp;2016å¹´æ˜¥èŠ‚åï¼Œåˆå’Œå°ä¼™ä¼´åœ¨å®ä¹ çš„å…¬å¸å·¥ä½œäº†å°†è¿‘ä¸€ä¸ªæœˆï¼Œæˆ‘ä»¬çš„å®ä¹ å·²ç»åˆ°æœŸäº†ï¼Œè¦å¼€å§‹æ‰¾æ­£å¼çš„å·¥ä½œï¼Œç”±äºå·¥ä½œåŸå› ä¹Ÿåªèƒ½è¢«è¿«çš„å„å¥”ä¸œè¥¿äº†ï¼Œå“¦ä¸ï¼Œå‡†ç¡®çš„è¯´åº”è¯¥æ˜¯å„å¥”å—åŒ—äº†ï¼Œé‚£æ®µæ—¶é—´è‡ªå·±çœŸçš„å¾ˆå‹æŠ‘å•Šï¼Œæ¯•ç«Ÿé™ªè‡ªå·±ä¸€å¹´ä¸€èµ·å…«å¦çš„å°ä¼™ä¼´èµ°äº†ï¼Œè¿˜è¦é¢å¯¹æ‰¾å·¥ä½œçš„å‹åŠ›ï¼Œä¸è¿‡æ„Ÿè§‰ç”Ÿæ´»å¯¹æˆ‘è¿˜æ˜¯è›®å¥½çš„ï¼Œå› ä¸ºå°±åœ¨é‚£æ®µæ—¶é—´è€å¤´å‡ºç°äº†ï¼Œä»–ç»™äº†æˆ‘å¾ˆå¤šï¼Œå…³å¿ƒã€é¼“åŠ±å’Œç†è§£ï¼Œå½“ç„¶è¿™äº›éƒ½æ˜¯é€šè¿‡æ‰“ç”µè¯æˆ–è€…QQå®Œæˆçš„ï¼Œå› ä¸ºæˆ‘ä»¬å°±æ˜¯åœ¨ç¡®å®šå…³ç³»ä¹Ÿæ˜¯åœ¨æ‰‹æœºä¸Šå®Œæˆçš„ï¼Œç›´åˆ°ä¸€ä¸ªæœˆä»¥åæˆ‘ä»¬æ‰è§äº†ä¸€å¹´å¤šä»¥æ¥çš„ç¬¬ä¸€é¢ï¼Œè¯´å®è¯æˆ‘å·²ç»ä¸è®°å¾—ä»–é•¿å•¥æ ·å­äº†ã€‚ä¸€ä¸ªæœˆåï¼Œç”±äºæ¯•ä¸šè®¾è®¡æˆ‘å›äº†å­¦æ ¡ï¼Œæˆ‘å’Œè€å¤´è§é¢äº†ï¼Œè®°å¾—é‚£å¤©å‚æ™šç”±äºæ„Ÿè§‰å‘¨å›´çš„æ°›å›´æœ‰ç‚¹å°´å°¬ï¼Œåˆç”±äºè‡ªå·±æœ‰ç‚¹ç´§å¼ æ‰€ä»¥å°±åœ¨ä¸€ç›´çš„è¯´è¯ï¼Œè€Œè€å¤´å‘¢å°±åœ¨æ—è¾¹å¬ç€ï¼Œåº”è¯¥æ˜¯å¹¶æ’ä¸ä¸Šè¯å§ï¼Œæ™šä¸Šå›åˆ°å®¿èˆè€å¤´å±…ç„¶å’Œæˆ‘è¯´è§‰å¾—æˆ‘å¯çˆ±ï¼Œæˆ‘ç°åœ¨ä¹Ÿç»ˆäºæ‰¾åˆ°äº†å’Œè€å¤´åœ¨ä¸€èµ·æ—¶è‡ªå·±è¯å¤šçš„åŸå› äº†ï¼Œä¼°è®¡æ˜¯è¿˜æƒ³è¢«å¤¸å¥–å§ï¼Œso,è€å¤´ï¼Œä½ æ‡‚å¾—ã€‚ &emsp;&emsp;ä¹‹åæ¯•è®¾ç»“æŸäº†ï¼Œç­”è¾©ä¹Ÿç»“æŸäº†ï¼Œåœ¨åŒ—äº¬è¿™è¾¹ä¹Ÿæ‰¾åˆ°äº†ä¸€ä»½å·¥ä½œï¼Œè™½ç„¶é‚£ä»½å·¥ä½œå¹¶ä¸æ˜¯å¾ˆç†æƒ³ï¼Œä½†æ˜¯åœ¨é‚£é‡Œæˆ‘è®¤è¯†äº†æ¼‚äº®çš„ç‡•ç‡•ï¼Œåšå¼ºçš„æ‚¦æ‚¦ï¼Œä»»æ€§çš„æ»´æ»´ï¼Œå¯çˆ±çš„è•Šè•Šï¼Œå‡ºè°‹åˆ’ç­–çš„ç›Ÿä¸»ï¼Œå¾ˆæ„Ÿè°¢å¤§å®¶åœ¨é‚£æ®µæ—¶é—´çš„å¸®åŠ©å’Œå¸¦ç»™æˆ‘çš„æ­£èƒ½é‡ã€‚åœ¨2016å‰©ä¸‹çš„æ—¶é—´é‡Œæˆ‘è¿˜æ˜¯ç‹¬è‡ªä¸€äººåœ¨åŒ—äº¬ï¼Œå› ä¸ºè€å¤´å†³å®šç•™åœ¨å­¦æ ¡è€ƒç ”ï¼Œé‚£æ®µæ—¶é—´æˆ‘ä¼šæŠ±æ€¨è€å¤´ï¼Œå› ä¸ºåœ¨è‡ªå·±åŠ ç­å›å®¶æ—¶çœ‹åˆ°é‚£äº›è¢«è‡ªå·±ç”·ç›†å‹åœ¨æ¥çš„å¥³ç”Ÿæ—¶è‡ªå·±å°±é¡¿ç”Ÿå§”å±ˆï¼ˆæ²¡é”™ï¼Œå°±æ˜¯æ¥çš„è¿™ä¹ˆå¿«ï¼‰ï¼Œç„¶åå›å»å¦‚æœè€å¤´å†æ‰“ç”µè¯è¿‡æ¥çš„è¯å°±ä¼šè¢«æˆ‘è‡­éª‚ä¸€é¡¿ï¼Œç­‰ç¬¬äºŒå¤©è‡ªå·±åˆä¼šè‡ªæˆ‘åçœï¼Œä»¥åè‡ªå·±ä¸èƒ½è¿™æ ·äº†ï¼Œè€å¤´è‡ªå·±åœ¨å­¦æ ¡å‹åŠ›ä¹Ÿå¾ˆå¤§ä¸æ˜¯å—ï¼Ÿæˆ‘å°±æ˜¯è¿™ä¹ˆçº ç»“ã€‚å°±è¿™æ ·2016ä¹Ÿä¸€ç‚¹ç‚¹çš„è¿‡å»äº†ï¼Œåœ¨è¿™ä¸€å¹´é‡Œæˆ‘æ¯•ä¸šäº†ï¼Œç¬¬ä¸€æ¬¡è°ˆæ‹çˆ±ï¼Œç¬¬ä¸€æ¬¡å·¥ä½œé€šå®µï¼Œç¬¬ä¸€æ¬¡è®¤è¯†äº†å‡ ä¸ªé™¤åŒå­¦ä¹‹å¤–çš„å¥½æœ‹å‹ã€‚ &emsp;&emsp;2016å¹´çš„å¹´åº•ç”±äºå·¥ä½œé‡å¤ªå¤§ï¼Œæ—¶å¸¸è¦é€šå®µï¼Œè‡ªå·±çš„èº«ä½“æ„Ÿè§‰ä¹Ÿå‡ºç°äº†ä¸é€‚ï¼Œä¾¿å†³å®šæ¢ä¸€ä»½å·¥ä½œï¼Œç”±äºä¹‹å‰ä¸€èµ·çš„å°ä¼™ä¼´çš„å…¬å¸æ­£åœ¨æ‹›äººï¼Œè€Œä¸”æ„Ÿè§‰ç¯å¢ƒå’Œå·¥ä½œåœ°ç‚¹ä¹Ÿæ¯”è¾ƒåˆé€‚ï¼Œä¾¿æ¢åˆ°äº†ç°åœ¨çš„å…¬å¸ã€‚2017å¹´ï¼Œè€å¤´è€ƒç ”ç»“æŸåä¹Ÿæ¥åˆ°åŒ—äº¬äº†ï¼Œæ„Ÿè§‰é‚£æ—¶æˆ‘å’Œè€å¤´æ‰çœŸæ­£çš„å¼€å§‹è°ˆæ‹çˆ±ï¼Œæˆ‘ä»¬ä¼šç»å¸¸è§é¢ï¼Œçº¦ä¼šçš„åœ°ç‚¹å°±æ˜¯é©¬è·¯å’Œå¤©æ¡¥ï¼Œè™½ç„¶æ¯æ¬¡å›æ¥éƒ½æ˜¯ä¸€èº«åœŸï¼Œä½†æ˜¯è¿˜æ˜¯ä¼šå¾ˆå¼€å¿ƒã€‚åæ¥è€å¤´ä¹Ÿå·¥ä½œäº†ï¼Œåœ¨ä¸€èµ·çš„æ—¶é—´ä¹Ÿå˜å¤šäº†ï¼Œåœ¨è¿™æ®µæ—¶é—´æˆ‘ä»¬ä»å¼€å§‹äº‰åµä¸æ–­åˆ°ç°åœ¨ä¾ç„¶äº‰åµä¸æ–­ä½†ä¼šå‡ ç§’åå°±å’Œå¥½ï¼Œä»å¼€å§‹çš„è€å¤´åšé¥­æŠŠé”…çƒ§ç€åˆ°ç°åœ¨æŒæ¡è°ƒäº†500åº¦å¤§æ³•ï¼Œä»å¼€å§‹æ—©é¤ä¸å›ºå®šåˆ°ç°åœ¨æ¯å¤©æ—©ä¸Šä¸€ä¸ªç‰ç±³ä¸€ä¸ªé¸¡è›‹ï¼ˆåªé™äºæˆ‘è‡ªå·±äº«å—å¦‚æ­¤ä¸°åšçš„å¾…é‡ï¼‰ï¼Œå‰å‡ å¤©å°ä¼™ä¼´è¯´æˆ‘æ¯”ä»¥å‰æ¼‚äº®äº†ï¼Œå’Œé—ºèœœèŠå¤©è¯´æˆ‘è¶Šæ¥è¶Šå¯çˆ±äº†ï¼Œè¿™å…¶ä¸­è€å¤´çš„åŠŸåŠ³æ˜¯åŠŸä¸å¯æ²¡çš„ï¼Œä»¥åè€å¤´è€äº†æˆ‘ä¹Ÿä¼šå¯¹è€å¤´ä¸€æ ·çš„å¥½ãƒ½(âœ¿ï¾Ÿâ–½ï¾Ÿ)ãƒã€‚è¿™ä¸€å¹´ä¸­æˆ‘æ”¶è·æœ€å¤šçš„æ˜¯çˆ±æƒ…å’Œç¾å¥½çš„å¿ƒæƒ…ï¼Œè°¢è°¢ä½ å¯çˆ±çš„è€å¤´ï¼Œä¹ˆä¹ˆå“’ï¼ &emsp;&emsp;è¿™ä¸‰å¹´ä¸­ï¼Œæˆ‘çš„ç”Ÿæ´»å˜å¾—ç‹¬ç«‹ï¼Œæ‰¾åˆ°äº†ä¸€ä¸ªçˆ±æˆ‘çš„å’Œæˆ‘çˆ±çš„è€å¤´ï¼Œè™½ç„¶æœ‰äº›ä¸å¤ªå¦‚æ„çš„åœ°æ–¹ï¼Œä½†æ˜¯æˆ‘è®¤ä¸ºä¿æŒä¹è§‚çš„å¿ƒæ€å’Œä¸åœæ­¢çš„è„šæ­¥ç”Ÿæ´»ä¸€å®šä¼šå¦‚æˆ‘æ‰€æ„¿ï¼ å·¥ä½œç¯‡&emsp;&emsp;åœ¨ä¸Šé¢è‡ªå·±ä¹Ÿå¤§æ¦‚åšäº†è‡ªå·±è¿™ä¸‰å¹´çš„å·¥ä½œæ€»ç»“ï¼Œåœ¨è¿™æ®µæ—¶é—´é‡Œè‡ªå·±ä¸€å…±åœ¨ä¸‰å®¶å…¬å¸å·¥ä½œè¿‡ï¼Œç¬¬ä¸€å®¶å®ä¹ çš„å…¬å¸ï¼Œåœ¨é‚£é‡Œä¹Ÿè®¤è¯†å¾ˆå¤šä¼˜ç§€çš„é•¿è¾ˆï¼Œæˆ‘ä»¬ç»„çš„æ¯ä¸ªäººå¯¹æˆ‘éƒ½å¾ˆå¥½ï¼Œæ­£å› ä¸ºé‚£æ ·æ‰è®©æˆ‘åœ¨é‚£é‡Œè¿‡å¾—å¾ˆå¼€å¿ƒçš„åŒæ—¶ä¹Ÿå­¦åˆ°äº†å¾ˆå¤šæŠ€æœ¯å’ŒéæŠ€æœ¯çš„å¥½ä¹ æƒ¯ï¼Œè¿™äº›å¥½çš„ä¹ æƒ¯åº”è¯¥ä¼šå½±å“æˆ‘æ•´ä¸ªçš„ç¼–ç é˜¶æ®µã€‚ç¬¬äºŒå®¶å…¬å¸å­¦åˆ°çš„æ›´å¤šçš„æ˜¯è‡ªå­¦å’Œç‹¬è‡ªå¤„ç†é—®é¢˜çš„èƒ½åŠ›ï¼Œå› ä¸ºçœŸæ­£å·¥ä½œåè‡ªå·±å°±çœŸæ­£çš„æ˜¯ä¸€ä¸ªä¸ªä½“ï¼Œå¿…é¡»èƒ½æ‹…ä»»å…¶è‡ªå·±è´Ÿè´£çš„åŠŸèƒ½ã€‚åœ¨ç°åœ¨çš„å…¬å¸ä¸­ï¼Œå…¶å®æˆ‘åº”è¯¥å­¦åˆ°å¾ˆå¤šï¼Œä½†æ˜¯ç”±äºè‡ªå·±è¿™æ®µæ—¶é—´çš„å¤ªè´ªç©å¯¼è‡´è‡ªå·±å­¦åˆ°çš„ä¸œè¥¿ä»…é‚£ä¹ˆä¸€ç‚¹ç‚¹ï¼Œä¹Ÿå¸Œæœ›è‡ªå·±èƒ½é€šè¿‡å†™è¿™ç¯‡æ–‡ç« èƒ½å¯¹è‡ªå·±ä¹‹ååœ¨å­¦ä¹ å¸¦æ¥å¼•å¯¼ã€‚ &emsp;&emsp;è¿™ä¸‰å¹´çš„ç”Ÿæ´»ç¼©å†™éƒ½åœ¨ä¸Šé¢äº†ï¼Œè‡ªå·±æ¥ä¸‹æ¥çš„ä¸€å¹´é‡Œè¦åšçš„æ˜¯å’Œè€å¤´ä¸€èµ·åŠªåŠ›å»çªç ´è‡ªå·±ï¼Œæˆä¸ºæ›´ä¼˜ç§€çš„å’Œæ›´å¼€å¿ƒçš„ä¸¤ä¸ªå°åŒ—æ¼‚ å³å°†åˆ°æ¥çš„2018&emsp;&emsp;åœ¨å·²ç»åˆ°æ¥çš„2018å¹´ï¼Œæœ‰ä»¥ä¸‹å‡ ä»¶äº‹ç­‰å¾…ç€è¢«æˆ‘å®Œæˆ è€ƒç ”ï¼Œåœ¨è¿™ä¸€å¹´è‡ªå·±å°†ä¸ºè€ƒå–åŒ—èˆªåœ¨èŒç ”ç©¶ç”Ÿå­¦ä¹ ï¼Œé¦–å…ˆè¦å­¦ä¹ Cï¼Œæ•°æ®ç»“æ„å’Œæ•°å­¦ï¼Œè¿™ä¸ªä¼šåœ¨æ¯å‘¨æœ«è…¾å‡ºä¸€å¤©çš„æ—¶é—´å»å­¦ä¹ ï¼Œè¿˜æ˜¯è¦æ¯å¤©ç”¨é›¶æ•£çš„æ—¶é—´èƒŒè‹±è¯­å•è¯ï¼Œä¹‹åä¸‹åŠå¹´å¼€å§‹æ­£å¼çš„å­¦ä¹ è‹±è¯­å’Œæ”¿æ²»ï¼Œå¾…ä¹¦ç±å‡†å¤‡å¥½åä¼šæŠŠæ¯ä¸ªé˜¶æ®µå­¦ä¹ åœ¨ä»”ç»†åšå‡ºè§„åˆ’ã€‚ çœ‹ä¸‰æœ¬Androidçš„åŸºç¡€ä¹¦ç±ï¼Œä¸ºå•¥å‘¢ï¼Œå› ä¸ºè‡ªå·±çš„æŠ€æœ¯ä¸è¿è´¯ï¼Œå¸Œæœ›é€šè¿‡é˜…è¯»ä¹¦ç±æŠŠçŸ¥è¯†è¿è´¯èµ·æ¥ å’Œè€å¤´ä¸€èµ·å­¦ä¹ Python,è·Ÿä¸Šæ—¶ä»£çš„æ½®æµğŸ˜‚ åœ¨æ˜¥èŠ‚å‰ï¼Œå®ŒæˆCameraä¸­çš„çŸ¥è¯†ç‚¹æ•´ç† ä¿æŒå¥½çš„ç”Ÿæ´»ä¹ æƒ¯æ¯å¤©åƒé¸¡è›‹ğŸ˜ï¼›æ¯å¤©å®Œæˆè§„å®šçš„è¿åŠ¨ï¼›æ¯å¤©è‡³å°‘æœ‰ä¸€ä¸ªå°æ—¶å­¦ä¹ ï¼›å‘¨æœ«æœ€æ™šç¡åˆ°9ç‚¹ğŸ˜¢ï¼›å°½é‡ä¸å’Œè€å¤´ç”Ÿæ°”ï¼Œæ¯•ç«Ÿå¹´çºªå¤§äº†ç»ä¸ä½è¢«æˆ‘æ°”äº†ğŸ‘´ &emsp;&emsp;ğŸ˜­è¿˜æ˜¯æ²¡æœ‰åœ¨2017å¹´å†™å®Œï¼Œå—åˆ°æƒ©ç½šäº†ğŸ˜­ï¼Œå¸Œæœ›åœ¨æ–°çš„ä¸€å¹´è‡ªå·±èƒ½æŒ‰æ—¶å®Œæˆè®¡åˆ’ï¼Œå’Œè€å¤´ä¸€èµ·è¿æ¥æ›´ä¼˜ç§€çš„æˆ‘ä»¬ï¼]]></content>
      <categories>
        <category>æ—¶å…‰è¿½æº¯</category>
      </categories>
      <tags>
        <tag>æ—¶å…‰è¿½æº¯</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ”¶è·2017,å¥”è·‘2018]]></title>
    <url>%2F2017%2F12%2F25%2F20171228_%E5%A5%94%E8%B7%91%E5%90%A7_2018%2F</url>
    <content type="text"><![CDATA[é¢„çƒ­&emsp;&emsp;åœ¨å¼€å§‹é˜…è¯»ä¹‹å‰å…ˆæˆ´ä¸Šæˆ‘ä»¬çš„è€³æœºå¬ä¸€é¦–éŸ³ä¹æ¥ç¼“è§£ç–²å€¦çš„ä½ ï¼Œå¼€å¿ƒçš„æ˜¯è¿™ä¸€å¹´æˆ‘ä»¬æ”¶è·æ»¡æ»¡ï¼Œä¸å¼€å¿ƒçš„æ˜¯æˆ‘ä»¬æ— ä»»ä½•æ”¶è·ã€‚ä¸ç®¡æ€æ ·ä½ éƒ½æ— ä»»ä½•ç†ç”±åœä¸‹ä½ çš„è„šæ­¥ã€æ”¾ä¸‹ä½ æ‰‹ä¸Šçš„äº‹å»ç¼…æ€€æ‡Šæ‚”ï¼Œæ—¶é—´ä¸ä¼šç­‰ä½ ï¼Œå¯¹æ‰‹ä¸ä¼šç­‰ä½ ï¼Œç»ˆç©¶ä½ è¿˜æ˜¯è¦å»å­¦ä¹ å¦‚ä½•çš„æ´»ç€ã€‚ å†™ä½œåˆè¡·&emsp;&emsp;ä¸ºäº†èƒ½ç•™ä½è‡ªå·±çš„è®°å¿†ï¼Œä¸ºäº†èƒ½å’Œå¥¹å®ˆä½å½¼æ­¤ç¾å¥½çš„å›å¿†ï¼Œå¸Œæœ›æ¯å¹´éƒ½å†™ä¸€ç¯‡ï¼Œä¸€æ–¹é¢ç”¨æ¥è®°ä½è¿™ä¸€å¹´ç¾å¥½çš„æ—¶å…‰ï¼Œå¦ä¸€æ–¹é¢å°±æ˜¯ç”¨æ˜å¹´çš„è®¡åˆ’æ¥é­ç­–è‡ªå·± ç”Ÿæ´»å°èŠ‚å¥&emsp;&emsp;æˆ‘æ¥åŒ—äº¬å·®ä¸å¤šä¸€å¹´å¤šäº†ï¼Œä»å»å¹´æ¯•ä¸šå¤§å®¶éƒ½ç¦»å¼€äº†å¾…äº†4å¹´çš„å¤§å­¦æ¥åŒ—äº¬æ‰“å·¥ï¼Œæˆ‘ç‹¬è‡ªç•™ä¸‹å‡†å¤‡è€ƒä¸€æ¬¡ç ”ï¼Œåˆ°ä»Šå¹´3æœˆä»½å·¦å³æ‰æ‰¾åˆ°ä¸€ä»½å·¥ä½œï¼Œç„¶ååˆè·³æ§½æ¥åˆ°äº†ç°åœ¨çš„è¿™ä¸€å®¶ã€‚å·¥èµ„æ˜¯æ¶¨äº†ä¸€äº›ï¼Œç”Ÿæ´»ä¹Ÿå¤šäº†ä¸€äº›æƒ¬æ„ï¼Œè‡ªå·±ä¹Ÿè€ç»ƒäº†è®¸å¤šã€‚æ—¶é—´æ˜¯ä¸ªå¾ˆç¥å¥‡çš„ä¸œè¥¿ï¼Œæ—¢å¼€å¿ƒé•¿å¤§åˆæ‹…å¿ƒå˜è€ï¼Œéš¾é“äººç»ˆç©¶æ˜¯ä¸€ä¸ªçŸ›ç›¾çš„ç»¼åˆä½“å—ï¼Ÿ æ—¶å…‰è¿½æº¯&emsp;&emsp;æˆ‘æ˜¯ä¸€ä½è‹¦é€¼çš„ç å†œï¼Œåœ¨å¤§å››ä¸‹åŠå¹´è®¤è¯†äº†æˆ‘å¯¹è±¡,åˆ°ä»Šå¹´7æœˆä»½å·²ç»é¢†è¯ã€‚è™½ç„¶è¿™é‡Œé¢æœ‰å¾ˆå¤šå¤–åœ¨çš„å› ç´ ä¿ƒæˆæˆ‘å’Œå¥¹è¿™ä¹ˆå¿«èƒ½åœ¨ä¸€èµ·ï¼Œä½†æ˜¯æ›´é‡è¦çš„æ˜¯æˆ‘ä»¬éƒ½å½¼æ­¤ç›¸ä¿¡å¯¹æ–¹æ˜¯å¯¹çš„äººï¼Œè¿˜è®°å¾—æˆ‘åœ¨çŸ³å®¶åº„è€ƒç ”çš„æ—¶å€™å¥¹åœ¨åŒ—äº¬å·¥ä½œ,é‚£æ—¶å€™ä¹Ÿè®¸æˆ‘å’Œå¥¹å¯¹çˆ±æƒ…å¹¶ä¸æˆç†Ÿ,å¥¹çš„ä¸–ç•Œæˆ‘ä¸æ‡‚,æˆ‘çš„çƒ¦æ¼å¥¹ä¹Ÿä¸æ‡‚ã€‚æœ‰è¿‡åšæŒ,æœ‰è¿‡æ”¾å¼ƒ,æœ‰è¿‡å¼€å¿ƒ,ä¹Ÿæœ‰è¿‡éš¾è¿‡ã€‚ç„¶åæˆ‘è€ƒç ”å®Œæ¥åˆ°åŒ—äº¬æ‰¾å·¥ä½œæš‚å±…å¥½åŒå­¦ä½æ‰€ï¼ŒæŠ•ç®€å†ã€é¢è¯•æˆäº†å®¶å¸¸ä¾¿é¥­ï¼Œå½“æ—¶è‡ªå·±å†…å¿ƒå¹¶ä¸æ˜¯ç‰¹åˆ«æ„¿æ„ä¸Šç­æ€»è§‰å¾—è‡ªå·±èƒ½è€ƒä¸Šï¼Œæ‰¾å·¥ä½œçš„è¿™æ®µæ—¶é—´æˆ‘å’Œå¥¹ä¹Ÿæ˜¯æœ‰è§é¢çš„ï¼Œå¥¹åŸ‹æ€¨æˆ‘æ²¡åˆ«äººå¥½ã€åŸ‹æ€¨æˆ‘ä»€ä¹ˆéƒ½ä¸æ‡‚ï¼Œæ¥ç€å°±æ˜¯è€ƒç ”å¤±è´¥çš„æ¶ˆæ¯,é‚£æ—¶å€™çš„æˆ‘å°±æ˜¯è¿·èŒ«,åœ¨ç„¶åå°±æ˜¯æ‰¾äººæ‰˜å…³ç³»è¿›äº†ä¸€å®¶å…¬å¸,é‚£æ—¶å€™æˆ‘åˆ«æ— é€‰æ‹©,å®¶é‡Œçš„ã€å‘¨å›´äººçš„å‹åŠ›ï¼Œé‚£æ—¶å€™å¯ä»¥ç”¨5ä¸ªå­—æ¥å½¢å®¹è‡ªå·±çš„å†…å¿ƒä¸ç”˜äºç°çŠ¶ï¼Œä½†æ˜¯ç°å®å¾€å¾€æ˜¯æ®‹é…·çš„ï¼Œè‡³ä»Šæƒ³èµ·æ¥éå¸¸æ„Ÿè°¢å¥¹çš„åšæŒè®©æˆ‘å˜å¾—è¶Šæ¥è¶Šå¥½ï¼Œæˆ‘æƒ³å¯¹å¥¹è¯´è°¢è°¢ä½  ä¸è®ºå‘ç”Ÿä»€ä¹ˆã€ä¹Ÿä¸è®ºä»¥åå‘ç”Ÿä»€ä¹ˆï¼Œéƒ½ä¸è¦è®©è‡ªå·±å¿ƒçˆ±çš„äººæµæ³ªã€‚ å…¬å¸å°æ’æ›²&emsp;&emsp;ä¸Šé¢è¯´äº†æˆ‘çš„ç¬¬ä¸€å®¶å…¬å¸æ˜¯æ‰˜å…³ç³»è¿›æ¥çš„ï¼Œæœ¬æƒ³è‡ªå·±å¯ä»¥å¾—åˆ°ä¸°åšå¾…é‡å¯æ²¡æƒ³åˆ°å·¥èµ„ä½çš„å¯æ€œï¼Œé‚£æ—¶å€™æœ‰ä»€ä¹ˆåŠæ³•ï¼Œé¢å¯¹åŠå¹´çš„è€ƒç ”ç©ºç¼ºã€æŠ€æœ¯ç©ºç¼ºåªèƒ½å…ˆåœ¨é‚£é‡Œå¹²ç€ï¼Œå¼€å¿ƒçš„æ˜¯åœ¨é‚£é‡Œé¢è®¤è¯†äº†ä¸é”™çš„å°ä¼™ä¼´ï¼Œä»–ä»¬å¯¹æˆ‘ä¹Ÿæ˜¯æ£’æ£’å“’ï¼Œè¿˜æœ‰æˆ‘çš„è¿ªä¹Ÿæ˜¯ä¸é”™å“’ï¼Œçœ‹åˆ°ä»–æ€»è®©æˆ‘æƒ³èµ·æˆ‘çš„åˆä¸­åŒæ¡ŒåŒå­¦ï¼Œä¸è¯´å•¦ï¼æ€»ä¹‹é™¤äº†å…¬å¸å¤–ï¼Œè¿˜æ˜¯ä¸é”™çš„ä¸€æ¬¡ç»å†ã€‚å¹²äº†å‡ ä¸ªæœˆä¹‹åæˆ‘å®åœ¨å¾…ä¸ä¸‹å»ï¼Œå½“ç„¶äº†ä¸èƒ½å› ä¸ºè¿™äº›å°±å¦å®šè¿™ä¸ªå…¬å¸çš„ä»·å€¼ï¼Œåªæ˜¯å› ä¸ºè¿™é‡Œæ²¡æœ‰æˆ‘æƒ³è¦çš„ç”Ÿæ´»ã€‚å½“ç„¶è¿™æœŸé—´å¥¹å¯¹æˆ‘çš„æ”¯æŒå’Œé¼“åŠ±æ˜¯æœ€å¤šçš„ï¼Œæˆ‘è·³äº†ï¼Œåœ¨1024é‚£å¤©æˆ‘æ­£å¼çš„ç¦»å¼€äº†å…¬å¸ï¼Œç¦»å¼€äº†è‡ªå·±ä¸å–œæ¬¢çš„ç©ºæ°” &emsp;&emsp;1025æˆ‘åœ¨æ–°çš„å…¬å¸å…¥èŒï¼Œå¹¶ç»§ç»­å¼€å§‹äº†æ•²ä»£ç çš„ç”Ÿæ´»ã€‚åœ¨è¿™é‡Œå­¦åˆ°äº†å¥½å¤šä¸œè¥¿å‘¨å›´çš„åŒäº‹ä¹Ÿå¾ˆå’Œç¦ï¼Œæ›´é‡è¦çš„æ˜¯è‡ªå·±ç”Ÿæ´»ä¹Ÿæœ‰äº†ä¸€å®šçš„æ”¹å–„ï¼Œåˆ°ç°åœ¨æ„Ÿè§‰ç”Ÿæ´»å¾ˆå……å®ï¼Œå…¬å¸çš„å­¦ä¹ æ°›å›´è¿˜æ˜¯æ£’æ£’å“’ã€‚ æŠ€æœ¯å°æˆå°± æ¶æ„æ€æƒ³ &emsp;&emsp;ç”±MVCå¼€å‘ï¼Œåˆ°ä¹‹åçš„MVPå¼€å‘ï¼Œæœ€åæ˜¯MVVMçš„å­¦ä¹ ï¼Œè™½ç„¶è‡ªå·±åœ¨é¡¹ç›®ä¹Ÿä½¿ç”¨äº†MVVMä½†æ˜¯å‡ºç°bugè°ƒè¯•é‚£æ˜¯çœŸçš„æ…¢ UIç‰¹æ•ˆ &emsp;&emsp;è¿™ä¸€å¹´ä¹Ÿç®—æ˜¯å¤§éƒ¨åˆ†éƒ½åœ¨é«˜çº§UIï¼Œä»5.0 v7/matrialdesignåŒ…æä¾›çš„æ§ä»¶ä½¿ç”¨ï¼Œæ¥ç€æ˜¯è‡ªå®šä¹‰æ§ä»¶Viewã€ViewGroupçš„ç©è€ï¼Œæœ€åæ˜¯å¯¹UIç»˜åˆ¶ã€äº‹ä»¶ä¼ é€’ã€æ–°æ§ä»¶æºç åˆ†æï¼Œæ¯æ®µæ—¶é—´éƒ½æœ‰æ¯æ®µæ—¶é—´çš„æ„Ÿæ‚Ÿå’Œæ€æƒ³ç¢°æ’ æ¡†æ¶å­¦ä¹  &emsp;&emsp;ButterKnifeçš„å­¦ä¹ å¹¶èƒ½æ‰‹å†™ç®€å•ButterKnifeæ¡†æ¶ï¼›Gsonçš„å­¦ä¹ å¹¶èƒ½æ‰‹å†™ç®€å•JSonè§£æå¯¹è±¡æ¡†æ¶ï¼›å¯¹è±¡æ•°æ®åº“çš„å­¦ä¹ å¹¶èƒ½æ‰‹å†™é¢å‘å¯¹è±¡æ•°æ®åº“æ¡†æ¶ NDKå­¦ä¹  &emsp;&emsp;NDKæ˜¯æˆ‘åæœŸå­¦ä¹ çš„ç§‘ç›®ï¼Œå­¦ä¹ äº†Cè¯­è¨€ã€C++è¯­è¨€ä»¥åŠJniçš„å¼€å‘ï¼Œåˆ°æœ€åNDKå¼€å‘ï¼›ç”¨NDKå¼€å‘è¿˜å¼„äº†ä¸ªQQå˜å£°ç‰¹æ•ˆï¼Œè™½ç„¶åœ¨å­¦ä¹ è§†é¢‘ç¼–è§£ç é‚£é‡Œæœ‰äº›ä¸æ‡‚ï¼Œä¹‹åè¿˜éœ€è¦èŠ±è´¹å¤§é‡çš„ç²¾åŠ›å»æ”»å…‹è¿™é‡Œ RNå­¦ä¹  &emsp;&emsp;RNä¹‹å‰ä¹Ÿå­¦ä¹ è¿‡ï¼Œåªä¸è¿‡ä¹‹å‰å…¬å¸æ²¡æœ‰å¸¦èŠ‚å¥å°±æœæ–­æ”¾å¼ƒäº†ï¼ŒRNä¹Ÿæ˜¯æœ€è¿‘å‡ å¤©æ‰å¼€å§‹çš„ï¼Œä¹‹æ‰€ä»¥è¿™ä¹ˆç€æ€¥ä¹Ÿæ˜¯å› ä¸ºè‡ªå·±ä¸æƒ³åœ¨åº”ç”¨å±‚å¾…ä¸‹å»äº†ï¼Œæ‰€ä»¥æƒ³å¾€å…¶ä»–è¯­è¨€ç©è€ç©è€ï¼Œå­¦ä¹ è¿›åº¦ä¹Ÿæ˜¯å¾ˆç´§å¼ çš„ï¼Œç›®å‰åˆ°äº†Reactçš„ç”Ÿå‘½å‘¨æœŸå­¦ä¹  git &emsp;&emsp;Gitä¹Ÿæ˜¯åœ¨æ–°å…¬å¸æ‰å¼€å§‹ç ”ç©¶çš„ï¼Œå¹¶å¼„äº†è¿™ä¹ˆä¸€ä¸ªåšå®¢ï¼Œä½¿ç”¨gitå’Œåˆ«äººä¸€åŒå»ç»´æŠ¤ä¸€åŒå»åˆ†äº«æŠ€æœ¯ï¼Œå½“ç„¶è‡ªå·±çš„è¿™æ–¹é¢æŠ€æœ¯è¿˜æ˜¯éå¸¸çš„æ¬ ç¼ºï¼Œå½“ç„¶äº†ä¹Ÿåªæœ‰åœ¨ç”¨çš„è¿‡ç¨‹ä¸­æ‰èƒ½å»å­¦ä¹ ï¼Œæ‰€ä»¥å¸Œæœ›è¿™ä¸ªåšå®¢è‡ªå·±å¯ä»¥å­¦åˆ°å¾ˆå¤šçš„gitæ“ä½œä¸Šçš„çŸ¥è¯† å…¶ä»– &emsp;&emsp;å…¶ä»–çš„ä¹Ÿå°±æ˜¯å­¦ä¹ å¥¹å…¬å¸çš„æŠ€æœ¯äº†ï¼Œè™½ç„¶å’Œå¥¹ä¸€èµ·å­¦äº†ä¸€äº›ä½†æ˜¯ä¹Ÿæ˜¯ä¸æ‡‚å‘€ï¼å¯è§æˆ‘æŠ€æœ¯æ˜¯å¤šä¹ˆçš„æ¸£ï¼ï¼ï¼ï¼ 2018å°æœŸæœ› æˆ‘å¸Œæœ›æˆ‘å­¦çš„çŸ¥è¯†è¦å¤šåº”ç”¨åˆ°é¡¹ç›®ä¸­ï¼Œå³ä½¿è‡ªå·±å…¬å¸çš„é¡¹ç›®ä¸ç”¨è¦å¤šå¼€å‘è‡ªå·±çš„ä¸Šçº¿é¡¹ç›®å¹¶ç»´æŠ¤ æˆ‘å†³å®šæ˜å¹´æˆ‘è¦è¯»12æœ¬ä¹¦ï¼Œ5æœ¬æŠ€æœ¯ã€7æœ¬éæŠ€æœ¯ï¼Œä¸ºå•¥æ˜¯10æœ¬ä¹¦å‘¢ï¼Ÿå°±æ˜¯åœ¨è¿‡å¹´ä¹‹ååˆ°è¿™æ—¶å€™æ­£å¥½æ¯ä¸ªæœˆè¯»ä¸€æœ¬ï¼Œå…·ä½“çŸ¥é“çš„ä¹¦ç±æ˜¯Androidå¼€å‘è‰ºæœ¯æ¢ç´¢ã€React Nativeã€JavaScripté«˜çº§ç¼–ç¨‹ æˆ‘å†³å®šæ˜å¹´å‘¨å…­æ—¥å¤šæŠ½å‡ºç‚¹æ—¶é—´å¸¦å¥¹åœ¨åŒ—äº¬å»ç©ç©ï¼Œä¾‹å¦‚ä¹°äº†ç¾½æ¯›çƒå»æ‰“çƒã€å»é€›å…¬å›­ã€‚æš‚æ—¶å…ˆå®šè¿™æ ·çš„å§ï¼åæ­£ä¸èƒ½å®…åœ¨å±‹å­é‡Œï¼Œå¦‚æœæœ‰æœºä¼šçš„è¯å¯ä»¥å‡ºåŒ—äº¬å¸‚ç©è€å°†ä¼šå†™åœ¨æ˜å¹´è¿™æ—¶å€™çš„æ–‡ç« ä¸­ æˆ‘å°†å¤šå¤šç ”ç©¶pythonå¹¶ä¸”å°†è½¬å…¥äººå·¥æ™ºèƒ½ï¼Œè¿™ä¸ªè½¬æŠ˜æˆ‘ä¸€å®šæ˜¯è¦å®Œæˆçš„ä¹Ÿæ˜¯å¿…é¡»å®Œæˆçš„ æ˜å¹´æˆ‘å°†ç”¨æˆ‘çš„åŠªåŠ›åœ¨å»æ‰“é€ ä¸€ä¸ªæ–°çš„è¾‰ç…Œ &emsp;&emsp;è™½ç„¶ä»Šå¹´å°±è¦è¿‡å»äº†ï¼Œè‡ªå·±æ‰€å¾—åˆ°çš„æˆå°±æ˜¯å¾ˆå°‘ï¼Œå¯èƒ½æ˜¯å› ä¸ºä»å­¦ä¹ åˆ°ä»ä¸šè€…è½¬å˜çš„åŸå› ï¼Œä½†æ˜¯æ˜å¹´æˆ‘å°†çæƒœæ¯ä¸€åˆ†æ¯ä¸€ç§’å»è¾¾åˆ°è‡ªå·±æƒ³è¦çš„å¢ƒç•Œã€‚ æœªæ¥çš„ä½ å°†ä¼šæ„Ÿè°¢å½“åˆåŠªåŠ›çš„è‡ªå·± &emsp;&emsp;ä»Šå¤©ç®—æ˜¯æ‰å†™å®Œï¼Œå†æ—¶1ä¸ªå°å¤œæ™š2ä¸ªå°ä¸­åˆï¼Œå‰å¤©æ˜¯åœ£è¯èŠ‚ï¼Œå¦‚æœè®©æˆ‘è®¸ä¸ªæ„¿æœ›çš„è¯ï¼Œæˆ‘å¸Œæœ›å¥¹åšä¸€ä¸ªå¼€å¼€å¿ƒå¿ƒçš„å°åƒè´§ï¼ &emsp;&emsp;ç»™å¥¹äº®ä¸ªç…§ï¼Œç¾å“’å“’ï¼]]></content>
      <categories>
        <category>æ—¶å…‰è¿½æº¯</category>
      </categories>
      <tags>
        <tag>æ—¶å…‰è¿½æº¯</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[hexo markdownè¯­æ³•]]></title>
    <url>%2F2017%2F12%2F22%2F20171230_hexo%20markdown%E8%AF%AD%E6%B3%95%2F</url>
    <content type="text"><![CDATA[ç›®å½•[TOC] #éŸ³ä¹ æ–‡å­—ç²—ä½“ æ–œä½“ åŠ ç²—æ–œä½“ åˆ é™¤çº¿ å¤–é“¾æ¥èŠ±èŠ±å¤§ä¸–ç•Œ ä¹Ÿå¯ä»¥è¿™æ · ä¸ºæ®µè½è®¾ç½®é˜´å½± è®¾ç½®é˜´å½±æ•ˆæœ å¤šå±‚åµŒå¥— åˆ†å‰²çº¿ æ¢è¡Œä»Šå¤©å¤©æ°”ä¸é”™æˆ‘ä»¬å»ç©å§ æ’å…¥é¢œæ–‡å­—ç›´æ¥å»è¯¥ç½‘å€å»copyå°±å¯ä»¥äº†é¢œæ–‡å­—ç½‘å€ ãƒ½(ï¿£Ï‰ï¿£(ï¿£Ï‰ï¿£ã€ƒ)ã‚ è¡¨æƒ… é™æ€è¡¨æƒ…è¡¨æƒ…çš„è¯ç›´æ¥å»è¯¥ç½‘å€ç›´æ¥copyå°±å¯ä»¥äº†å¥½å¤šè¡¨æƒ… ğŸ˜€ğŸ˜ åŠ¨æ€è¡¨æƒ…çš„è¯å¯ä»¥ä½¿ç”¨æˆ‘å­˜å…¥äº‘å­˜å‚¨çš„è¡¨æƒ…åŒ…ï¼Œå¦‚æœæœ‰å…¶ä»–çš„å¯ä»¥å‘Šè¯‰æˆ‘ï¼Œæˆ‘å°†å…¶ä¸Šä¼ å» nextä¸»é¢˜è‡ªå¸¦ä¸€äº›æ ·å¼å¯ä»¥ä½¿ç”¨http://fontawesome.io/examples/ blah blah blah blah blah blah Content (md partial supported) ä»£ç ä¸€è¡Œä»£ç æ¬¢è¿ä½¿ç”¨èŠ±èŠ±ä¸–ç•Œ å¤šè¡Œä»£ç 12345678910@requires_authorizationdef somefunc(param1='', param2=0): '''A docstring''' if param1 &gt; param2: # interesting print 'Greater' return (param2 - param1 + 1) or Noneclass SomeClass: pass&gt;&gt;&gt; message = '''interpreter... prompt''' åˆ—è¡¨æœ‰åºåˆ—è¡¨ æœ‰åº1 æœ‰åº2 æœ‰åº3 æ— åºåˆ—è¡¨ Red Green Blue è¡¨æ ¼ Item Value Qty Computer 1600 USD 5 Phone 12 USD 12 Pipe 1 USD 234 å›¾ç‰‡]]></content>
      <categories>
        <category>markdownè¯­æ³•</category>
      </categories>
      <tags>
        <tag>markdownè¯­æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Kotlinå®æˆ˜(æ•°æ®åˆ—è¡¨)]]></title>
    <url>%2F2017%2F07%2F03%2F20170703_Kotlin%E5%AE%9E%E6%88%98(%E6%95%B0%E6%8D%AE%E5%88%97%E8%A1%A8)%2F</url>
    <content type="text"><![CDATA[ä¸Šä¸€ç¯‡æˆ‘ä»¬ä»‹ç»äº†Ankoåº“çš„ä½¿ç”¨ï¼Œè¿™é‡Œæˆ‘ä»¬ç”¨Ankoæ¥åšä¸€ä¸ªç®€å•çš„RecyclerViewåˆ—è¡¨ åºŸè¯ä¸è¯´ï¼Œç›´æ¥æ’¸ä»£ç  Starté¦–å…ˆæˆ‘ä»¬ä½¿ç”¨Ankoåœ¨ä»£ç é‡Œé¢å†™ä¸€ä¸ªRecyclerViewï¼Œçœ‹ä»£ç 12345678910 verticalLayout &#123; recyclerView &#123; id = R.id.main_rv //è®¾ç½®å‚æ•° ankoä¸ºActivityæ‰©å±•äº†actçš„å­—æ®µ layoutManager = LinearLayoutManager(act)//layoutManager = LinearLayoutManager (this@MainActivity) padding = dip(20) adapter = this@MainActivity.adapter &#125; &#125; æ¥ä¸‹æ¥æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªAdapter12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758class MyAdapter(val ctx: Context, val items: ArrayList&lt;Resp&gt;): RecyclerView.Adapter&lt;MyAdapter.MyViewHolder&gt;()&#123; override fun onBindViewHolder(holder: MyViewHolder?, position: Int) &#123; val resp: Resp = items.get(position) Glide.with(ctx).load(resp.owner.avatar_url).into(holder?.iv) //ï¼Ÿ.ä»£è¡¨holderå¯ä¸ºç©º holder?.tv1?.text = resp.name holder?.tv2?.text = resp.full_name &#125; override fun getItemCount(): Int = items.size override fun onCreateViewHolder(parent: ViewGroup?, viewType: Int): MyViewHolder &#123; //with : åœ¨ç»™å®šå¯¹è±¡ä¸Šè°ƒç”¨lambdaä¸­çš„æ‰€æœ‰æ–¹æ³• val view = with(ctx)&#123; verticalLayout &#123; orientation = LinearLayout.HORIZONTAL gravity = Gravity.CENTER_VERTICAL imageView &#123; id = R.id.iv lparams &#123; rightMargin = dip(20) leftMargin = dip(15) width = dip(80) height = dip(80) &#125; //è®¾ç½®é»˜è®¤å›¾ç‰‡ imageResource = R.mipmap.ic_launcher &#125; verticalLayout &#123; orientation = LinearLayout.VERTICAL textView &#123; id = R.id.tv1 textSize = 14f textColor = 0xff0000.opaque &#125; textView &#123; id = R.id.tv2 textSize = 16f textColor = 0x000000 &#125; &#125; &#125; &#125; val holder = MyViewHolder(view) return holder &#125; class MyViewHolder(itemView: View): RecyclerView.ViewHolder(itemView)&#123; //åœ¨ç»™å®šçš„Viewä¸ŠæŸ¥æ‰¾æŒ‡å®šçš„idè§†å›¾ val iv: ImageView = itemView.find(R.id.iv) val tv1: TextView = itemView.find(R.id.tv1) val tv2: TextView = itemView.find(R.id.tv2) &#125;&#125; æ˜¯ä¸æ˜¯å¾ˆç‚«é…·ï¼Œå½“ç„¶è¿™æ ·å†™æ„Ÿè§‰ä»£ç å¤ªå¤šäº†ï¼Œæˆ‘ä»¬éœ€è¦å°†ç”Ÿæˆå¸ƒå±€çš„ä»£ç å•ç‹¬ä½¿ç”¨ä¸€ä¸ªç±»ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªç±»æ¥ç»§æ‰¿AnkoComponentæ¥å†™ç‹¬ç«‹çš„ä¸€ä¸ªå¸ƒå±€ï¼Œå¦‚æœå®‰è£…æ’ä»¶è¿˜å¯ä»¥é¢„è§ˆç•Œé¢çš„æ•ˆæœï¼Œå…·ä½“çš„ä»£ç å¦‚ä¸‹ï¼š12345678910111213141516171819202122232425class RecycleUI : AnkoComponent&lt;MyAdapter&gt; &#123; override fun createView(ui: AnkoContext&lt;MyAdapter&gt;): View = with(ui) &#123; verticalLayout &#123; orientation = LinearLayout.HORIZONTAL gravity = Gravity.CENTER_VERTICAL imageView &#123; id = R.id.iv lparams &#123; rightMargin = dip(12) width = dip(80) height = dip(80) &#125; &#125; verticalLayout &#123; textView &#123; id = R.id.tv1 &#125; textView &#123; id = R.id.tv2 &#125; &#125; &#125; &#125;&#125; è¿™é‡Œæˆ‘ä»¬ä¹Ÿæ˜¯ä½¿ç”¨withæ¥ç”Ÿæˆç›¸åº”çš„Viewè§†å›¾ æœ€åä¾¿æ˜¯è¯·æ±‚æ•°æ®æ›´æ–°Adapterçš„æ“ä½œäº†1234567891011121314async(kotlinx.coroutines.experimental.android.UI)&#123; //å¯åŠ¨å­çº¿ç¨‹ val data: Deferred&lt;ArrayList&lt;Resp&gt;&gt; = bg&#123; //è¯»å–assetsé‡Œé¢çš„æ•°æ® val input = assets.open("data.json") val bytes = input.readBytes() input.close() //å°†å¾—åˆ°çš„jsonä¸²è§£ææˆå¯¹è±¡å¹¶è¿”å›ç»™data Gson().fromJson&lt;ArrayList&lt;Resp&gt;&gt;(String(bytes), getType&lt;ArrayList&lt;Resp&gt;&gt;()) &#125; items.clear() items.addAll(data.await()) //è¿™é‡Œé€šè¿‡è°ƒç”¨awaitæ–¹æ³•ä¼šä¸€ç›´ç­‰å¾…åå°çš„æ‰§è¡Œï¼Œå½“æ‰§è¡Œå®Œæ¯•å°†èµ‹å€¼ç»™itemé›†åˆï¼Œå¹¶æ›´æ–°é€‚é…å™¨ adapter.notifyDataSetChanged()]]></content>
      <categories>
        <category>Kotlin</category>
      </categories>
      <tags>
        <tag>Kotlin</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[KotlinåŸºç¡€ç¬¬äºŒå¼¹]]></title>
    <url>%2F2017%2F07%2F02%2F20170702_Kotlin%E5%9F%BA%E7%A1%80%E7%AC%AC%E4%BA%8C%E5%BC%B9%2F</url>
    <content type="text"><![CDATA[Kotlinæ˜¯ä¸€ä¸ªåŸºäºJVMçš„æ–°çš„ç¼–ç¨‹è¯­è¨€ï¼Œç”±JetBrainså¼€å‘ï¼Œç”±äºæ˜¯Googleæ¨èä½¿ç”¨çš„ï¼Œå¯è§å…¶é‡è¦æ€§ï¼Œå½“ä½ çœŸæ­£æ·±å…¥çš„æ—¶å€™ä¹Ÿä¼šå‘ç°kotlinçš„ä¼˜é›…ï¼Œè®©ä½ åœ¨å†™ä»£ç çš„æ—¶å€™çœæ—¶åˆçœåŠ› å¯¹äºKotlinçš„å­¦ä¹ ç½‘ä¸Šæœ‰å¥½å¤šï¼Œç°åœ¨åˆ†äº«ä¸€äº› å®˜æ–¹ç½‘å€ http://kotlinlang.org/docs/reference/ åˆ«äººçš„æ€»ç»“ https://github.com/youxin11544/Kotlin-learning antoåº“ https://github.com/Kotlin/anko/wiki åœ¨è¿™é‡Œä¸ä¼šåƒå®˜ç½‘é‚£æ ·ä¸€ä¸€çš„å»è®²è§£ï¼Œè‡ªå·±ä¹Ÿæ˜¯ä»å®˜ç½‘å»å­¦ä¹ ç„¶åå»çœ‹åˆ«äººçš„åšå®¢ï¼Œå¯¹äºçŸ¥è¯†è€Œè¨€å¯èƒ½å¹¶ä¸æ·±å…¥ï¼Œä½†å¯¹äºåˆå­¦è€…è€Œè¨€ä¹Ÿå€¼çš„ä¸€çœ‹ kotlinå§”æ‰˜æœºåˆ¶å§”æ‰˜æ¨¡å¼ä¹Ÿæ˜¯ä»£ç†æ¨¡å¼æ˜¯è½¯ä»¶è®¾è®¡æ¨¡å¼ä¸­çš„ä¸€é¡¹åŸºæœ¬æŠ€å·§ï¼Œåœ¨å§”æ‰˜æ¨¡å¼ä¸­ï¼Œæœ‰ä¸¤ä¸ªå¯¹è±¡å‚ä¸å¤„ç†åŒä¸€ä¸ªè¯·æ±‚ï¼Œæ¥å—è¯·æ±‚çš„å¯¹è±¡å°†è¯·æ±‚å§”æ‰˜ç»™å¦ä¸€ä¸ªå¯¹è±¡æ¥å¤„ç† åœ¨javaå’ŒAndroidç”¨åˆ°å§”æ‰˜æœºåˆ¶åœ¨AOPé‡Œï¼Œåœ¨javaä¸­ä½¿ç”¨ç»§æ‰¿InvocationHandleræ¥å£çš„æ–¹æ³•æ¥å®ç°ä»£ç†ï¼Œè€Œåœ¨Androidä¸­åˆ™ä½¿ç”¨AspectJçš„æ–¹å¼æ¥å®ç°ã€‚åœ¨è¿™é‡Œæˆ‘ä»¬æ¥è®²è§£ä¸€ä¸‹Kotlinçš„å§”æ‰˜æ¨¡å¼ ç±»å§”æ‰˜ä¹Ÿå°±æ˜¯ä¸Šé¢è®²çš„å§”æ‰˜æ¨¡å¼å®šä¹‰ï¼Œç„¶è€Œåœ¨Kotlinä¸­å®ç°èµ·æ¥æ›´åŠ çš„æ–¹ä¾¿æ›´åŠ çš„çµæ´»ï¼Œå¦‚ï¼š 123class MyList(list: ArrayList&lt;String&gt;) : Collection&lt;String&gt; by list &#123;&#125; è¿™ç§ä¹Ÿæ˜¯æ›¿ä»£ç»§æ‰¿çš„æ–¹å¼ï¼Œç›´æ¥ä½¿ç”¨byå…³é”®å­—å°±å°†Collectionçš„æ–¹æ³•å§”æ‰˜ç»™listå¯¹è±¡ å±æ€§å§”æ‰˜åœ¨Kotlinä¸­Delegatesç±»å†…ç½®äº†ä¸‰ç§å§”æ‰˜çš„æ–¹æ³•ï¼Œåˆ†åˆ«æ˜¯lazyã€notNull()ã€observable(â€œâ€)ã€vetoable(â€œâ€)ã€Mapå½¢å¼ lazy ç”¨äºè¿›è¡Œæ‡’åŠ è½½ï¼Œå³ç¬¬ä¸€æ¬¡ä½¿ç”¨çš„æ—¶å€™æ‰æ‰§è¡Œåˆå§‹åŒ–æ“ä½œ 1234//å½“ä½¿ç”¨çš„æ—¶å€™æ‰è¿›è¡Œåˆå§‹åŒ–ï¼ˆçº¿ç¨‹å®‰å…¨çš„ï¼‰val list: ArrayList&lt;String&gt; by lazy &#123; ArrayList&lt;String&gt;()&#125; notNull() ä½¿ç”¨äºé‚£äº›æ— æ³•å†åˆå§‹åŒ–é˜¶æ®µå°±ç¡®å®šå±æ€§å€¼çš„åœºåˆ 12//åˆå§‹åŒ–str,ç”¨äºä¸ºç©ºå±æ€§è¿›è¡Œåˆå§‹åŒ–çš„åœºæ™¯var str: String by Delegates.notNull&lt;String&gt;() observable() è§‚å¯Ÿè€…å’Œjavaçš„è§‚å¯Ÿè€…æ¨¡å¼å·®ä¸å¤š 12345//oldValueæ˜¯å˜åŒ–ä¹‹å‰çš„å€¼ newValueæœ€æ–°çš„å€¼var str: String by Delegates.observable("")&#123;//åˆå§‹å€¼ property, oldValue, newValue -&gt; println("$&#123;property.name&#125; old=$oldValue new=$newValue")&#125; vetoableï¼ˆï¼‰å¸¦æ¡ä»¶çš„å§”æ‰˜æœºåˆ¶ï¼Œé€šè¿‡è¿”å›çš„trueå’Œfalseæ¥ç¡®å®šoldValueæ˜¯ä¸Šä¸€ä¸ªè¿˜æ˜¯æœ€åˆçš„ 12345678910111213//è¿”å›trueå’Œobservableæ˜¯ä¸€æ ·çš„æ•ˆæœvar str1: String by Delegates.vetoable("")&#123; property, oldValue, newValue -&gt; println("$&#123;property.name&#125; old=$oldValue new=$newValue") true &#125;//è¿”å›falseåˆ™æ ‡å¿—oldValueæ°¸è¿œä¸ºåˆå§‹å€¼var str2: String by Delegates.vetoable("")&#123; property, oldValue, newValue -&gt; println("$&#123;property.name&#125; old=$oldValue new=$newValue") false&#125; Map é€šè¿‡ä¸€ç§å…¨æ–°çš„èµ‹å€¼æ–¹æ³•ç»™ç±»å±æ€§è¿›è¡Œèµ‹å€¼ 123456class User(val map: Map&lt;String,Any?&gt;)&#123; val name: String by map val age: Int by map&#125;val user = User(mapOf("a" to 1)) é™¤æ­¤ä¹‹å¤–æˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå®šä¹‰å§”æ‰˜ï¼Œå…·ä½“å®šä¹‰å¯ä»¿ç…§notNull()å§”æ‰˜ 1234567891011private class NotNullVar&lt;T: Any&gt;() : ReadWriteProperty&lt;Any?, T&gt; &#123; private var value: T? = null public override fun getValue(thisRef: Any?, property: KProperty&lt;*&gt;): T &#123; return value ?: throw IllegalStateException("Property $&#123;property.name&#125; should be initialized before get.") &#125; public override fun setValue(thisRef: Any?, property: KProperty&lt;*&gt;, value: T) &#123; this.value = value &#125;&#125; ä½ ä¹Ÿå¯ä»¥è®¾ç½®å¯è¯»çš„å§”æ‰˜æœºåˆ¶ï¼Œç»§æ‰¿ReadOnlyPropertyç±»å³å¯ kotlin lambdaè¡¨è¾¾å¼é¦–å…ˆå…ˆç»™å‡ºä¸€ä¸ªå°ä¾‹å­ 12val action = &#123;i: Int, j: Int -&gt; println("i=$i j=$j")&#125;;action(1,2) æ³¨æ„çš„æ˜¯lambdaè¡¨è¾¾å¼ç”¨{}åŒ…è£¹ï¼Œç®­å¤´å‰é¢æ˜¯å‚æ•°çš„å‚æ•°ï¼Œç®­å¤´åé¢æ˜¯å‡½æ•°ä½“ï¼›ä»è°ƒç”¨ä¸Šæ¥è¯´æ¯”javaç®€å•å¹¶ä¸”ä¼˜é›…äº†è®¸å¤šï¼Œä½†æ˜¯å®é™…ç”¨é€”å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥ä¸ºä¸€ä¸ªå‡½æ•°ä¼ ä¸€ä¸ªlambdaï¼Œå¦‚ï¼š 12345678910fun lambdaTest(arg1: Int, arg2: Int, oper: (a: Int, b: Int) -&gt; Int): Int &#123; var result: Int = Int.MIN_VALUE if (arg2 != 0) &#123; result = oper(arg1, arg2) &#125; return result&#125;fun main(args: Array&lt;String&gt;) &#123; lambdaTest(1, 2, &#123; a: Int, b: Int -&gt; a / b &#125;) æ—¢ç„¶æ˜¯ä¼ å‡½æ•°å½“ç„¶ä¹Ÿå¯ä»¥ä¼ é€’ä¸€ä¸ªå‡½æ•°è¿›å»ï¼Œå¸¸ä½¿ç”¨::ï¼Œè¿™é‡Œå»¶ä¼¸å‡ºå‡½æ•°çš„å¼•ç”¨ï¼Œå¦å¤–è¿˜æœ‰å±æ€§çš„å¼•ç”¨ï¼Œè¿™é‡Œ 12345listOf(1, 2, 3).forEach(::println)var name = "1"val p = ::namep.set/get å½“æœ€åä¸€ä¸ªå‚æ•°ä¸ºlambdaçš„æ—¶å€™ï¼Œå¯ä»¥å°†å¤§æ‹¬å·æ”¾åœ¨å¤–é¢ï¼Œå¦‚ï¼š 1lambdaTest(1, 2)&#123; a: Int, b: Int -&gt; a / b &#125; ç”¨lambdaè¡¨è¾¾å¼çš„æƒ…å†µè¿˜æ˜¯æŒºå¤šçš„ï¼Œä¾‹å¦‚åœ¨é›†åˆä¸­éå†ç­‰æ“ä½œ 12val list = arrayListOf(1, 2, 3) list.forEach &#123; value -&gt; &#125; kotlin è¿ç®—ç¬¦é‡è½½è¡¨è¾¾å¼12345class Rmb(var num: Int) &#123; operator fun plus(rmb: Any?) &#123; &#125;&#125; è¿™æ ·å°±å¯ä»¥ä½¿ç”¨Rmb(1) + Rmb(2)è¿›è¡Œè®¡ç®—äº†ï¼Œæ˜¯ä¸æ˜¯å¾ˆç®€å•ã€‚è¿™ç§æ“ä½œå’Œå‰é¢è®²çš„ä¸­ç¼€è¡¨è¾¾å¼ä¸€æ ·ï¼Œåªä¸è¿‡ä¸­é—´çš„æ˜¯è¿ç®—ç¬¦äº†è€Œå·² kotlin æ³¨è§£ä¸åå°„Kotlinçš„æ³¨è§£å’Œjavaæ˜¯ç±»ä¼¼çš„ï¼Œå…ˆç¡®å®šæ³¨è§£çš„ç±»å‹ï¼Œç„¶åç¡®å®šç”Ÿå‘½å‘¨æœŸ12345@Target(AnnotationTarget.FIELD, AnnotationTarget.CLASS, AnnotationTarget.FUNCTION)@Retention(AnnotationRetention.SOURCE)annotation class Path ä½¿ç”¨çš„è¯ç›´æ¥åœ¨classå‰ funå‰é¢ 123@Path class UsePath(val p: String) &#123;&#125; Kotlinåå°„åˆ™é€šè¿‡12String::class.java String.javaClass è¿™ä¸¤ç§æ–¹å¼æ¥å¾—åˆ°Class&lt;?&gt;å¯¹è±¡ï¼Œè¿›ä¸€æ­¥å¯åå°„å¾—åˆ°ç›¸åº”çš„å±æ€§å’Œæ–¹æ³• è°ƒç”¨ç¬¬ä¸‰æ–¹åº“ä½¿ç”¨Kotlinè¿™é‡Œæˆ‘ä»¬ä»¥ButterKnifeä¸ºä¾‹ï¼Œé…ç½®ButterKnifeåœ¨Kotlinçš„ç¯å¢ƒ é¦–å…ˆåŠ å…¥kotlinçš„classpath123456789ext.kotlin_version = '1.1.2-3' repositories &#123; jcenter() &#125; dependencies &#123; classpath 'com.android.tools.build:gradle:2.3.1' classpath "org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version" &#125; ç„¶åæ·»åŠ kotlinä¾èµ–12apply plugin: 'kotlin-android'compile "org.jetbrains.kotlin:kotlin-stdlib-jre7:$kotlin_version" æœ€ååŠ å…¥ButterKnifeä¾èµ–ï¼Œè¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯å¦å¤–ä¹Ÿæ·»åŠ kaptæ’ä»¶123apply plugin: 'kotlin-kapt' compile 'com.jakewharton:butterknife:8.6.0' kapt 'com.jakewharton:butterknife-compiler:8.6.0' è¿™æ ·kaptä¼šå°†ButterKnifeçš„javaä»£ç è½¬åŒ–ä¸ºkotlinä»£ç  è‡³æ­¤ç¯å¢ƒå°±é…ç½®å¥½äº†ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥åœ¨ç½‘ä¸Šæœä¸€æœï¼Œè¿™é‡Œä¹Ÿå°±æ˜¯åšä¸ªç¬”è®° Anko Dialogå¯¹äºAnkoçš„Dialogç”¨çš„æœ€å¤šçš„ä¹ŸToastçš„ä½¿ç”¨ï¼Œåœ¨Ankoä¸­ä½¿ç”¨toastæ˜¯ç›¸å½“çš„ç®€å•1234fun open_toast(view: View)&#123; toast("toast") longToast("long toast")&#125; ç„¶åå°±æ˜¯AlertDialogçš„ä½¿ç”¨ä¹Ÿæ˜¯ä¸€çœ‹å°±ä¼šç”¨çš„é‚£ç§12345678910111213fun open_alert(view: View)&#123;alert("Hi,I'm Roy","Have you tried turning it off and on again?")&#123; yesButton &#123; toast("yes") &#125; noButton &#123; toast("no") &#125;&#125;.show()//å½“ç„¶ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰çš„Viewalert&#123; customView&#123; editText() &#125;&#125;&#125; å½“ç„¶è¿˜æœ‰å…¶å®ƒçš„å¼¹æ¡†è¿™é‡Œå°±ä¸ä¸€ä¸€ä»‹ç»ï¼Œå…·ä½“è¯·çœ‹å®˜æ–¹ Anko Intentç›¸æ¯”ä¹‹å‰çš„Intentæ¥è¯´Ankoæä¾›çš„æ›´åŠ çš„æ–¹ä¾¿ï¼Œä½¿ç”¨å¦‚ä¸‹ startActivity(intentFor&lt;AnkoActivity01&gt;(&quot;id&quot; to 5).singleTop()) å…¶ä»–çš„ä¸€äº›ä½¿ç”¨å¦‚ä¸‹ï¼š Anko Logå¯¹äºLogï¼ŒAnkoè§£é‡ŠAndroidSDKæä¾›çš„Logä¹Ÿæ˜¯éå¸¸çš„ç®€å•ï¼Œå°½ç®¡æ–¹æ³•éœ€è¦ä½ ä¼ é€’æ ‡ç­¾å‚æ•°ï¼Œä½†ä½¿ç”¨èµ·æ¥ä¹Ÿæ˜¯éå¸¸çš„ç®€å•ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨AnkoLoggeræ¥æ¶ˆé™¤è¿™ä¸€ç‚¹ å®ç°AnkoLoggerçš„æ–¹å¼ info(&quot;this is second log info&quot;) //è¿™ç§å¸¦lambdaè¡¨è¾¾å¼çš„è¿™ç§ä¼šå»è®¡ç®—Log.isLoggable(tag, Log.INFO)æ˜¯å¦ä¸ºtrueï¼Œä¸ºtrueçš„è¯æ‰æ‰“å° info { &quot;this is third log info&quot; } ä½¿ç”¨å…¶å¯¹è±¡çš„æ–¹å¼ val logWithASpecificTag = AnkoLogger(&quot;lypop&quot;) logWithASpecificTag.info { &quot;this is Log info&quot; } ç¬¬ä¸€ç§Tagé»˜è®¤æ˜¯ç±»åï¼Œç¬¬äºŒç§å¯ä»¥è‡ªå®šä¹‰å…¶Tag Anko helperä½ å¯ä»¥åœ¨ä½ çš„é¡¹ç›®ä¸­ä½¿ç”¨å¸®åŠ©è€…æ¥ç®€åŒ–ä½ çš„ä»£ç ï¼Œä¾‹å¦‚Colorã€Dimenç­‰ï¼Œé¢œè‰²é€æ˜åº¦ç›´æ¥è‰²å€¼.opaqueå°±å¯ä»¥ï¼Œå°ºå¯¸çš„è¯ç›´æ¥ä½¿ç”¨dip(dipValue)ã€sp(spValue)å°±å¯ä»¥ã€‚åœ¨è¿™é‡Œé¢è¿˜æœ‰ä¸€ä¸ªå°±æ˜¯applyRecursively()ç”¨æ¥æ§åˆ¶å­Viewçš„æ“ä½œï¼Œå¦‚ï¼š12345678910111213141516 verticalLayout &#123; textView&#123; text = "EditText01" backgroundColor = 0xff000.opaque textSize = 14f &#125; textView &#123; text = "EditText02" backgroundColor = 0x99.gray.opaque textSize = 23f &#125;&#125;.applyRecursively &#123;//å¦‚æœæ˜¯ViewGroupçš„è¯å¯ä»¥ä½¿ç”¨applyRecursivelyæ¥ä¸ºæ¯ä¸ªChild Viewè¿›è¡Œè®¾ç½® view -&gt; when(view)&#123; is TextView -&gt; view.textColor = Color.RED &#125; &#125; Anko CoroutinesAnkoè¿˜æä¾›äº†åç¨‹çš„ç”¨æ¥åšä¸€äº›è€—æ—¶çš„æ“ä½œï¼Œæä¾›çš„æ“ä½œä¸ºbg{},å…·ä½“ä»£ç å¦‚ä¸‹ï¼š async(UI){//UIçº¿ç¨‹ val data: Deferred&lt;MyBean&gt; = bg {//åå°çº¿ç¨‹ // Runs in background MyBean() } showData(data.await()) //awaitæ–¹æ³•å°†ä¸€ç›´ç­‰å¾…bgè¿”å›çš„æ•°æ® } ä¸ºäº†é˜²æ­¢å†…å­˜æ³„æ¼æˆ‘ä»¬å¸¸ä¼šä½¿ç”¨å¼±å¼•ç”¨ï¼Œåœ¨Ankoä¸­ä½¿ç”¨å¼±å¼•ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š val ref: Ref&lt;AnkoActivity05&gt; = this.asReference() async(UI){ //refæ›¿ä»£äº†this@AnkoActivity05 ref().showData() } Anko Layouté‚£æˆ‘ä»¬å…ˆæ¥è¯´ä¸€ä¸‹æ™®é€šå†™Androidå¸ƒå±€æœ‰å•¥ç¼ºç‚¹ å®ƒä¸æ˜¯ç±»å‹å®‰å…¨çš„å’Œä¸æ˜¯ç©ºå®‰å…¨ å®ƒè¿«ä½¿æ‚¨ä¸ºæ¯ä¸ªå¸ƒå±€éƒ½ç¼–å†™ç›¸åŒçš„ä»£ç  åœ¨è®¾å¤‡ä¸Šè§£æxmlæµªè´¹CPUæ—¶é—´å’Œç”µæ±  æœ€é‡è¦çš„æ˜¯å®ƒä¸å…è®¸ä»£ç é‡ç”¨ é‚£Kotlinä¸è¡Œå—?ä¸ºä»€ä¹ˆè¿˜è¦ç”¨ankoå‘¢ï¼Ÿ å®˜æ–¹è§£é‡Šè¯´Kotliné‚£ç§æ˜¯è§£å†³äº†ä¸èƒ½ç¼–ç¨‹ç”ŸæˆUIï¼Œä½†æ˜¯ç”¨Kotlinä»£ç å†™å‡ºæ¥çš„UIéš¾ä»¥ç»´æŠ¤æ‰€ä»¥æ‰å‡ºç°äº†ankoåº“ï¼Œå…·ä½“ç›¸åº”çš„ä»£ç è¿˜è¯·çœ‹å®˜ç½‘ã€‚ï¼ˆå…¶å®ä¹Ÿæ²¡å¿…è¦çœ‹ï¼Œæ¯•ç«Ÿå‡ºæ¥äº†ä¸€ç§åº“å¿…ç„¶æœ‰å…¶å­˜åœ¨çš„åŸå› ï¼‰123456789101112131415 verticalLayout &#123; padding = dip(30) button("say")&#123; onClick &#123;toast("Hello,$&#123;if (it is TextView) it.text else ""&#125;") &#125; &#125; button(R.string.app_name) button&#123; textResource = R.string.app_name &#125;.lparams &#123; //å¦‚æœæŒ‡å®šäº† lparams ä½†æ˜¯æ²¡æœ‰æŒ‡å®š width æˆ–è€… heightï¼Œé‚£ä¹ˆé»˜è®¤æ˜¯ â€œwrapContentâ€ width = matchParent topMargin = dip(10) horizontalMargin = dip(5) &#125;&#125; Activityæ²¡æœ‰æ˜¾ç¤ºè°ƒç”¨setContentViewï¼Œankoä¼šè‡ªåŠ¨ä¸ºActivityè®¾ç½®Content View è¿™é‡Œåˆ—ä¸¾äº†buttonçš„ä¸‰ç§åˆ›å»ºå½¢å¼å’Œä¸ºå…¶è®¾ç½®å‚æ•°å½“ç„¶åœ¨Activity/Fragmentä¹Ÿä¼šä½¿ç”¨xmlå¸ƒå±€ï¼Œankoä¹Ÿä¸ºæˆ‘ä»¬æä¾›äº†ç®€å•çš„åˆ›å»ºæ§ä»¶å¯¹è±¡çš„æ–¹å¼ å¯¹è±¡çš„åå­—å°±æ˜¯æ§ä»¶çš„ID ä½¿ç”¨find(R.id.name)ä¹Ÿå¯ä»¥ å¯ä»¥çœ‹å‡ºè¿™å‡ ç§éƒ½æ¯”Androidçš„findViewByIdè¦èˆ’é€‚çš„å¤š å½“ç„¶ä»£ç ä¸­è¿˜å¯èƒ½ä¼šæœ‰ include 123include&lt;View&gt;(R.layout.something) &#123; backgroundColor = Color.RED&#125;.lparams(width = matchParent) &#123; margin = dip(12) &#125; è‡ªå®šä¹‰View 123456789inline fun ViewManager.myView(init: MyView.() -&gt; Unit): MyView &#123; return ankoView(&#123; MyView(it) &#125;, 0, init)&#125;class MyView(ctx: Context) : View(ctx) &#123; fun test() &#123; &#125;&#125; ä½¿ç”¨çš„æ—¶å€™å’Œä¸Šé¢ä½¿ç”¨æ–¹æ³•ä¸€æ ·ç›´æ¥ç”¨myView{} ä½†æ˜¯éå¸¸é—æ†¾çš„æ˜¯æ²¡æœ‰é¢„è§ˆç•Œé¢ï¼Œè™½ç„¶ankoæä¾›äº†æ”¯æŒæ’ä»¶ï¼Œä½†éå¸¸é—æ†¾çš„æ˜¯ä»…æ”¯æŒAndroidStudio2.4+ è¿™æ ·æˆ‘ä»¬å°±åˆ›å»ºäº†ä¸€ä¸ªç®€å•çš„å¸ƒå±€1234567891011fun Context.sendSMS(number: String, text: String = ""): Boolean &#123; try &#123; val intent = Intent(Intent.ACTION_VIEW, Uri.parse("sms:$number")) intent.putExtra("sms_body", text) startActivity(intent) return true &#125; catch (e: Exception) &#123; e.printStackTrace() return false &#125;&#125; Anko SQLiteåœ¨ä¹‹å‰ä½¿ç”¨SQLiteOpenHelperï¼Œé€šå¸¸è°ƒç”¨getReadableDatabaseï¼ˆï¼‰æˆ–getWritableDatabaseï¼ˆï¼‰ï¼Œä½†æ˜¯æ‚¨å¿…é¡»ç¡®ä¿åœ¨æ¥æ”¶çš„SQLiteDatabaseä¸Šè°ƒç”¨closeï¼ˆï¼‰æ–¹æ³•ã€‚å¦‚æœæ‚¨ä»å¤šä¸ªçº¿ç¨‹ä¸­ä½¿ç”¨å®ƒï¼Œåˆ™å¿…é¡»äº†è§£å¹¶å‘è®¿é—®ã€‚ æ‰€æœ‰è¿™ä¸€åˆ‡éƒ½å¾ˆè‰°éš¾ã€‚ è¿™å°±æ˜¯ä¸ºä»€ä¹ˆAndroidå¼€å‘äººå‘˜ä¸å¤ªå–œæ¬¢é»˜è®¤çš„SQLite APIï¼Œè€Œæ˜¯æ›´å–œæ¬¢ä½¿ç”¨ç›¸å½“æ˜‚è´µçš„åŒ…è£…å™¨ï¼Œå¦‚ORMsã€‚ Ankoæä¾›äº†ManagedSQLiteOpenHelper å¯ä»¥æ— ç¼æ›¿ä»£é»˜è®¤çš„,å½“æ“ä½œå®Œæ¯•ä¹‹åå°±ä¼šè‡ªåŠ¨å…³é—­ï¼Œåœ¨ä½¿ç”¨çš„æ—¶å€™éœ€è¦å»ç»§æ‰¿ManagedSQLiteOpenHelper1234567891011121314151617181920 class MySqlHelper(ctx: Context = MyApplication.getApplication(), name: String? = "db", factory: SQLiteDatabase.CursorFactory? = null, version: Int = 1) : ManagedSQLiteOpenHelper(ctx, name, factory, version) &#123;æˆ‘ä»¬å¦‚æœæƒ³è®©å®ƒæˆä¸ºçº¿ç¨‹å®‰å…¨çš„å¯ä»¥ companion object &#123; @Volatile private var helper: MySqlHelper? = null fun getInstance(): MySqlHelper &#123; if (null == helper) &#123; synchronized(MySqlHelper::class) &#123; if (null == helper) &#123; helper = MySqlHelper() &#125; &#125; &#125; return helper!! &#125; &#125; ç„¶åæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨Ankoæä¾›çš„æ•°æ®åº“æ“ä½œäº†123456789101112131415161718192021222324 fun queryAll(): List&lt;Gps&gt; = use &#123; select(Gps.TABEL_NAME).exec &#123; parseList(classParser&lt;Gps&gt;()) //æŸ¥è¯¢ä½¿ç”¨parserXXæ–¹æ³•éœ€è¦å­˜åœ¨æŸ¥è¯¢å­—æ®µçš„ç›¸åº”æ„é€ æ–¹æ³• &#125;&#125; fun queryLonAfter(id: Long): List&lt;Double&gt; = use &#123; select(Gps.TABEL_NAME, Gps.LON).whereArgs("$&#123;Gps._ID&#125; &gt; &#123;id&#125;", "id" to id) .exec &#123; parseList(DoubleParser) &#125; &#125; fun deleteById(id: Long)&#123; use &#123; delete(Gps.TABEL_NAME, "$&#123;Gps._ID&#125; = &#123;id&#125;", "id" to id) &#125; &#125; fun updateById(id: Long) &#123; use &#123; update(Gps.TABEL_NAME, Gps.PROVIDER to "lbs").whereArgs("$&#123;Gps._ID&#125; = &#123;id&#125;", "id" to id).exec() &#125; &#125; è¿™é‡Œä½¿ç”¨useæ¥åŒ…è£¹ï¼Œå½“é‡Œé¢çš„ä»£ç æ‰§è¡Œå®Œæ¯•å°±ä¼šè‡ªåŠ¨å…³é—­æ•°æ®åº“ è‡³æ­¤ï¼ŒAnkoå°±è®²è§£å®Œæ¯•ï¼Œæ›´å¤šçš„å†…å®¹è¿˜è¯·é˜…è¯»å®˜æ–¹ï¼ŒThanksâ™ª(ï½¥Ï‰ï½¥)ï¾‰]]></content>
      <categories>
        <category>Kotlin</category>
      </categories>
      <tags>
        <tag>Kotlin</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[KotlinåŸºç¡€ç¬¬ä¸€å¼¹]]></title>
    <url>%2F2017%2F07%2F01%2F20170701_Kotlin%E5%9F%BA%E7%A1%80%E7%AC%AC%E4%B8%80%E5%BC%B9%2F</url>
    <content type="text"><![CDATA[Kotlinæ˜¯ä¸€ä¸ªåŸºäºJVMçš„æ–°çš„ç¼–ç¨‹è¯­è¨€ï¼Œç”±JetBrainså¼€å‘ï¼Œç”±äºæ˜¯Googleæ¨èä½¿ç”¨çš„ï¼Œå¯è§å…¶é‡è¦æ€§ï¼Œå½“ä½ çœŸæ­£æ·±å…¥çš„æ—¶å€™ä¹Ÿä¼šå‘ç°kotlinçš„ä¼˜é›…ï¼Œè®©ä½ åœ¨å†™ä»£ç çš„æ—¶å€™çœæ—¶åˆçœåŠ› å¯¹äºKotlinçš„å­¦ä¹ ç½‘ä¸Šæœ‰å¥½å¤šï¼Œç°åœ¨åˆ†äº«ä¸€äº› å®˜æ–¹ç½‘å€ http://kotlinlang.org/docs/reference/ åˆ«äººçš„æ€»ç»“ https://github.com/youxin11544/Kotlin-learning åœ¨è¿™é‡Œä¸ä¼šåƒå®˜ç½‘é‚£æ ·ä¸€ä¸€çš„å»è®²è§£ï¼Œè‡ªå·±ä¹Ÿæ˜¯ä»å®˜ç½‘å»å­¦ä¹ ç„¶åå»çœ‹åˆ«äººçš„åšå®¢ï¼Œå¯¹äºçŸ¥è¯†è€Œè¨€å¯èƒ½å¹¶ä¸æ·±å…¥ï¼Œä½†å¯¹äºåˆå­¦è€…è€Œè¨€ä¹Ÿå€¼çš„ä¸€çœ‹ Kotliné›†åˆé›†åˆæ— éæ˜¯listé›†åˆå’Œmapé›†åˆï¼Œå¦‚ä¸‹ï¼š12val list = listOf(1, 2, 3, 4)val map = mapOf(1 to "a", 2 to "b", 3 to "c") æ˜¯ä¸æ˜¯å¾ˆç®€å•ï¼Œä½†å®ƒåªèƒ½å»éå†ä¸èƒ½å»æ“ä½œï¼Œwhy?é¦–å…ˆæˆ‘ä»¬ä»¥listä¸ºä¾‹ï¼Œç‚¹è¿›å»çœ‹ä¸€ä¸‹å®ƒé‡Œé¢åªæœ‰getã€indexofã€iteratoræ–¹æ³•ï¼Œè¿™ä¹Ÿå°±å†³å®šäº†å®ƒçš„èŒè´£å°±æ˜¯å»éå† é‚£å¦‚æœæƒ³è¿›åº¦è¯»å†™æ“ä½œ,å°±éœ€è¦å»ä½¿ç”¨mutableListOfã€mutableMapOfæ¥åˆ›å»ºé›†åˆäº† æ—¢ç„¶æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªé›†åˆï¼Œæˆ‘ä»¬å°±éœ€è¦å¯¹äºè¿›è¡Œéå†ï¼Œå’Œjavaä¸åŒçš„æ˜¯kotlinä½¿ç”¨äº†inæ¥éå†123for(i in list)&#123; println("i=$i") &#125; ä¹Ÿå¯ä»¥ä½¿ç”¨forEach123list.forEach &#123; println("it=$it") &#125; è¿˜æœ‰1234list.forEachIndexed&#123; index,i-&gt; println("index=$index i=$i") &#125; ç­‰ç­‰ã€‚è¿™æ—¶å€™æˆ‘ä»¬å¯èƒ½ä¼šæœ‰ç–‘é—®ï¼ŒforEaché‡Œé¢å¤§æ‹¬å·é‡Œè¦å†™ä»€ä¹ˆå‘¢ï¼Ÿå…¶å®å®ƒé‡Œé¢æ¥å—çš„æ˜¯ä¸€ä¸ªlamadaè¡¨è¾¾å¼1234@kotlin.internal.HidesMemberspublic inline fun &lt;T&gt; Iterable&lt;T&gt;.forEach(action: (T) -&gt; Unit): Unit &#123; for (element in this) action(element)&#125; è¿™é‡Œå°±éœ€è¦è¯´ä¸€ä¸‹äº†ï¼Œ(T)-&gt;Unitè¡¨ç¤ºæ¥å—ä¸€ä¸ªTç±»å‹å‚æ•°è¿”å›ä¸€ä¸ªUnitç±»å‹çš„å‡½æ•°ï¼ŒUnitä¹Ÿå°±æ˜¯javaä¸­voidç±»å‹ï¼Œæˆ‘ä»¬åœ¨è°ƒç”¨çš„æ—¶å€™éœ€è¦ä¼ å…¥{params-&gt;}è¿™ç§å¼å­ï¼ŒKotlinè§„å®šå½“å‚æ•°åªæœ‰ä¸€ä¸ªçš„æ—¶å€™å¯ä»¥ä¸ç”¨å†™ï¼Œé»˜è®¤æ˜¯it,æ‰€ä»¥æˆ‘ä»¬ä¹Ÿå¯ä»¥è¿™æ ·å†™123list.forEach &#123;item-&gt; println("item=$item") &#125; å¥½äº†ï¼Œlistè¯´å®Œäº†ï¼Œä¸‹é¢è¯´è¯´Mapï¼Œæˆ‘ä»¬åœ¨å®šä¹‰mapçš„æ—¶å€™ç”¨åˆ°äº†to,å…¶å®æ˜¯key to valueçš„æ ¼å¼ï¼Œtoå……å½“çš„æ˜¯ä¸­ç¼€è¡¨è¾¾å¼ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å®šä¹‰è‡ªå·±çš„ä¸­ç¼€è¡¨è¾¾å¼ infix fun &lt;A,B&gt; A.with(that: B):Pair&lt;A,B&gt; = Pair(this,that) è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥è¿™æ ·12val pair = 4 to "d" val (key,value) = pair; ok,é›†åˆå°±å…ˆåˆ°è¿™é‡Œï¼Œæ›´å¤šæ“ä½œå¯ä»¥å®é™…å»æ“ä½œ Kotlinæ‰©å±•å‡½æ•° æ‰©å±•å±æ€§æ‰©å±•å‡½æ•°ã€æ‰©å±•å±æ€§å¾ˆç®€å•ï¼Œç›´æ¥ä¸Šä¾‹å­123456val String.lastChar: Char get() = get(length - 1)inline fun String.show(): Unit &#123; println("String.show()")&#125; ç›´æ¥ä½¿ç”¨ç±»å.æ–¹æ³•å³å¯ï¼Œè°ƒç”¨çš„æ—¶å€™å°±å¯ä»¥â€lypopâ€.show() Kotlinå‡½æ•°kotlinå‡½æ•°æœ‰ä¸ªç‰¹ç‚¹å°±æ˜¯å¯ä»¥è®¾ç½®é»˜è®¤å€¼1234567891011fun test(a: Int = 1, str: String = "") &#123; print("test(a: Int = 1, str: String = \"\")")&#125;fun test(str: String = "") &#123; print("test(str: String = \"\")")&#125;fun test(a: Int = 1, b: Int = 2, str: String = "") &#123; print("test(a: Int = 1, b: Int = 2,str: String = \"\")")&#125; å½“ä½ è°ƒç”¨test()ä¼šæ‰§è¡Œæœ€åŒ¹é…çš„æ–¹æ³•fun test(str: String = â€œâ€)ï¼Œåœ¨kotlinä¹Ÿæœ‰javaçš„å¯å˜å‚æ•°ï¼Œåªéœ€è¦åœ¨æ–¹æ³•å†™å…¥vararg item: Intå³å¯ Kotlinå¯ä¸ºç©ºè¿™ä¸ªæ¯”è¾ƒç®€å•ï¼Œå…ˆä¸Šä»£ç 12val str: String? = null str?.length ä¸‹é¢çš„è°ƒç”¨ä¹Ÿå¯ä»¥ä½¿ç”¨str!!.lengthçš„æ ·å¼ï¼Œå…·ä½“ï¼Ÿçš„ä½¿ç”¨åœ¨ä¹‹åä¼šç»å¸¸ç”¨åˆ°ï¼Œå¤šå¤šä½“ä¼šå°±å¥½ï¼Œè¿™é‡Œä¸åšè¿‡å¤šçš„èµ˜è¿° Kotlinå­—ç¬¦ä¸²çš„ä½¿ç”¨å­—ç¬¦ä¸²çš„æ“ä½œè¿™é‡Œä»¥åˆ†å‰²æ¥è¯´ä¸€ä¸‹1234567val str = "com.lypop.android" val list = str.split(".") if(list is List)&#123; for(value in list)&#123; println("value=$value") &#125; &#125; å°±æ˜¯è¿™ä¹ˆç®€å•çš„ä¸€äº›è°ƒç”¨ï¼Œå½“ç„¶è¿˜æœ‰ä¸€äº›å…¶ä»–å¤æ‚çš„æ“ä½œï¼Œä¾‹å¦‚12345678910val path = "E:\\md_workspace\\Kotlin_collection.md" val afterLast = path.substringAfterLast(".") //è·å–åˆ°md println("afterLast=$afterLast") val beforeLast = path.substringBeforeLast(":") println("beforeLast=$beforeLast") val missingValue = path.substringBeforeLast("?","missing value") //å¦‚æœæ²¡æœ‰æ‰¾åˆ°çš„è¯åˆ™è¿”å›ç¬¬äºŒä¸ªå‚æ•° println("missing Value=$missingValue") æ˜¯ä¸æ˜¯ç›¸æ¯”javaçš„substringæ›´åŠ çµæ´»äº†ï¼Œå½“ç„¶å¯¹äºè¿™ç§å­—ç¬¦ä¸²çš„æ“ä½œä¼šä½¿ç”¨å°±å¯ä»¥äº†ï¼Œå½“ç„¶ä¸çŸ¥é“æ„æ€çš„è¯ï¼Œå¯ä»¥è¿›æºç æŸ¥çœ‹ä¹Ÿå¯ä»¥ç™¾åº¦æœ€ååœ¨è¯´ä¸¤ä¸ªæ¯”è¾ƒå¸¸ç”¨çš„çŸ¥è¯†ç‚¹ æ‰“å°&amp;å­—ç¬¦ 12println("\$abc")println(""" $&#123;'$'&#125;abc """) ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ 12345678val match = "(.+)\\.(.+)\\.(.+)".toRegex()val matchResult = match.matchEntire("com.lypop.one")val list1:List&lt;String&gt;? = matchResult?.destructured?.toList() if(list1 != null)&#123; for(str in list1)&#123; println("str=$str") &#125; &#125; kotlinç±»å¯¹äºç±»ï¼Œæˆ‘ä»¬å…ˆè¦è¯´ä¸‹åœ¨Kotlinä¸­æ¥å£æœ‰å•¥ç‰¹ç‚¹1234567interface OnClickListener&#123; val name: String fun test()&#123; println("OnClickListener test") &#125; fun action()&#125; å’Œjavaçš„æ¥å£ç›¸æ¯”ï¼Œkotlinçš„æ¥å£æ›´åŠ å¼ºå¤§è¿˜å¯ä»¥å†™æ–¹æ³•çš„å®ç°ï¼Œè¿˜æœ‰ä¸€ä¸ªé‚£å°±æ˜¯æ¥å£openç±»å‹çš„å¯ä»¥è¢«ç›´æ¥ç»§æ‰¿123456789101112class Child1 : OnClickListener,OnClickListener1&#123; override val name: String = "" override fun test() &#123; super&lt;OnClickListener&gt;.test() &#125; override fun action() &#123; &#125; override fun action1() &#123; &#125;&#125; å½“ä½ éœ€è¦åœ¨å­ç±»æ–¹æ³•è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•çš„æ—¶å€™ç›´æ¥superå³å¯ å¯¹äºæŠ½è±¡ç±»123456789abstract class ABParent&#123; abstract fun test()&#125;class ABChild: ABParent()&#123; override fun test() &#123; &#125;&#125; ä¹Ÿæ˜¯ç›´æ¥å¯ä»¥ç»§æ‰¿çš„ï¼Œé‡Œé¢çš„abstractæ–¹æ³•é»˜è®¤æ˜¯openä¿®é¥° å¯¹äºæ™®é€šç±»å°±éœ€è¦ç»™çˆ¶ç±»ç”¨openè¿›è¡Œä¿®é¥°æ‰èƒ½è¿›è¡Œç»§æ‰¿ï¼Œå› ä¸ºå¯¹äºç±»æ¥è¯´é»˜è®¤æ˜¯finalç±»å‹çš„ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±éœ€è¦å¯¹ç±»è¿›è¡Œä¸€äº›ç ”ç©¶ï¼Œå¯¹äºjavaç±»åˆ†ä¸ºå†…éƒ¨ç±»ã€å¤–éƒ¨ç±»ã€é™æ€ç±»ç­‰ç­‰ï¼Œkotlinå½“ç„¶ä¹Ÿä¼šæœ‰åŒºåˆ†123456789101112131415161718192021222324252627282930313233343536class ClassA&#123; var name: String = "lypop" class NestClass&#123; fun test()&#123; //name = "" åµŒå¥—ç±»ä¸èƒ½è®¿é—®å¤–éƒ¨ç±»çš„å±æ€§å’Œæ–¹æ³• &#125; &#125; //å†…éƒ¨ç±» å­˜åœ¨å¤–éƒ¨ç±»çš„å¼•ç”¨ å¯ä»¥è®¿é—®å¤–éƒ¨ç±»çš„å±æ€§å’Œæ–¹æ³• inner class InnerClass&#123; fun test()&#123; name = "change Name" &#125; &#125; //åˆ›å»ºä¼´ç”Ÿå¯¹è±¡ companion object &#123; var comName = "aaa" fun companionTest()&#123; println("companionTest") &#125; &#125; //å®šä¹‰é™æ€å†…éƒ¨ç±» object InnerStaticClass&#123; fun test()&#123; comName = "===" &#125; &#125;&#125;//å®šä¹‰é™æ€å¤–éƒ¨ç±»object StaticOuterClass&#123; val age: Int = 22&#125; è¿™é‡Œæˆ‘ä»¬éœ€è¦æ³¨æ„ï¼š åµŒå¥—ç±»ä¸èƒ½è®¿é—®å¤–éƒ¨ç±»çš„å±æ€§å’Œæ–¹æ³•,å†…éƒ¨ç±»æ‰å¯ä»¥è®¿é—® å› ä¸ºkotlinæ²¡æœ‰staticå…³é”®å­—ï¼Œå¦‚æœè¦åœ¨ç±»ä¸­å®šä¹‰é™æ€çš„æ–¹æ³•å’Œå±æ€§éœ€è¦æ¥åˆ›å»ºä¼´ç”Ÿå¯¹è±¡ï¼Œåœ¨ä½¿ç”¨çš„æ—¶å€™å¯ä»¥ClassA.companion.comNameä¹Ÿå¯ä»¥ç›´æ¥ClassA.comNameè®¿é—® é™æ€å†…éƒ¨ç±»å¯ä»¥è®¿é—®ä¼´ç”Ÿå¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•ï¼Œå°±å’Œjavaä¸­é™æ€å†…éƒ¨ç±»å¯ä»¥è®¿é—®å¤–éƒ¨ç±»å®šä¹‰çš„é™æ€å±æ€§å’Œé™æ€æ–¹æ³•æ˜¯ä¸€æ ·çš„ æ¥ä¸‹æ¥ä¸€ä¸ªä¾¿æ˜¯åŒ¿åå†…éƒ¨ç±»çš„å†™æ³•12345val obj = object: OnClickListener2&#123; override fun test() &#123; println("object test()") &#125;&#125; è¯¥å†…éƒ¨ç±»å®ç°äº†OnClickListener2çš„æ¥å£ï¼Œå°†å¯¹è±¡èµ‹å€¼ç»™äº†obj æœ€åä¹Ÿå°±æ˜¯Kotlinçš„æ•°æ®ç±»ï¼Œå’Œjavaä¸­çš„Beanç±»ä¸€æ ·ï¼Œåªæœ‰ç±»å±æ€§å’Œç›¸åº”çš„get/setæ–¹æ³• data class Person(val name: String) kotlinç±»æ„é€ æ–¹æ³•ç±»çš„æ„é€ æ–¹æ³•å’Œjavaæœ‰äº›ä¸åŒï¼Œkotlinåˆ†ä¸ºä¸»æ„é€ æ–¹æ³•å’Œæ¬¡æ„é€ æ–¹æ³•123456789101112131415class User(name: String) &#123;//ä¸»æ„é€ æ–¹æ³• var name: String = "" var pwd: String = "" //æ¬¡æ„é€ å™¨ constructor(name: String, pwd: String) : this(name) &#123; this.name = name this.pwd = pwd &#125; //åˆå§‹åŒ–å™¨ init &#123; this.name = name &#125;&#125; è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼š æ¬¡æ„é€ æ–¹æ³•å¿…é¡»è¦å»åˆå§‹åŒ–ä¸»æ„é€ æ–¹æ³• å½“ä¸»æ„é€ æ–¹æ³•éœ€è¦æƒé™ç­‰ä¿®é¥°çš„æ—¶å€™constructorå¿…é¡»è¦åŠ ä¸Šï¼Œå…¶ä»–çš„æƒ…å†µå¯ä»¥ä¸å†™ å¯¹äºåˆå§‹åŒ–å­—æ®µå¯ä»¥æ”¾åœ¨initåˆå§‹åŒ–å™¨ä¸­è¿›è¡Œåˆå§‹åŒ–]]></content>
      <categories>
        <category>Kotlin</category>
      </categories>
      <tags>
        <tag>Kotlin</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ·±å…¥ç†è§£Androidçš„æ¶ˆæ¯æœºåˆ¶]]></title>
    <url>%2F2017%2F06%2F09%2F20170609_%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Android%E7%9A%84%E6%B6%88%E6%81%AF%E6%9C%BA%E5%88%B6%2F</url>
    <content type="text"><![CDATA[å‰è¨€è¿™ç¯‡æ–‡ç« æˆ‘ä»¬æ¥å­¦ä¹ ä¸€ä¸‹Handlerçš„æºç ï¼Œè¯´èµ·Handleræˆ‘ä»¬å¹¶ä¸é™Œç”Ÿï¼Œç”¨çš„æœ€å¤šçš„å°±æ˜¯æ›´æ–°UIäº†ã€‚ç„¶è€ŒHandlerå¹¶ä¸æ˜¯ä¸“é—¨ç”¨äºæ›´æ–°UIçš„ï¼Œå®ƒåªæ˜¯å¸¸è¢«å¼€å‘è€…ç”¨æ¥æ›´æ–°UI æ­£æ–‡åœ¨å¼€å§‹ä¹‹å‰æˆ‘ä»¬éœ€è¦å¯¹å‡ ä¸ªé—®é¢˜è¿›è¡Œå›ç­” ä¸ºä»€ä¹ˆAndroidåªèƒ½åœ¨ä¸»çº¿ç¨‹è®¿é—®UIï¼Ÿ å› ä¸ºåœ¨ViewRootImplå¯¹UIæ“ä½œè¿›è¡Œäº†éªŒè¯ï¼Œè¿™ä¸ªéªŒè¯çš„å·¥ä½œæ˜¯ç”±ViewRootImplçš„checkThreadæ–¹æ³•æ¥å®Œæˆçš„123456void checkThread() &#123; if (mThread != Thread.currentThread()) &#123; throw new CalledFromWrongThreadException( "Only the original thread that created a view hierarchy can touch its views."); &#125;&#125; å› ä¸ºè¿™ä¸€é™åˆ¶å¯¼è‡´å¿…é¡»åœ¨ä¸»çº¿ç¨‹é‡Œé¢è®¿é—®UIï¼Œä½†æ˜¯åˆä¸èƒ½æ‰§è¡Œè€—æ—¶çš„æ“ä½œï¼Œè¿™æ‰æœ‰äº†Handlerç”¨äºå°†UIå·¥ä½œåˆ‡æ¢åˆ°ä¸»çº¿ç¨‹è¿›è¡Œæ“ä½œ ç³»ç»Ÿä¸ºä»€ä¹ˆä¸å…è®¸å­çº¿ç¨‹æ›´æ–°UIå‘¢ï¼Ÿ è¿™æ˜¯å› ä¸ºAndroidçš„UIæ§ä»¶ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¦‚æœåœ¨å¤šçº¿ç¨‹ä¸­å¹¶å‘è®¿é—®å¯èƒ½ä¼šå¯¼è‡´UIæ§ä»¶å¤„äºä¸å¯é¢„æœŸçš„çŠ¶æ€ é‚£ä¸ºä»€ä¹ˆç³»ç»Ÿä¸ä¸ºUIæ§ä»¶çš„è®¿é—®åŠ ä¸Šé”æœºåˆ¶å‘¢ï¼Ÿ ç¼ºç‚¹æœ‰ä¸¤ä¸ªï¼šé¦–å…ˆåŠ ä¸Šé”æœºåˆ¶ä¼šè®©UIè®¿é—®çš„é€»è¾‘å˜å¾—å¤æ‚ï¼›å…¶æ¬¡é”æœºåˆ¶ä¼šé™ä½UIè®¿é—®çš„æ•ˆç‡ï¼Œå› ä¸ºé”æœºåˆ¶ä¼šé˜»å¡æŸäº›çº¿ç¨‹çš„æ‰§è¡Œ Handlerçš„è¿è¡Œéœ€è¦åº•å±‚MessageQueueå’ŒLooperçš„æ”¯æ’‘ã€‚ Handlerï¼šå¤„ç†å’Œåˆ†å‘æ¶ˆæ¯MessageQueueï¼šä»¥é˜Ÿåˆ—çš„å½¢å¼æ’å…¥å’Œåˆ é™¤æ¶ˆæ¯ï¼Œä½†æ˜¯å†…éƒ¨å­˜å‚¨ç»“æ„å¹¶ä¸æ˜¯çœŸæ­£çš„é˜Ÿåˆ—ï¼Œè€Œæ˜¯é‡‡ç”¨å•é“¾è¡¨çš„æ•°æ®ç»“æ„æ¥å­˜å‚¨æ¶ˆæ¯åˆ—è¡¨Looperï¼šæ¶ˆæ¯å¾ªç¯å™¨ï¼Œå¦‚æœæœ‰æ¶ˆæ¯åˆ™å°†æ¶ˆæ¯åˆ†å‘ç»™Handleræ¥å¤„ç† æˆ‘ä»¬è¿›å…¥ç¨‹åºçš„å…¥å£mainæ–¹æ³•æ¥çœ‹çœ‹ç»™æˆ‘ä»¬åšäº†ä»€ä¹ˆäº‹æƒ…12345678910public static void main(String[] args) &#123; ...... Looper.prepareMainLooper(); ActivityThread thread = new ActivityThread(); thread.attach(false); Looper.loop(); throw new RuntimeException("Main thread loop unexpectedly exited");&#125; åœ¨ä¸»çº¿ç¨‹ä¸­å¼€å¯äº†Looperï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨ä¸»çº¿ç¨‹ä¸ç”¨å»å¼€å¯Looperï¼Œç›´æ¥ä½¿ç”¨new Handlerå³å¯ã€‚ä¸»çº¿ç¨‹æ¶ˆæ¯å¾ªç¯å¼€å¯ä»¥åï¼ŒActivityThreadè¿˜éœ€è¦ä¸€ä¸ªHandleræ¥å’Œæ¶ˆæ¯é˜Ÿåˆ—è¿›è¡Œäº¤äº’ï¼Œè¿™ä¸ªHandlerå°±æ˜¯Hï¼Œfinal H mH = new H();ä½¿ç”¨é¥¿åŠ è½½çš„æ–¹å¼è¿›è¡Œåˆå§‹åŒ–ä¸»è¦åŒ…å«äº†å››å¤§ç»„ä»¶çš„å¯åŠ¨å’Œåœæ­¢1234567891011121314151617181920private class H extends Handler &#123; public static final int LAUNCH_ACTIVITY = 100; public static final int PAUSE_ACTIVITY = 101; public static final int PAUSE_ACTIVITY_FINISHING= 102; public static final int STOP_ACTIVITY_SHOW = 103; public static final int STOP_ACTIVITY_HIDE = 104; public static final int SHOW_WINDOW = 105; public static final int HIDE_WINDOW = 106; public static final int RESUME_ACTIVITY = 107; public static final int SEND_RESULT = 108; public static final int DESTROY_ACTIVITY = 109; public static final int BIND_APPLICATION = 110; public static final int EXIT_APPLICATION = 111; public static final int NEW_INTENT = 112; public static final int RECEIVER = 113; public static final int CREATE_SERVICE = 114; public static final int SERVICE_ARGS = 115; public static final int STOP_SERVICE = 116; ......&#125; å½“ç„¶ActivityThreadé€šè¿‡AMSè¿›è¡Œè¿›ç¨‹é—´é€šä¿¡ï¼ŒAMSä»¥è¿›ç¨‹é—´é€šä¿¡çš„æ–¹å¼å®ŒæˆActivityThreadçš„è¯·æ±‚åä¼šå›è°ƒApplicationThreadä¸­çš„Binderæ–¹æ³•ï¼Œç„¶åApplicationThreadä¼šå‘Hå‘é€æ¶ˆæ¯ï¼ŒHæ”¶åˆ°æ¶ˆæ¯åä¼šå°†ApplicationThreadä¸­çš„é€»è¾‘åˆ‡æ¢åˆ°ActivityThreadä¸­å»æ‰§è¡Œï¼Œå³åˆ‡æ¢åˆ°ä¸»çº¿ç¨‹ä¸­å»æ‰§è¡Œã€‚ å› ä¸ºmainæ–¹æ³•å·²ç»å¼€å¯äº†Looperï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨ä½¿ç”¨çš„æ—¶å€™å°±ä¸ç”¨å¼€å¯Looperäº†ï¼Œå› ä¸ºå­çº¿ç¨‹é‡Œé¢æ²¡æœ‰å¼€å¯Looperæ‰€ä»¥éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨å»å¼€å¯æ‰èƒ½åœ¨å­çº¿ç¨‹é‡Œå»å¤„ç†æ¶ˆæ¯123456789101112class LooperThread extends Thread &#123; public Handler mHandler; public void run() &#123; Looper.prepare(); mHandler = new Handler() &#123; public void handleMessage(Message msg) &#123; // process incoming messages here &#125; &#125;; Looper.loop(); &#125;&#125; æˆ‘ä»¬å¯èƒ½ä¼šæœ‰ç–‘é—®ï¼Œæˆ‘ä»¬åœ¨å­çº¿ç¨‹é‡Œé¢ç›´æ¥new Handlerå°±ä¸å¯ä»¥å—ï¼Ÿç­”æ¡ˆå½“ç„¶æ˜¯ä¸å¯ä»¥ï¼Œæˆ‘ä»¬æ¥è¿›å…¥Handlerçš„æ„é€ æ–¹æ³•æ¥æ¢ä¸ªç©¶ç«Ÿ123456789101112131415161718public Handler(Callback callback, boolean async) &#123; if (FIND_POTENTIAL_LEAKS) &#123; final Class&lt;? extends Handler&gt; klass = getClass(); if ((klass.isAnonymousClass() || klass.isMemberClass() || klass.isLocalClass()) &amp;&amp; (klass.getModifiers() &amp; Modifier.STATIC) == 0) &#123; Log.w(TAG, "The following Handler class should be static or leaks might occur: " + klass.getCanonicalName()); &#125; &#125; mLooper = Looper.myLooper(); if (mLooper == null) &#123; throw new RuntimeException( "Can't create handler inside thread that has not called Looper.prepare()"); &#125; mQueue = mLooper.mQueue; mCallback = callback; mAsynchronous = async;&#125; åœ¨æ„é€ æ–¹æ³•é‡Œé¢ä¼šè°ƒç”¨Looper.myLooper()123public static @Nullable Looper myLooper() &#123; return sThreadLocal.get();&#125; è¿™ä¸ªæ–¹æ³•å…¶å®æ˜¯å¾—åˆ°å½“å‰çº¿ç¨‹ä¸‹çš„Looperå¯¹è±¡ï¼Œå› ä¸ºåœ¨å­çº¿ç¨‹é‡Œé¢æ²¡æœ‰Looperå¯¹è±¡æ‰€ä»¥ä¼šæŠ›å‡ºå¼‚å¸¸ï¼ˆâ€Canâ€™t create handler inside thread that has not called Looper.prepare()â€ï¼‰ï¼Œæ¯”è¾ƒå›°æƒ‘çš„æ˜¯ThreadLocalç±»æ˜¯åšä»€ä¹ˆç”¨çš„å‘¢ï¼Ÿè¿™ä¸ªåç»­ä¼šè¯´ã€‚ OKï¼Œåœ¨mainæ–¹æ³•é‡Œé¢æ—¢ç„¶è°ƒç”¨äº†Looper.prepareMainLooperï¼Œé‚£æˆ‘ä»¬å…ˆä»è¿™é‡Œè¿›è¡Œåˆ†æ123456789public static void prepareMainLooper() &#123; prepare(false); synchronized (Looper.class) &#123; if (sMainLooper != null) &#123; throw new IllegalStateException("The main Looper has already been prepared."); &#125; sMainLooper = myLooper(); &#125;&#125; è¿™æ˜¯Looperä¸“é—¨ä¸ºä¸»çº¿ç¨‹æä¾›çš„æ–¹æ³•ï¼Œå…¶å®å†…éƒ¨ä¹Ÿæ˜¯è°ƒç”¨äº†prepareæ–¹æ³•ï¼Œç”±äºä¸»çº¿ç¨‹çš„Looperçš„æ¯”è¾ƒç‰¹æ®Šï¼ŒLooperä¹Ÿæä¾›äº†ä¸€ä¸ªgetMainLooperæ–¹æ³•æ¥è·å–ä¸»çº¿ç¨‹çš„Looperå› ä¸ºåœ¨mainæ–¹æ³•å·²ç»æ‰§è¡Œäº†prepareMainLooperæ–¹æ³•ï¼Œæ‰€ä»¥æˆ‘ä»¬å†åœ¨ä¸»çº¿ç¨‹è°ƒç”¨çš„è¯å°±ä¼šæŠ›å‡ºå¼‚å¸¸ è¿›å…¥prepareæ–¹æ³•123456private static void prepare(boolean quitAllowed) &#123; if (sThreadLocal.get() != null) &#123; throw new RuntimeException("Only one Looper may be created per thread"); &#125; sThreadLocal.set(new Looper(quitAllowed));&#125; è¿™é‡Œå°†åˆ›å»ºä¸€ä¸ªLooperå¹¶å­˜å…¥ThreadLocalä¸­ï¼Œå¦‚æœè°ƒç”¨å¤šæ¬¡prepareæ–¹æ³•åˆ™ä¼šæŠ›å‡ºå¼‚å¸¸ï¼ˆOnly one Looper may be created per threadï¼‰ prepareåªæ˜¯åˆ›å»ºLooperå¯¹è±¡é˜¶æ®µï¼ŒçœŸæ­£å¼€å¯å¾ªç¯å™¨çš„æ˜¯Looper.loopæ–¹æ³•123456789101112131415161718192021222324public static void loop() &#123; final Looper me = myLooper(); if (me == null) &#123; throw new RuntimeException("No Looper; Looper.prepare() wasn't called on this thread."); &#125; final MessageQueue queue = me.mQueue; for (;;) &#123; Message msg = queue.next(); // might block if (msg == null) &#123; // No message indicates that the message queue is quitting. return; &#125; ...... try &#123; msg.target.dispatchMessage(msg); &#125; finally &#123; if (traceTag != 0) &#123; Trace.traceEnd(traceTag); &#125; &#125; ...... msg.recycleUnchecked(); &#125;&#125; è¿™ä¸ªæ–¹æ³•å°±æ˜¯ä¸æ–­çš„å»å¾ªç¯æ¶ˆæ¯é˜Ÿåˆ—è°ƒç”¨queue.nextæ–¹æ³•1234567891011121314151617181920212223242526272829303132333435363738Message next() &#123; ...... for (;;) &#123; synchronized (this) &#123; // Try to retrieve the next message. Return if found. final long now = SystemClock.uptimeMillis(); Message prevMsg = null; Message msg = mMessages; if (msg != null &amp;&amp; msg.target == null) &#123; // Stalled by a barrier. Find the next asynchronous message in the queue. do &#123; prevMsg = msg; msg = msg.next; &#125; while (msg != null &amp;&amp; !msg.isAsynchronous()); &#125; if (msg != null) &#123; if (now &lt; msg.when) &#123; // Next message is not ready. Set a timeout to wake up when it is ready. nextPollTimeoutMillis = (int) Math.min(msg.when - now, Integer.MAX_VALUE); &#125; else &#123; // Got a message. mBlocked = false; if (prevMsg != null) &#123; prevMsg.next = msg.next; &#125; else &#123; mMessages = msg.next; &#125; msg.next = null; msg.markInUse(); return msg; &#125; &#125; else &#123; // No more messages. nextPollTimeoutMillis = -1; &#125; &#125; &#125; &#125; å¦‚æœæ¶ˆæ¯ä¸ä¸ºç©ºåˆ™å–å‡ºå¹¶è°ƒç”¨msg.target.dispatchMessageæ–¹æ³•è®©handlerå»å¤„ç†åœ¨å¾€ä¸‹çœ‹ä¼šçœ‹åˆ°msg.recycleUnchecked()ï¼Œå†…éƒ¨è°ƒç”¨äº†Messageçš„å›æ”¶çš„æ–¹æ³•æ‰€ä»¥æˆ‘ä»¬å°±ä¸éœ€è¦æ‰‹åŠ¨è¿›è¡Œå›æ”¶äº†1234567891011121314151617181920212223void recycleUnchecked() &#123; // Mark the message as in use while it remains in the recycled object pool. // Clear out all other details. flags = FLAG_IN_USE; what = 0; arg1 = 0; arg2 = 0; obj = null; replyTo = null; sendingUid = -1; when = 0; target = null; callback = null; data = null; synchronized (sPoolSync) &#123; if (sPoolSize &lt; MAX_POOL_SIZE) &#123; next = sPool; sPool = this; sPoolSize++; &#125; &#125;&#125; å¹¶æ²¡æœ‰è¿›è¡Œå›æ”¶è€Œæ˜¯å°†æ¶ˆæ¯å†…å®¹ç½®ç©ºä¹‹ååŠ å…¥åˆ°æ¶ˆæ¯ç¼“å­˜æ± ä¸­ï¼Œè¿™æ ·å½“è°ƒç”¨Message.obtainæ—¶å¦‚æœç¼“å­˜æ± æœ‰æ¶ˆæ¯åˆ™ç›´æ¥å–å‡º ok,æˆ‘ä»¬åœ¨æ¥çœ‹dispatchMessageæ–¹æ³•123456789101112public void dispatchMessage(Message msg) &#123; if (msg.callback != null) &#123; handleCallback(msg); &#125; else &#123; if (mCallback != null) &#123; if (mCallback.handleMessage(msg)) &#123; return; &#125; &#125; handleMessage(msg); &#125;&#125; å¯è§å¹¶ä¸æ˜¯æ‰€æœ‰æ¶ˆæ¯éƒ½æœ‰handleMessageè¿›è¡Œå¤„ç†ï¼Œåˆ†æä¸€ä¸‹ msg.callback != nullï¼šhandler.post()æ–¹æ³• 1234public final boolean post(Runnable r)&#123; return sendMessageDelayed(getPostMessage(r), 0);&#125; å½“æˆ‘ä»¬éš”å¤šé•¿æ—¶é—´é‡å¤è°ƒç”¨runæ–¹æ³•çš„æ—¶å€™ï¼Œhandler.postæ˜¯ä¸ªä¸é”™çš„é€‰æ‹© Handleré‡ŒCallbackå›è°ƒï¼šnew Handler(callback) æˆ‘ä»¬ä½¿ç”¨callbackæ¥åˆ›å»ºä¸€ä¸ªå¯¹è±¡è€Œä¸éœ€è¦æ´¾ç”ŸHandlerå­ç±»ï¼Œå¦‚æœä¸æƒ³æ´¾ç”Ÿå­ç±»çš„æ—¶å€™å¯ä»¥é€šè¿‡Callbackæ¥å®ç° handleMessage 12public void handleMessage(Message msg) &#123;&#125; é‡Œé¢ç©ºå®ç°éœ€è¦æˆ‘ä»¬è¿›è¡Œæ¶ˆæ¯çš„å¤„ç†æ“ä½œ å¤„ç†æ¶ˆæ¯çš„æµç¨‹èµ°é€šäº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å‘é€æ¶ˆæ¯çš„æµç¨‹handler.sendMessage -&gt; enqueueMessage1234567private boolean enqueueMessage(MessageQueue queue, Message msg, long uptimeMillis) &#123; msg.target = this; if (mAsynchronous) &#123; msg.setAsynchronous(true); &#125; return queue.enqueueMessage(msg, uptimeMillis);&#125; æ·»åŠ æ¶ˆæ¯åˆ°é˜Ÿåˆ—ä¸­çš„æ—¶å€™å°†handlerèµ‹å€¼ç»™äº†msgçš„targetï¼Œok,è¿›å…¥MessageQueueçš„enqueueMessage12345678910111213141516171819202122232425262728293031323334353637boolean enqueueMessage(Message msg, long when) &#123; synchronized (this) &#123; msg.markInUse(); msg.when = when; Message p = mMessages; boolean needWake; if (p == null || when == 0 || when &lt; p.when) &#123; // New head, wake up the event queue if blocked. msg.next = p; mMessages = msg; needWake = mBlocked; &#125; else &#123; // Inserted within the middle of the queue. Usually we don't have to wake // up the event queue unless there is a barrier at the head of the queue // and the message is the earliest asynchronous message in the queue. needWake = mBlocked &amp;&amp; p.target == null &amp;&amp; msg.isAsynchronous(); Message prev; for (;;) &#123; prev = p; p = p.next; if (p == null || when &lt; p.when) &#123; break; &#125; if (needWake &amp;&amp; p.isAsynchronous()) &#123; needWake = false; &#125; &#125; msg.next = p; // invariant: p == prev.next prev.next = msg; &#125; // We can assume mPtr != 0 because mQuitting is false. if (needWake) &#123; nativeWake(mPtr); &#125; &#125; return true; &#125;]]></content>
      <categories>
        <category>Androidæºç åˆ†æ</category>
      </categories>
      <tags>
        <tag>Androidæºç åˆ†æ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å®‰è£…åŒ…æ€§èƒ½ä¼˜åŒ–]]></title>
    <url>%2F2017%2F06%2F06%2F20170606_%E5%AE%89%E8%A3%85%E5%8C%85%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%2F</url>
    <content type="text"><![CDATA[å‰è¨€æœ¬ç« æˆ‘ä»¬å°†è®²è§£å®‰è£…åŒ…çš„æ€§èƒ½ä¼˜åŒ–ï¼Œåœ¨æœ¬ç¯‡æ–‡ç« ä¸­æˆ‘ä»¬å°†æŒ‰ç…§æ™®é€šå‹ç¼©æ–¹å¼ä»¥åŠé«˜çº§å‹ç¼©æ¥è¿›è¡Œè®²è§£ã€‚æ€»ä¹‹å°±æ˜¯ä¸€ä¸ªå­—ï¼šåˆ ï¼ï¼åˆ ä¸äº†å°±å°½é‡çš„å˜å°ã€‚ æ™®é€šå‹ç¼©æ–¹å¼å›¾ç‰‡å‹ç¼©å›¾ç‰‡ï¼šapké‡Œé¢çš„èµ„æºå›¾ç‰‡ å‹ç¼©å›¾ç‰‡svgå›¾ç‰‡ï¼šä¸€äº›å›¾ç‰‡çš„æè¿°ï¼Œç‰ºç‰²CPUçš„è®¡ç®—èƒ½åŠ›çš„ï¼ŒèŠ‚çœç©ºé—´ã€‚ä½¿ç”¨çš„åŸåˆ™ï¼šç®€å•çš„å›¾æ ‡ã€‚webp:è°·æ­Œç°åœ¨éå¸¸æå€¡çš„ä½¿ç”¨ã€‚ä¿å­˜å›¾ç‰‡æ¯”è¾ƒå°ã€‚VP8æ´¾ç”Ÿè€Œæ¥çš„ã€‚webpçš„æ— æŸå‹ç¼©æ¯”PNGæ–‡ä»¶å°45%å·¦å³ï¼Œå³ä½¿PNGè¿›è¿‡å…¶ä»–çš„å‹ç¼©å·¥å…·å‹ç¼©åï¼Œä»»ç„¶å¯ä»¥å‡å°åˆ°PNGçš„28%ã€‚Facebookåœ¨ç”¨ã€è…¾è®¯ã€æ·˜å®ã€‚ç¼ºç‚¹ï¼šåŠ è½½ç›¸æ¯”äºPNGè¦æ…¢å¾ˆå¤šã€‚ ä½†æ˜¯é…ç½®æ¯”è¾ƒé«˜ã€‚å›¾ç‰‡å‹ç¼©å·¥å…·ï¼štinypng.com/å›¾ç‰‡å‹ç¼©è½¬æ¢å·¥å…·ï¼šisparta.github.io/ èµ„æºåŠ¨æ€åŠ è½½æ¯”å¦‚ï¼šemojiè¡¨æƒ…ã€æ¢è‚¤ã€åŠ¨æ€ä¸‹è½½çš„èµ„æºã€ä¸€äº›æ¨¡å—çš„æ’ä»¶åŒ–åŠ¨æ€æ·»åŠ  Lintå·¥å…·ä½¿ç”¨Lintå·¥å…·åˆ é™¤æ— ç”¨çš„ä¸€äº›èµ„æºï¼ŒåŒ…æ‹¬ï¼š1ï¼‰æ£€æµ‹æ²¡æœ‰ç”¨çš„å¸ƒå±€ åˆ é™¤2ï¼‰æœªä½¿ç”¨åˆ°çš„èµ„æº æ¯”å¦‚ å›¾ç‰‡ â€”åˆ é™¤3ï¼‰å»ºè®®String.xmlæœ‰ä¸€äº›æ²¡æœ‰ç”¨åˆ°çš„å­—ç¬¦ã€‚ 7zZipå·¥å…·ä½¿ç”¨7zipè¿›è¡Œæé™å‹ç¼©ï¼Œå…·ä½“çš„ä½¿ç”¨æ­¥éª¤(1) ä¸‹è½½7-zipå®‰è£…æ–‡ä»¶ 7-ZIPç‰ˆæœ¬ï¼š9.20 x86 And x64 Windows(2) å°†apkåŒ…è§£å‹åˆ°æ–‡ä»¶å¤¹(3) å…¨é€‰æ‰€æœ‰çš„æ–‡ä»¶ï¼Œå³é”®æ·»åŠ åˆ°å‹ç¼©åŒ…(4) å‹ç¼©æ ¼å¼å¿…é¡»æ˜¯zipæ ¼å¼(5) å‹ç¼©ç­‰çº§é€‰æ‹©æé™å‹ç¼©(6) å‹ç¼©æ–¹æ³•å¿…é¡»æ˜¯Deflateï¼ˆè¯•äº†Deflate64,BZip2,LZMA,PPMdéƒ½æ— æ³•æ­£å¸¸å®‰è£…ï¼‰(7) å•è¯å¤§å°é€‰æ‹©256(8) å°†åç¼€æ”¹ä¸ºAPKå³å¯ 7zZipå‹ç¼©ç®—æ³•å¯¹æ¯” libèµ„æºä¼˜åŒ–(1) åŠ¨æ€ä¸‹è½½èµ„æº(2) ä¸€äº›æ¨¡å—çš„æ’ä»¶åŒ–åŠ¨æ€æ·»åŠ (3) soæ–‡ä»¶çš„è£å‰ªå’Œå‹ç¼© assetsèµ„æºä¼˜åŒ–(1) éŸ³é¢‘æ–‡ä»¶æœ€å¥½ä½¿ç”¨æœ‰æŸå‹ç¼©çš„æ ¼å¼ï¼Œæ¯”å¦‚é‡‡ç”¨opusã€mp3ç­‰æ ¼å¼ï¼Œä½†æ˜¯æœ€å¥½ä¸è¦ä½¿ç”¨æ— æŸå‹ç¼©çš„éŸ³ä¹æ ¼å¼(2) å¯¹ttfå­—ä½“æ–‡ä»¶å‹ç¼©ï¼Œå¯ä»¥é‡‡ç”¨fontCreatorå·¥å…·åªæå–å‡ºä½ éœ€è¦çš„æ–‡å­—ã€‚æ¯”å¦‚åœ¨åšæ—¥æœŸæ˜¾ç¤ºæ—¶ï¼Œå…¶å®åªéœ€è¦æ•°å­—å­—ä½“ï¼Œä½†æ˜¯ä½¿ç”¨åŸæœ‰çš„å­—ä½“åº“å¯èƒ½éœ€è¦10MBå¤§å°ï¼Œå¦‚æœåªæ˜¯æŠŠä½ éœ€è¦çš„å­—ä½“æå–å‡ºæ¥ç”Ÿæˆçš„å­—ä½“æ–‡ä»¶åªæœ‰10KBã€‚ Proguardæ··æ·†(1) å¯ä»¥åˆ é™¤æ³¨é‡Šä¸ªä¸ç”¨çš„ä»£ç (2) å°†javaæ–‡ä»¶åæ”¹ä¸ºçŸ­åa.java b.java(3) æ–¹æ³•åç­‰ CommonUtil.getDisplayMetrix() =&gt; a.a() é«˜çº§å‹ç¼©Proguardæ·±åº¦æ··æ·†æˆ‘ä»¬å°†æ··æ·†ä¹‹åçš„apkè§£å‹å‘ç°åªæ˜¯javaæ–‡ä»¶çš„åå­—è¿›è¡Œæ··æ·†ï¼Œäºæ˜¯æˆ‘ä»¬æœ‰äº†è¿™æ ·çš„ç–‘é—®èƒ½ä¸èƒ½è®²resæ–‡ä»¶é‡Œçš„æ–‡ä»¶åä¹Ÿå˜æˆa.xmlå‘¢ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œé‚£è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ åœ¨å¼€å§‹ä¹‹å‰æˆ‘ä»¬éœ€è¦äº†è§£ä¸€ä¸‹apkç¼–è¯‘åŸç†Androidåº”ç”¨ç¨‹åºä¸»è¦ç”±ä¸¤éƒ¨åˆ†å†…å®¹ç»„æˆï¼šä»£ç å’Œèµ„æºã€‚èµ„æºä¸»è¦å°±æ˜¯æŒ‡é‚£äº›ä¸UIç›¸å…³çš„ä¸œè¥¿ï¼Œä¾‹å¦‚UIå¸ƒå±€ã€å­—ç¬¦ä¸²å’Œå›¾ç‰‡ç­‰ã€‚ä»£ç å’Œèµ„æºåˆ†å¼€å¯ä»¥ä½¿å¾—åº”ç”¨ç¨‹åºåœ¨è¿è¡Œæ—¶æ ¹æ®å®é™…éœ€è¦æ¥ç»„ç»‡UIã€‚è¿™æ ·å°±å¯ä½¿å¾—åº”ç”¨ç¨‹åºåªéœ€è¦ç¼–è¯‘ä¸€æ¬¡ï¼Œå°±å¯ä»¥æ”¯æŒä¸åŒçš„UIå¸ƒå±€ã€‚è¿™ç§ç‰¹æ€§ä½¿å¾—åº”ç”¨ç¨‹åºåœ¨è¿è¡Œæ—¶å¯ä»¥é€‚åº”ä¸åŒçš„å±å¹•å¤§å°å’Œå¯†åº¦ï¼Œä»¥åŠä¸åŒçš„å›½å®¶å’Œè¯­è¨€ç­‰ã€‚ aaptç¼–è¯‘aaptå³Android Asset Packaging Toolï¼Œåœ¨SDKçš„build-toolsç›®å½•ä¸‹ã€‚è¯¥å·¥å…·å¯ä»¥æŸ¥çœ‹ï¼Œåˆ›å»ºï¼Œ æ›´æ–°ZIPæ ¼å¼çš„æ–‡æ¡£é™„ä»¶(zip, jar, apk)ã€‚ä¹Ÿå¯å°†èµ„æºæ–‡ä»¶ç¼–è¯‘æˆäºŒè¿›åˆ¶æ–‡ä»¶ã€‚ é€šè¿‡å›¾æˆ‘ä»¬å°±å¯ä»¥çœ‹å‡ºï¼šA. é™¤äº†assetså’Œres/rawèµ„æºè¢«åŸè£…ä¸åŠ¨åœ°æ‰“åŒ…è¿›APKä¹‹å¤–ï¼Œå…¶å®ƒçš„èµ„æºéƒ½ä¼šè¢«ç¼–è¯‘æˆ–è€…å¤„ç†ã€‚B. é™¤äº†assetsèµ„æºä¹‹å¤–ï¼Œå…¶å®ƒçš„èµ„æºéƒ½ä¼šè¢«èµ‹äºˆä¸€ä¸ªèµ„æºIDã€‚C. æ‰“åŒ…å·¥å…·è´Ÿè´£ç¼–è¯‘å’Œæ‰“åŒ…èµ„æºï¼Œç¼–è¯‘å®Œæˆä¹‹åï¼Œä¼šç”Ÿæˆä¸€ä¸ªresources.arscæ–‡ä»¶å’Œä¸€ä¸ªR.javaï¼Œå‰è€…ä¿å­˜çš„æ˜¯ä¸€ä¸ªèµ„æºç´¢å¼•è¡¨ï¼Œåè€…å®šä¹‰äº†å„ä¸ªèµ„æºIDå¸¸é‡ã€‚D. åº”ç”¨ç¨‹åºé…ç½®æ–‡ä»¶AndroidManifest.xmlåŒæ ·ä¼šè¢«ç¼–è¯‘æˆäºŒè¿›åˆ¶çš„XMLæ–‡ä»¶ï¼Œç„¶åå†æ‰“åŒ…åˆ°APKé‡Œé¢å»ã€‚E. åº”ç”¨ç¨‹åºåœ¨è¿è¡Œæ—¶é€šè¿‡AssetManageræ¥è®¿é—®èµ„æºï¼Œæˆ–é€šè¿‡èµ„æºIDæ¥è®¿é—®ï¼Œæˆ–é€šè¿‡æ–‡ä»¶åæ¥è®¿é—®ã€‚ å…¶ä¸­resources.arscæ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶è®°å½•äº†æ‰€æœ‰çš„åº”ç”¨ç¨‹åºèµ„æºç›®å½•çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬æ¯ä¸€ä¸ªèµ„æºåç§°ã€ç±»å‹ã€å€¼ã€IDä»¥åŠæ‰€é…ç½®çš„ç»´åº¦ä¿¡æ¯ã€‚æˆ‘ä»¬å¯ä»¥å°†è¿™ä¸ªresources.arscæ–‡ä»¶æƒ³è±¡æˆæ˜¯ä¸€ä¸ªèµ„æºç´¢å¼•è¡¨ï¼Œè¿™ä¸ªèµ„æºç´¢å¼•è¡¨åœ¨ç»™å®šèµ„æºIDå’Œè®¾å¤‡é…ç½®ä¿¡æ¯çš„æƒ…å†µä¸‹ï¼Œèƒ½å¤Ÿåœ¨åº”ç”¨ç¨‹åºçš„èµ„æºç›®å½•ä¸­å¿«é€Ÿåœ°æ‰¾åˆ°æœ€åŒ¹é…çš„èµ„æºã€‚ resource.arscæ–‡ä»¶é‡Œé¢çš„å†…å®¹ resources_arscäºŒè¿›åˆ¶è¡¨resources.arscä¸€å…±æœ‰äº”ç§chunkç±»å‹ï¼Œåˆ†åˆ«ä¸ºTYPETABLEï¼ŒTYPEPACKAGEï¼ŒTYPE_STRING ,TYPETYPEï¼ŒTYPECONFIGã€‚ â€”tableï¼Œæ˜¯æ•´ä¸ªreousces tableçš„å¼€å§‹ï¼Œå®ƒçš„chunksizeå³æ˜¯æ•´ä¸ªæ–‡ä»¶çš„å¤§å°ã€‚ â€”packageï¼ŒæŒ‡çš„æ˜¯ä¸€ä¸ªpackageçš„å¼€å§‹ï¼Œå…¶å®åœ¨resources,arscæ˜¯å¯ä»¥æœ‰å¤šä¸ªpackageçš„ã€‚è€ŒpackageIDå³æ˜¯èµ„æºresIDçš„æœ€é«˜å…«ä½ï¼Œä¸€èˆ¬æ¥è¯´ç³»ç»Ÿandroidçš„æ˜¯1(0Ã—01)ï¼Œæ™®é€šçš„ä¾‹å¦‚com.tencent.mmä¼šæ˜¯127(0x7f)ï¼Œå‰©ä¸‹çš„æ˜¯ä»2å¼€å§‹èµ·æ­¥ã€‚å½“ç„¶è¿™ä¸ªæˆ‘ä»¬åœ¨aaptä¹Ÿæ˜¯å¯ä»¥æŒ‡å®šçš„(1-127å³å…«ä½çš„åˆæ³•ç©ºé—´,ä¸€äº›æ··åˆç¼–è¯‘å°±æ˜¯æ”¹è¿™ä¸ªpackageID)ã€‚ â€”string, ä»£è¡¨stringblockï¼Œæˆ‘ä»¬ä¸€å…±æœ‰ä¸‰ç§ç±»å‹çš„stringblockã€‚åˆ†åˆ«æ˜¯table stringblock,typename stringblock, specsname stringblockã€‚ â€”typeï¼Œè¿™é‡Œè®²çš„æ˜¯typename stringblocké‡Œé¢æˆ‘ä»¬ç”¨åˆ°çš„å„ç§type(ç”¨åˆ°å¤šå°‘ç§ç±»å‹çš„type,å°±æœ‰å¤šå°‘ä¸ªtype chunk)ï¼Œä¾‹å¦‚attr, drawable, layout, id, color, animç­‰ï¼ŒType IDæ˜¯ç´§è·Ÿç€Package IDã€‚ â€”config, å³æ˜¯Androidç”¨æ¥æè¿°èµ„æºç»´åº¦ï¼Œä¾‹å¦‚æ¨ªç«–å±ï¼Œå±å¹•å¯†åº¦ï¼Œè¯­è¨€ç­‰ã€‚å¯¹äºæ¯ä¸€ç§typeï¼Œå®ƒå®šä¹‰äº†å¤šå°‘ç§configï¼Œå®ƒåé¢å°±ç´§è·Ÿç€å¤šå°‘ä¸ªconfig chunk,ä¾‹å¦‚æˆ‘ä»¬å®šä¹‰äº†drawable-mdpi,drawable-hdpi,é‚£åé¢å°±ä¼šæœ‰ä¸¤ä¸ªconfigã€‚ å°†Resource.arscæ–‡ä»¶éƒ¨åˆ†å†…å®¹è¯»å‡ºæ˜¾ç¤ºå¦‚ä¸‹ï¼š æœ€åå¦‚æœæˆ‘ä»¬è¦åœ¨è¿™é‡Œè¿›è¡Œæ··æ·†çš„è¯ï¼Œéœ€è¦è¯»å–äºŒè¿›åˆ¶æ–‡ä»¶resource.arscï¼Œç„¶åä¿®æ”¹æŸä¸€æ®µä¸€æ®µçš„å­—èŠ‚ã€‚ä¾‹å¦‚æœ‰ä¸€æ®µå«res/drawable/ic_launcher.png åœ¨è‡ªå·±æ•°ç»„å½“ä¸­çš„ç¬¬800-810ä½ï¼Œæˆ‘ä»¬åªéœ€è¦å°†è¿™ä¸€æ®µç¬¬800ä½-810ä½æ›¿æ¢æˆæ”¹æˆr/d/a.png çš„å­—èŠ‚ç å³å¯ å¥½äº†ï¼Œå‘ä¸€ä¸‹è¯»å–çš„ä»£ç 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667ZipFile zipFile = new ZipFile(path);InputStream inputStream = zipFile.getInputStream(new ZipEntry(""+"resources.arsc"));LEDataInputStream leDataInputStream = new LEDataInputStream(inputStream);//Resource Table å¤´short type = leDataInputStream.readShort();leDataInputStream.skipBytes(2);leDataInputStream.readInt();int packageNum = leDataInputStream.readInt();System.out.println("num of package:"+packageNum);//StringPoolå—int got =leDataInputStream.readInt();//å—å¤§å°int chunkSize = leDataInputStream.readInt();//å­—ç¬¦ä¸²æ•°é‡int stringCount = leDataInputStream.readInt();//styleæ•°é‡int styleCount = leDataInputStream.readInt();//æ ‡è®°int flags = leDataInputStream.readInt();//å­—ç¬¦ä¸²èµ·å§‹ä½ç½®int stringsOffset = leDataInputStream.readInt();//styleèµ·å§‹ä½ç½®int stylesOffset = leDataInputStream.readInt();int[] array = new int[stringCount];for (int i = 0; i &lt; stringCount; ++i)&#123; array[i] = leDataInputStream.readInt();&#125;if (styleCount != 0) &#123; for (int i = 0; i &lt; styleCount; ++i) array[i] = leDataInputStream.readInt();&#125;//å­—ç¬¦ä¸²é•¿åº¦int size = ((stylesOffset == 0) ? chunkSize : stylesOffset) - stringsOffset;byte[] m_strings = new byte[size];StringBuffer ss = new StringBuffer();leDataInputStream.readFully(m_strings);for(int i = 0;i&lt;m_strings.length;i++)&#123; //(é€šè¿‡æ‰“å¼€resources.arscçœ‹åˆ°ä¸€äº›ä¹±ç  çŒœå¾—å‡ºå­—ç¬¦éƒ½æ˜¯ASCIIç ) char c = (char) m_strings[i]; ss.append(c);&#125;System.out.println(ss.toString());if (stylesOffset != 0) &#123; size = chunkSize - stylesOffset; if (size % 4 != 0) throw new IOException("Style data size is not multiple of 4 (" + size + ")."); for (int i = 0; i &lt; size / 4; ++i) leDataInputStream.readInt();&#125;//nextChunkleDataInputStream.readShort();leDataInputStream.skipBytes(2);leDataInputStream.readInt();int id = (byte) leDataInputStream.readInt();StringBuilder sb = new StringBuilder(16);int length = 256;while (length-- != 0) &#123; short ch = leDataInputStream.readShort(); if (ch == 0) break; sb.append((char)ch); &#125;System.out.println("pacakgeName:"+sb.toString()); zipalignä¼˜åŒ–æˆ‘ä»¬çŸ¥é“APKå…¶å®å°±æ˜¯ä¸€ä¸ªZipå‹ç¼©æ–‡ä»¶ï¼Œä»åŸç†ä¸Šæ¥è®²å°±æ˜¯é€šè¿‡æ ¼å¼åŒ–Zipæ–‡ä»¶å¤¹ä¸­äºŒè¿›åˆ¶æ–‡ä»¶çš„åºåˆ—ï¼Œè¾¾åˆ°æå‡ç³»ç»Ÿè§£æé€Ÿåº¦ã€‚å°±åƒæˆ‘ä»¬åœ¨é˜…è¯»ä»£ç çš„è¿‡ç¨‹ä¸­å…ˆæ ¼å¼åŒ–ä¸€éä»£ç ï¼Œä¼šè®©æˆ‘ä»¬æ›´å®¹æ˜“ç†è§£å…¶å«ä¹‰ä¸€æ ·ã€‚åœ¨Androidå¹³å°ä¸­ï¼Œæ•°æ®æ–‡ä»¶å­˜å‚¨åœ¨apkæ–‡ä»¶ä¸­ï¼Œå¯ä»¥å¤šè¿›ç¨‹çš„è®¿é—®ï¼Œå¦‚æœä½ å¼€å‘è¿‡Win32å¯èƒ½çŸ¥é“ç¨‹åºçš„ç²’åº¦å¯¹é½é—®é¢˜ï¼Œä¸é”™è™½ç„¶ä¸æ˜¯PEæ ¼å¼çš„æ–‡ä»¶ï¼Œåœ¨Zipä¸­ä¸€æ ·ï¼Œèµ„æºçš„è®¿é—®å¯ä»¥é€šè¿‡æ›´å¥½çš„å¯¹å…¶ä¼˜åŒ–ï¼Œè€Œzipalignä½¿ç”¨äº†4å­—èŠ‚çš„è¾¹ç•Œå¯¹é½æ–¹å¼æ¥å½±å°„å†…å­˜ï¼Œé€šè¿‡ç©ºé—´æ¢æ—¶é—´çš„æ–¹å¼æé«˜æ‰§è¡Œæ•ˆç‡ã€‚ æˆ‘ç†è§£çš„æ˜¯ï¼šé€šä¿—çš„è¯´å°±æ˜¯æŒ‰ç€æœ‰åˆ©äºç³»ç»Ÿå¤„ç†çš„æ’åˆ—æ–¹å¼ï¼Œå¯¹æˆ‘ä»¬apkä¸­çš„èµ„æºæ–‡ä»¶è¿›è¡Œæ’åˆ—ï¼Œæé«˜èµ„æºçš„æŸ¥æ‰¾é€Ÿåº¦ï¼Œä»è€Œå»æé«˜åº”ç”¨çš„è¿è¡Œæ•ˆç‡ã€‚å…ˆç­¾åå†å¯¹é½,å¦åˆ™å…ˆå¯¹é½å†ç­¾åä¼šç ´åå¯¹é½ä½¿ç”¨1234567891011 release &#123; // ä¸æ˜¾ç¤ºLog buildConfigField "boolean", "LOG_DEBUG", "false" //æ··æ·† minifyEnabled true //Zipalignä¼˜åŒ– zipAlignEnabled true // ç§»é™¤æ— ç”¨çš„resourceæ–‡ä»¶ shrinkResources true ......&#125; ä½¿ç”¨ReDexä¼˜åŒ–ReDexæ˜¯Facebookå¼€æºä¸€ä¸ªå‡å°å®‰å“appå¤§å°ä»¥æé«˜æ€§èƒ½çš„å·¥å…·ï¼Œå†…åµŒä»¥åŠæ¸…é™¤åƒµå°¸ä»£ç è¿™æ ·çš„ä¼˜åŒ–æ¥å‡å°å­—èŠ‚ç ï¼Œä¸»è¦æ˜¯å¯¹Dexè¿›è¡Œäº†ä¼˜åŒ–ï¼Œèƒ½è®©APK è¿è¡Œæ›´å¿«ï¼Œä¸è¿‡éœ€è¦å¤šæµ‹è¯•æ˜¯å¦ä¼šå´©æºƒã€‚ ç»è¿‡ Redex è½¬æ¢åçš„ APKï¼Œä½“ç§¯å˜å¾—æ›´å°ï¼Œè¿è¡Œé€Ÿåº¦å˜å¾—æ›´å¿«ã€‚Redex åŸºäºç®¡é“çš„æ–¹å¼æ¥ä¼˜åŒ– Android çš„ .dex æ–‡ä»¶ï¼Œä¸€ä¸ªæº .dex æ–‡ä»¶é€šè¿‡ç®¡é“è¿›è¡Œä¸€ç³»åˆ—çš„è‡ªå®šä¹‰è½¬æ¢åï¼Œå°†å¾—åˆ°ä¸€ä¸ªä¼˜åŒ–çš„ .dex æ–‡ä»¶ã€‚ æˆ‘ä»¬çŸ¥é“ Android çš„ç¼–è¯‘è¿‡ç¨‹é¦–å…ˆæ˜¯é€šè¿‡ javac å·¥å…·å°† .java æ–‡ä»¶ç¼–è¯‘æˆ .class æ–‡ä»¶ï¼Œæ¥ç€å°†æ‰€æœ‰çš„ .class æ–‡ä»¶åˆå¹¶æˆ Dalvik è™šæ‹Ÿæœºçš„å¯æ‰§è¡Œæ–‡ä»¶ .dexï¼Œæœ€åå†è·Ÿå…¶ä»–èµ„æºç­‰æ–‡ä»¶ä¸€èµ·å‹ç¼©æˆ APK æ–‡ä»¶ï¼Œå¤§è‡´æµç¨‹å¦‚ä¸‹æ‰€ç¤ºï¼š è½¬æ¢çš„æ—¶æœºRedex é€‰æ‹©åŸºäºå­—èŠ‚ç æ–‡ä»¶è€Œä¸æ˜¯ Java æºç è¿›è¡Œä¼˜åŒ–ï¼Œæ˜¯å› ä¸ºå­—èŠ‚ç ç›¸æ¯” Java æºç è€Œè¨€ï¼Œå¯ä»¥è¿›è¡Œæ›´ä¸ºå…¨å±€çš„ï¼Œç±»ä¸ç±»ä¹‹é—´çš„ä¼˜åŒ–ï¼Œè€Œä¸æ˜¯å•ä¸ªç±»æ–‡ä»¶çš„å±€éƒ¨ä¼˜åŒ–ï¼›é€‰æ‹©åŸºäº dex å­—èŠ‚ç è€Œä¸æ˜¯ Java å­—èŠ‚ç è¿›è¡Œä¼˜åŒ–ï¼Œæ˜¯å› ä¸ºæŸäº›ä¼˜åŒ–åªèƒ½åœ¨ dex æ–‡ä»¶ä¸­è¿›è¡Œã€‚ ç®¡é“çš„æ€æƒ³é‰´äºéšç€æ—¶é—´çš„æ¨ç§»ï¼Œå¼€å‘äººå‘˜å¯èƒ½ä¼šä¸æ–­å¾—åˆ°æ–°çš„ä¼˜åŒ– ideaï¼Œä¸ºäº†æ–¹ä¾¿çš„å°†æ–°çš„ä¼˜åŒ–ç‚¹åŠ å…¥æ—¢æœ‰çš„ä»£ç ä¸­ï¼ŒåŒæ—¶ä¹Ÿæ–¹ä¾¿ä¸åŒå¼€å‘äººå‘˜å¹¶è¡Œå¼€å‘ä¼˜åŒ–ç‚¹ï¼Œ æ‰€ä»¥ Redex é€‰æ‹©åŸºäºç®¡é“çš„æ€æƒ³æ¥å®ç° dex çš„ä¼˜åŒ–ï¼Œè¿™æ ·æ¯ä¸€ä¸ªä¼˜åŒ–çš„ idea å¯ä»¥é€šè¿‡æ’ä»¶çš„å½¢å¼é›†æˆåˆ°ç®¡é“ä¸­ï¼Œå®ç°å³æ’å³ç”¨ï¼Œä¹Ÿä¸ä¼šå½±å“å…¶ä»–çš„ä¼˜åŒ–æ’ä»¶ï¼Œæ•´ä½“ä¼˜åŒ–æµç¨‹å¦‚ä¸‹æ‰€ç¤ºï¼šgithubåœ°å€ï¼šhttps://github.com/facebook/redex]]></content>
      <categories>
        <category>æ€§èƒ½ä¼˜åŒ–</category>
      </categories>
      <tags>
        <tag>æ€§èƒ½ä¼˜åŒ–</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Serviceè¿›ç¨‹é˜²æ€æŠ€æœ¯]]></title>
    <url>%2F2017%2F06%2F05%2F20170605_Service%E8%BF%9B%E7%A8%8B%E9%98%B2%E6%9D%80%E6%8A%80%E6%9C%AF%2F</url>
    <content type="text"><![CDATA[å‰è¨€]]></content>
      <categories>
        <category>æ€§èƒ½ä¼˜åŒ–</category>
      </categories>
      <tags>
        <tag>æ€§èƒ½ä¼˜åŒ–</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ€§èƒ½ä¼˜åŒ–åˆ©å™¨(å›¾ç‰‡å‹ç¼©)]]></title>
    <url>%2F2017%2F06%2F04%2F20170604_%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%88%A9%E5%99%A8(%E5%9B%BE%E7%89%87%E5%8E%8B%E7%BC%A9)%2F</url>
    <content type="text"><![CDATA[]]></content>
      <categories>
        <category>æ€§èƒ½ä¼˜åŒ–</category>
      </categories>
      <tags>
        <tag>æ€§èƒ½ä¼˜åŒ–</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ€§èƒ½ä¼˜åŒ–åˆ©å™¨(UIæ¸²æŸ“ç¯‡)]]></title>
    <url>%2F2017%2F06%2F03%2F20170603_%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%88%A9%E5%99%A8(UI%E6%B8%B2%E6%9F%93%E7%AF%87)%2F</url>
    <content type="text"><![CDATA[å‰è¨€æœ¬ç¯‡æˆ‘ä»¬æ¥å­¦ä¹ å¦‚ä½•åœ¨UIæ¸²æŸ“çš„å±‚é¢ä¸Šå¯¹æ€§èƒ½è¿›è¡Œä¼˜åŒ–ï¼Œå…¶å®å°±æ˜¯ç»“åˆhierarchyviewerå·¥å…·å¯¹å¸ƒå±€ä¸­åµŒå¥—å±‚æ¬¡ã€è¿‡åº¦ç»˜åˆ¶ç­‰è¿›è¡Œä¼˜åŒ–. CPU &amp; GPUä»‹ç»Androidç³»ç»Ÿçš„æ¸²æŸ“ç®¡çº¿åˆ†ä¸ºä¸¤ä¸ªå…³é”®ç»„ä»¶ï¼šCPUå’ŒGPUï¼Œå®ƒä»¬å…±åŒå·¥ä½œï¼Œåœ¨å±å¹•ç»˜åˆ¶å›¾ç‰‡ï¼Œæ¯ä¸ªç»„ä»¶éƒ½æœ‰è‡ªèº«å®šä¹‰çš„ç‰¹å®šæµç¨‹ã€‚æˆ‘ä»¬å¿…é¡»éµå®ˆè¿™äº›ç‰¹å®šçš„æ“ä½œè§„åˆ™æ‰èƒ½è¾¾åˆ°æ•ˆæœã€‚OKï¼Œæ¥å¼ å›¾äº†è§£ä¸€ä¸‹CPUå’ŒGPUçš„èŒè´£åœ¨CPUæ–¹é¢ï¼Œæœ€å¸¸è§çš„æ€§èƒ½é—®é¢˜å°±æ˜¯ä¸å¿…è¦çš„å¸ƒå±€ï¼Œè¿™äº›å†…å®¹å¿…é¡»åœ¨è§†å›¾å±‚æ¬¡ç»“æ„ä¸­è¿›è¡Œæµ‹é‡ã€æ¸…é™¤å¹¶é‡æ–°åˆ›å»ºï¼Œå¼•å‘è¿™ç§é—®é¢˜é€šå¸¸æœ‰ä¸¤ä¸ªåŸå› ï¼š1æ˜¯é‡å»ºæ˜¾ç¤ºåˆ—è¡¨æ¬¡æ•°å¤ªå¤š 2æ˜¯èŠ±è´¹å¤ªå¤šæ—¶é—´ä½œåºŸè§†å›¾å±‚æ¬¡å¹¶è¿›è¡Œä¸å¿…è¦çš„é‡ç»˜ï¼Œè¿™ä¸¤ä¸ªåŸå› åœ¨æ›´æ–°æ˜¾ç¤ºåˆ—è¡¨æˆ–è€…å…¶ä»–ç¼“å­˜GPUèµ„æºæ—¶å¯¼è‡´CPUå·¥ä½œè¿‡åº¦ åœ¨GPUæ–¹é¢ï¼Œæœ€å¸¸è§çš„é—®é¢˜æ˜¯æˆ‘ä»¬æ‰€è¯´çš„è¿‡åº¦ç»˜åˆ¶ï¼Œé€šå¸¸å®åœ¨åƒç´ ç€è‰²è¿‡ç¨‹ä¸­ï¼Œé€šè¿‡å…¶ä»–å·¥å…·è¿›è¡ŒåæœŸç€è‰²æ—¶æµªè´¹äº†GPUå¤„ç†æ—¶é—´ æƒ³è¦å¼€å‘ä¸€æ¬¾æ€§èƒ½ä¼˜è¶Šçš„åº”ç”¨ï¼Œæˆ‘ä»¬è¦äº†è§£åº•å±‚æ˜¯å¦‚ä½•è¿è¡Œçš„ã€‚æœ‰ä¸€ä¸ªä¸»è¦çš„é—®é¢˜å°±æ˜¯ï¼ŒActivityæ˜¯å¦‚ä½•ç»˜åˆ¶åˆ°å±å¹•ä¸Šï¼Ÿå“ªäº›å¤æ‚çš„XMLå¸ƒå±€æ–‡ä»¶å’Œæ ‡è®°è¯­è¨€ï¼Œæ˜¯å¦‚ä½•è½¬åŒ–æˆç”¨æˆ·èƒ½çœ‹æ‡‚çš„å›¾åƒçš„ï¼Ÿå®é™…ä¸Šï¼Œè¿™æ˜¯ç”±æ ¼æ …åŒ–æ“ä½œæ¥å®Œæˆçš„ï¼Œæ ¼æ …åŒ–å°±æ˜¯å°†ä¾‹å¦‚å­—ç¬¦ä¸²ã€æŒ‰é’®ã€è·¯å¾„æˆ–è€…å½¢çŠ¶çš„ä¸€äº›é«˜çº§å¯¹è±¡ï¼Œæ‹†åˆ†åˆ°ä¸åŒçš„åƒç´ ä¸Šåœ¨å±å¹•ä¸Šè¿›è¡Œæ˜¾ç¤ºï¼Œæ ¼æ …åŒ–æ˜¯ä¸€ä¸ªéå¸¸è´¹æ—¶çš„æ“ä½œã€‚æˆ‘ä»¬æ‰€æœ‰äººçš„æ‰‹æœºé‡Œé¢éƒ½æœ‰ä¸€å—ç‰¹æ®Šç¡¬ä»¶ï¼Œå®ƒå°±æ˜¯å›¾åƒå¤„ç†å™¨ï¼ˆGPUæ˜¾å¡çš„å¤„ç†å™¨ï¼‰ï¼Œç›®çš„å°±æ˜¯åŠ å¿«æ ¼æ …åŒ–çš„æ“ä½œï¼ŒGPUåœ¨ä¸Šä¸ªä¸–çºª90å¹´ä»£è¢«å¼•å…¥ç”¨æ¥å¸®åŠ©åŠ å¿«æ ¼æ …åŒ–æ“ä½œã€‚ 60HZæ˜¯å±å¹•åˆ·æ–°ç†æƒ³çš„é¢‘ç‡ã€‚60fpsâ€”ä¸€ç§’å†…ç»˜åˆ¶çš„å¸§æ•°ã€‚24å¸§/ç§’ ç”µæºèƒ¶å·æ—¶ä»£ åœ¨60fpså†…ï¼Œç³»ç»Ÿä¼šå¾—åˆ°å‘é€çš„VSYNC(å‚ç›´åˆ·æ–°)ä¿¡å·quå»è¿›è¡Œæ¸²æŸ“ï¼Œå°±ä¼šæ­£å¸¸åœ°ç»˜åˆ¶ã€‚60fpsè¦æ±‚ï¼šæ¯ä¸€å¸§åªèƒ½åœç•™16ms. VSYNC(å‚ç›´åˆ·æ–°/ç»˜åˆ¶)ï¼šæœ‰ä¸¤ä¸ªæ¦‚å¿µ 1ï¼‰Refresh Rateï¼šå±å¹•åœ¨ä¸€ç§’æ—¶é—´å†…åˆ·æ–°å±å¹•çš„æ¬¡æ•°â€”-æœ‰ç¡¬ä»¶çš„å‚æ•°å†³å®šï¼Œæ¯”å¦‚60HZ. 2ï¼‰Frame Rateï¼šGPUåœ¨ä¸€ç§’å†…ç»˜åˆ¶æ“ä½œçš„å¸§æ•°ï¼Œæ¯”å¦‚ï¼š60fpsã€‚ Hierarchyviewerå·¥å…·çš„ä½¿ç”¨é¦–å…ˆå¿…ç„¶æ˜¯å¦‚ä½•å»ä½¿ç”¨Hierarchyviewerå»é“¾æ¥åˆ°æ¨¡æ‹Ÿå™¨æˆ–çœŸæœºä¸Šï¼Œè¿™é‡Œç»™å‡ºåˆ«äººå†™ä¸é”™çš„åšå®¢ï¼Œå¯ä»¥æŒ‰ç…§æ­¥éª¤å»å®‰è£…å°±å¯ä»¥äº†ã€‚https://www.jianshu.com/p/afbf3444db19 GPUè¿‡åº¦ç»˜åˆ¶é—®é¢˜è¿›è¡Œä¼˜åŒ–ç›®å‰æµè¡Œçš„å¸ƒå±€å°±æ˜¯ä¸€æŠŠåŒåˆƒå‰‘ï¼Œå¸¦ç»™æˆ‘ä»¬æ¼‚äº®çš„è§†è§‰æ„Ÿå—çš„åŒæ—¶ï¼Œä¹Ÿé€ æˆè¿‡åº¦ç»˜åˆ¶çš„é—®é¢˜ï¼Œä¸ºäº†æœ€å¤§é™åº¦åœ°æé«˜åº”ç”¨ç¨‹åºçš„æ€§èƒ½ï¼Œæˆ‘ä»¬å¿…é¡»å‡å°‘è¿‡åº¦ç»˜åˆ¶ã€‚å¸¸ç”¨çš„æ–¹æ³•å°±æ˜¯æ‰‹æœºå¼€å‘è€…è‡ªå¸¦çš„Show GPU overdrawã€‚ å¯¹äºGPUçš„ä¼˜åŒ–æˆ‘ä»¬æœ‰ä¸¤ä¸ªæ–¹æ¡ˆ 1ã€å»æ‰å› ä¸ºå¸ƒå±€ä¸­ã€ä¸»é¢˜ä¸­çš„èƒŒæ™¯å¼•èµ·çš„è¿‡åº¦ç»˜åˆ¶ 2ã€åœ¨è‡ªå®šä¹‰Viewä¸­é€šè¿‡clipRectè£å‰ªæ¥å‡å°‘è¿‡åº¦ç»˜åˆ¶ 1ã€å¦‚æœå»æ‰ä¸»é¢˜çš„èƒŒæ™¯å¯ä½¿ç”¨getWindow().setBackgroundDrawable(null); 2ã€è‡ªå®šä¹‰Viewä¸­çš„ä¼˜åŒ–ok,å…ˆæ¥çœ‹ä¸€ä¸‹ä¼˜åŒ–ä¹‹å‰çš„æ•ˆæœ å›¾ä¸å›¾çš„é‡å åŒºåŸŸå‘ç”Ÿäº†è¿‡åº¦ç»˜åˆ¶çš„ç°è±¡ï¼Œå¯¹äºè‡ªå®šä¹‰viewçš„ä¼˜åŒ–ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨äº†canvas.clipRect 1234567private void drawDroidCard(Canvas canvas,List&lt;DroidCard&gt; mDroidCards,int i) &#123; DroidCard c = mDroidCards.get(i); canvas.save(); canvas.clipRect((float)c.x,0f,(float)(mDroidCards.get(i+1).x),(float)c.height); canvas.drawBitmap(c.bitmap,c.x,0f,paint); canvas.restore();&#125; æ˜¯ä¸æ˜¯å¾ˆ6ï¼ï¼ CPUè¿‡åº¦ç»˜åˆ¶é—®é¢˜è¿›è¡Œä¼˜åŒ–CPUçš„ä¼˜åŒ–è¦ä»å‡è½»åŠ å·¥Viewå¯¹è±¡æˆPolygonså’ŒTextureæ¥ä¸‹æ‰‹ï¼Œå› ä¸ºåœ¨æˆ‘ä»¬çš„å¸ƒå±€ä¸­åŒ…å«äº†å¤ªå¤šçš„æ²¡ç”¨çš„Viewï¼Œè¿™äº›Viewæ ¹æœ¬å°±ä¸ä¼šæ˜¾ç¤ºåˆ°å±å¹•ä¸Šï¼Œä¸€æ—¦è§¦å‘æµ‹é‡å’Œå¸ƒå±€æ“ä½œå°±ä¼šæ‹–ç´¯åº”ç”¨çš„æ€§èƒ½è¡¨ç°ã€‚è¿™æ—¶å€™å°±éœ€è¦ä½¿ç”¨æˆ‘ä»¬çš„View Hierarchyå·¥å…·æ¥æ‰¾å‡ºæ²¡ç”¨çš„Viewã€å‡å°‘ä¸å¿…è¦Viewçš„åµŒå¥— ä¸‰ä¸ªåœ†ç‚¹åˆ†åˆ«ä»£è¡¨ï¼šæµ‹é‡ã€å¸ƒå±€ã€ç»˜åˆ¶ä¸‰ä¸ªé˜¶æ®µçš„æ€§èƒ½è¡¨ç°ã€‚ 1ï¼‰ç»¿è‰²ï¼šæ¸²æŸ“çš„ç®¡é“é˜¶æ®µï¼Œè¿™ä¸ªè§†å›¾çš„æ¸²æŸ“é€Ÿåº¦å¿«äºè‡³å°‘ä¸€åŠçš„å…¶ä»–çš„è§†å›¾ã€‚ 2ï¼‰é»„è‰²ï¼šæ¸²æŸ“é€Ÿåº¦æ¯”è¾ƒæ…¢çš„50%ã€‚ 3ï¼‰çº¢è‰²ï¼šæ¸²æŸ“é€Ÿåº¦éå¸¸æ…¢ã€‚ ä¼˜åŒ–æ€æƒ³:æŸ¥çœ‹è‡ªå·±çš„å¸ƒå±€ï¼Œå±‚æ¬¡æ˜¯å¦å¾ˆæ·±ä»¥åŠæ¸²æŸ“æ¯”è¾ƒè€—æ—¶ï¼Œç„¶åæƒ³åŠæ³•èƒ½å¦å‡å°‘å±‚çº§ä»¥åŠä¼˜åŒ–æ¯ä¸€ä¸ªViewçš„æ¸²æŸ“æ—¶é—´ã€‚ View Hierarchyå·¥å…·ä½¿ç”¨æ¯”è¾ƒç®€å•ï¼Œè¿™é‡Œä¾¿ä¸å†å¤šè¯´ã€‚ æœªå®Œï¼Œå¾…ç»­â€¦.]]></content>
      <categories>
        <category>æ€§èƒ½ä¼˜åŒ–</category>
      </categories>
      <tags>
        <tag>æ€§èƒ½ä¼˜åŒ–</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ€§èƒ½ä¼˜åŒ–åˆ©å™¨(å†…å­˜æŠ–åŠ¨ç¯‡)]]></title>
    <url>%2F2017%2F06%2F02%2F20170602_%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%88%A9%E5%99%A8(%E5%86%85%E5%AD%98%E6%8A%96%E5%8A%A8%E7%AF%87)%2F</url>
    <content type="text"><![CDATA[å‰è¨€TraceViewè¿™ä¸ªå·¥å…·æ˜¯Android SDKä¸­å†…ç½®çš„ä¸€ä¸ªå·¥å…·ï¼Œé€šè¿‡ç”Ÿæˆtraceæ–‡ä»¶æ¥å±•ç¤ºä»£ç çš„æ‰§è¡Œæ—¶é—´ã€æ¬¡æ•°ä¾¿äºæˆ‘ä»¬åˆ†æã€‚é‚£TraceViewçš„åº”ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå½“æˆ‘ä»¬é¢å¯¹æ‰‹æœºè¿è¡Œappæ‰§è¡ŒæŸä¸ªæ“ä½œè¿‡äºå¡é¡¿æ—¶å€™ï¼Œæˆ‘ä»¬è¦åœ¨æ— è¾¹é™…çš„ä»£ç æ‰¾åˆ°ç½ªé­ç¥¸é¦–æœªå…å¤ªç—›è‹¦äº†ï¼Œå°±åœ¨è¿™æ—¶å€™å°±ä½“ç°äº†TraceViewçš„å¼ºå¤§ã€‚å®ƒä¸»è¦è§£å†³ä¸‹é¢ä¸¤ä¸ªåœºæ™¯ï¼š1ã€è°ƒç”¨æ¬¡æ•°ä¸å¤šï¼Œä½†æ˜¯æ¯ä¸€æ¬¡æ‰§è¡Œéƒ½å¾ˆè€—æ—¶2ã€æ–¹æ³•è€—æ—¶ä¸å¤§ï¼Œä½†æ˜¯è°ƒç”¨æ¬¡æ•°å¤ªå¤šå‰è€…å¯èƒ½ä¼šé€ æˆCPUé¢‘ç¹è°ƒç”¨ï¼Œæ‰‹æœºå‘çƒ«çš„é—®é¢˜ï¼Œåè€…åˆ™å°±æ˜¯å¡é¡¿çš„é—®é¢˜ã€‚ä¸ºäº†ç¡®ä¿åº”ç”¨ç¨‹åºçš„é«˜æ€§èƒ½ï¼Œæ¯é¡¹åŠŸèƒ½éƒ½åº”è¯¥å°½å¯èƒ½é«˜æ•ˆåœ°è¿è¡Œã€‚ ç”Ÿæˆtraceæ–‡ä»¶è¦ä½¿ç”¨TraceViewå·¥å…·å°±åº”è¯¥çŸ¥é“æ€æ ·å»ç”Ÿæˆtraceæ–‡ä»¶ï¼Œåœ¨Androidä¸­ç”Ÿæˆtraceæ–‡ä»¶çš„æ–¹æ³•ä¹ŸæŒºå¤šï¼Œæœ‰ä»¥ä¸‹ä¸‰ä¸ªæ–¹æ³•ï¼š1ã€ä½¿ç”¨ä»£ç 2ã€ä½¿ç”¨Android Studio3ã€ä½¿ç”¨DDMSè¿™ä¸‰ç§çš„å…·ä½“æ‰“å¼€æ–¹æ³•è¯·çœ‹http://blog.csdn.net/u011240877/article/details/54347396 TraceViewå·¥å…·çš„ä½¿ç”¨è¿™é‡Œæˆ‘ä»¬åªä»‹ç»ä½¿ç”¨DDMSçš„æ–¹å¼ç”Ÿæˆtraceæ–‡ä»¶çš„æƒ…å†µï¼Œå› ä¸ºå…¶ä»–çš„æƒ…å†µæœ‰ä¸€äº›é™åˆ¶ï¼ˆéœ€è¦rootæ‰‹æœºã€ä¸èƒ½ç›´è§‚æŸ¥çœ‹æ‰§è¡Œæ—¶é—´ï¼‰Okï¼Œç½‘ä¸Šå·²ç»æœ‰å¾ˆå¤šå…³äº TraceViewçš„ä½¿ç”¨ï¼Œè¿™é‡Œå°±ä¸å†é‡å¤é€ è½®å­http://blog.csdn.net/itfootball/article/details/48792435 å®é™…åº”ç”¨å¯¹äºè¿™äº›æ“ä½œä¿¡æ¯éƒ½å·²ç»è®²å®Œäº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å®é™…åº”ç”¨ä»¥ä¸‹1234567891011121314151617181920212223public void imPrettySureSortingIsFree() &#123;//æ’åºåæ‰“å°äºŒç»´æ•°ç»„ï¼Œä¸€è¡Œè¡Œæ‰“å° int dimension = 300; int[][] lotsOfInts = new int[dimension][dimension]; Random randomGenerator = new Random(); for(int i = 0; i &lt; lotsOfInts.length; i++) &#123; for (int j = 0; j &lt; lotsOfInts[i].length; j++) &#123; lotsOfInts[i][j] = randomGenerator.nextInt(); &#125; &#125; for(int i = 0; i &lt; lotsOfInts.length; i++) &#123; String rowAsStr = ""; //æ’åº int[] sorted = getSorted(lotsOfInts[i]); //æ‹¼æ¥æ‰“å° for (int j = 0; j &lt; lotsOfInts[i].length; j++) &#123; rowAsStr += sorted[j]; if(j &lt; (lotsOfInts[i].length - 1))&#123; rowAsStr += ", "; &#125; &#125; &#125;&#125; çœ‹åˆ°ä¸Šé¢çš„ä»£ç æˆ‘ä»¬ä¸€çœ¼å°±èƒ½çœ‹å‡ºæ¥ä¸èƒ½å¤Ÿä½¿ç”¨å­—ç¬¦ä¸²çš„åŠ å·è€Œåº”è¯¥æ”¹ä¸ºStringBuilderæˆ–è€…StringBufferçš„appendæ–¹æ³•ï¼Œä¾‹å­æ¯”è¾ƒç®€å•ä¸»è¦æˆ‘ä»¬è¿˜æ˜¯å­¦ä¹ å¦‚ä½•å»æŸ¥æ‰¾å¯¼è‡´appå¡é¡¿çš„ä»£ç æ–¹æ³•ã€‚åœ¨æ—¶é—´çº¿é¢æ¿ä¸Šåœ¨mainçº¿ç¨‹ä¸Šæ‰¾åˆ°ç›¸åŒé¢œè‰²å‡ºç°é¢‘ç‡æœ€å¤šçš„ä¸€ä¸ªå°ç«‹æŸ±ï¼Œç‚¹å‡»ä¹‹åå†åˆ†æé¢æ¿å°±å»ä¼šå®šä½åˆ°è¯¥æ–¹æ³•ï¼Œç„¶ååˆ†æCpuæ‰§è¡Œè¯¥æ–¹æ³•å’Œå…¶å­æ–¹æ³•æ‰€èŠ±è´¹çš„æ—¶é—´ä»¥åŠè°ƒç”¨æ¬¡æ•°+é€’å½’æ¬¡æ•°æ¥æŸ¥æ‰¾å½“å‰æ–¹æ³•æ˜¯å¦æ˜¯æˆ‘ä»¬åº”ç”¨ä¸­å‘ç”Ÿå†…å­˜å¡é¡¿çš„æ–¹æ³•ï¼Œå½“è¿™ä¸ªæ–¹æ³•ä¸æ˜¯ï¼Œä½†æ˜¯æˆ‘å æ—¶é—´æˆ–è€…æ¬¡æ•°è¾ƒé«˜åˆ™å¯ä»¥å¯¹å…¶Parentæˆ–è€…Childè¿›è¡ŒæŸ¥è¯¢,å½“ç„¶ä¹Ÿæœ‰å¯èƒ½æˆ‘ä»¬æ‰¾ä¸åˆ°ç›¸åº”çš„æ–¹æ³•ï¼Œä½†æ˜¯å¯ä»¥ä»è¿™é‡Œé¢çš„æ–¹æ³•æ‰¾åˆ°ç›¸åº”çš„è››ä¸é©¬è¿¹ok,æˆ‘ä»¬å®šä½åˆ°äº†è¿™ä¸ªæ–¹æ³•ï¼Œè¿™æ—¶å€™æˆ‘ä»¬éœ€ä¸éœ€è¦åœ¨æŸ¥çœ‹parentå‘¢ï¼Ÿè¿™æ—¶å€™ä¹Ÿè¦çœ‹å®é™…æƒ…å†µæ¥å†³å®šï¼Œåœ¨ä¸Šå›¾ä¸­parentæ˜¯onClickæ—¶é—´ï¼Œå¾ˆæ˜æ˜¾å¯¼è‡´å†…å­˜å¡é¡¿çš„æ˜¯clickè°ƒç”¨çš„æ–¹æ³•ã€‚å½“ç„¶æ‰¾åˆ°ç›¸åº”çš„é—®é¢˜åªæ˜¯å…¶ä¸­ä¸€æ­¥ï¼Œæ›´å¤šçš„åº”è¯¥æ˜¯æ€ä¹ˆå»å‘ç”Ÿå¡é¡¿çš„é—®é¢˜è¿›è¡Œä¼˜åŒ–ã€‚ é‚£æˆ‘ä»¬åœ¨æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼Œä½¿ç”¨æ–æ³¢é‚£å¥‘é€’å½’ç®—æ³•123456789public int computeFibonacci(int positionInFibSequence) &#123; //0 1 1 2 3 5 8 if (positionInFibSequence &lt;= 2) &#123; return 1; &#125; else &#123; return computeFibonacci(positionInFibSequence - 1) + computeFibonacci(positionInFibSequence - 2); &#125;&#125; å½“é€’å½’çš„æ·±åº¦æ¯”è¾ƒå¤§æ—¶å°±ä¼šå‘ç”Ÿå¡é¡¿ç°è±¡ï¼Œè¿™é‡Œæˆ‘ä»¬ä»¤é€’å½’çš„æ·±åº¦ä¸º40æ¥è¿›è¡Œåˆ†æï¼ŒæŒ‰ä¸Šé¢åˆ†ææ­¥éª¤æ‰¾åˆ°å‡ºç°é¢œè‰²æœ€å¤šçš„ä¸€ä¸ªå°ç«‹æŸ±ï¼Œä¸€æ­¥æ­¥å°±èƒ½æ‰¾åˆ°ç›¸åº”çš„ä½ç½®ï¼Œè¿™é‡Œå°±ä¸å†å¤šè¯´äº†ï¼Œé‚£æ—¢ç„¶çŸ¥é“äº†æ˜¯æ–æ³¢é‚£å¥‘é€’å½’å¼•èµ·çš„å¡é¡¿ç°è±¡ï¼Œé‚£æ€ä¹ˆå»ä¼˜åŒ–å‘¢?è¿™é‡Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨ç¼“å­˜+æ‰¹å¤„ç†çš„æ€æƒ³å°†é€’å½’å˜ä¸ºå¾ªç¯éå†ï¼Œå…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š ä»£ç å¦‚ä¸‹ï¼š1234567891011public int computeFibonacci(int positionInFibSequence) &#123; int prev = 0; int current = 1; int newValue; for (int i=1; i&lt;positionInFibSequence; i++) &#123; newValue = current + prev; prev = current; current = newValue; &#125; return current;&#125; è¿™é‡Œç”¨åˆ°äº†æ‰¹å¤„ç†å’Œç¼“å­˜çš„æŠ€æœ¯ï¼Œè¿™é‡Œè¯´ä¸€ä¸‹è¿™ä¸¤ä¸ªæŠ€æœ¯çš„æ¦‚å¿µï¼šä¸€äº›å‡½æ•°å’Œè¿ç®—ï¼Œéœ€è¦éå¸¸å¤§çš„èµ„æºå¼€é”€ï¼Œè¿™ä¹Ÿä¼šå½±å“è®¡ç®—æ€§èƒ½ã€‚ä¾‹å¦‚ï¼Œåœ¨æ‰§è¡Œä¹‹å‰æŠŠæ•°æ®è½½å…¥ç‰¹å®šçš„å†…å­˜åŒºåŸŸï¼Œæˆ–è€…ï¼Œåœ¨æœç´¢ä¹‹å‰å¯¹æ•°å€¼é›†è¿›è¡Œæ’åºï¼Œåœ¨æ‰§è¡Œå¤šæ¬¡ä¹‹åï¼Œè€Œä¸”æ¬¡æ•°ç¡®å®æ˜¯ä¸ªå¾ˆå¤§çš„æ•°å­—ï¼Œèµ„æºå¼€é”€å°†ä¼šä¸¥é‡å½±å“åº”ç”¨ç¨‹åºçš„æ€§èƒ½ã€‚æ‰¹å¤„ç†æ˜¯å¯ä»¥å¸®åŠ©è§£å†³è¿™ç§æ€§èƒ½é—®é¢˜ï¼Œå®ƒæ¶ˆé™¤æ¯ä¸ªè¿ç®—çš„ç‹¬ç«‹æ‰§è¡Œå¼€é”€ã€‚è¿™ç§æƒ…å†µæœ€å¸¸è§äºåœ¨æ‰§è¡Œè¿ç®—ä¹‹å‰ï¼Œä½ éœ€è¦å‡†å¤‡æ•°æ®ã€‚ä¾‹å¦‚ï¼Œåœ¨æŸ¥æ‰¾é›†åˆä¸­çš„å€¼æ—¶ï¼Œæœ€æœ‰æ•ˆçš„æ–¹æ³•æ˜¯è¿›è¡Œæ’åºï¼Œç„¶åè¿›è¡ŒäºŒåˆ†æ³•æœç´¢ç­‰ç­‰ã€‚æœ‰ä¸€ç‚¹å¿…é¡»å¼„æ¸…æ¥šï¼Œè¿™å¹¶ä¸æ˜¯æœ€æœ‰æ•ˆçš„æ–¹æ³•ã€‚è¿™åªæ˜¯ä¸¾ä¸€ä¸ªä¾‹å­è€Œå·²ï¼Œæœ€ç®€å•çš„æ–¹æ³•æ˜¯å†™ä¸€ä¸ªå‡½æ•°ï¼Œæä¾›ä¸€ä¸ªé›†åˆå’Œä¸€ä¸ªå€¼ï¼Œå¯¹é›†åˆè¿›è¡Œæ’åºï¼Œç„¶åæŸ¥çœ‹å€¼æ˜¯å¦å­˜åœ¨äºé›†åˆä¹‹ä¸­ã€‚å¯¹äºæŸäº›æ€§èƒ½è¦æ±‚æ¥è¯´ï¼Œè¿™æ ·åšæ˜¯å¯ä»¥çš„ã€‚ç¼“å­˜æ˜¯ä¸æ‰¹å¤„ç†ç›¸ä¼¼çš„æ¦‚å¿µï¼Œè¿™ä¹Ÿæ˜¯ç›®å‰ä¸ºæ­¢ï¼Œä½ èƒ½ç†è§£çš„æœ€é‡è¦çš„æ€§èƒ½æŠ€æœ¯ã€‚è¿™é¡¹æŠ€æœ¯å…¨é¢åœ°æ¨åŠ¨ç°ä»£è®¡ç®—æœºç§‘å­¦çš„å‘å±•ï¼Œä»¥è®¡ç®—æœºä¸ºä¾‹ï¼Œå†…å­˜çš„ä½œç”¨æ˜¯ç”¨æ¥å­˜å‚¨ä¿¡æ¯ï¼Œè®©CPUèƒ½å¤Ÿæ›´å¿«çš„è®¿é—®æ•°æ®ï¼Œå…¶é€Ÿåº¦è¿œå¿«äºè®¿é—®ç¡¬ç›˜æ•°æ®ã€‚ è‡³æ­¤ï¼Œå¯¹äºTraceViewçš„æ€»ç»“å°±ç»“æŸäº†ï¼Œå› ä¸ºå·¥å…·çš„ä½¿ç”¨æ›´å¤šæ˜¯åœ¨å®è·µå»æ‘¸ç´¢ï¼Œæ‰€ä»¥ä½¿ç”¨ä¸€ç¯‡æ–‡ç« ä¸è¶³ä»¥ä½“ç°TraceViewå·¥å…·çš„å¼ºå¤§ï¼Œå½“ç„¶å·¥å…·æ°¸è¿œéƒ½æ˜¯ç”¨æ¥ä½¿ç”¨çš„ï¼ŒçœŸæ­£çš„æ‰¾åˆ°æœ€å¥½çš„ä¼˜åŒ–ç­–ç•¥æ‰æ˜¯é‡ä¸­ä¹‹é‡ å®˜æ–¹ä¹Ÿç»™å‡ºäº†ä¸€äº›æ€§èƒ½ä¼˜åŒ–çš„çŸ¥è¯†ï¼Œå®˜ç½‘å¦‚ä¸‹ï¼šhttps://developer.android.com/training/articles/perf-tips.html]]></content>
      <categories>
        <category>æ€§èƒ½ä¼˜åŒ–</category>
      </categories>
      <tags>
        <tag>æ€§èƒ½ä¼˜åŒ–</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ€§èƒ½ä¼˜åŒ–åˆ©å™¨(å†…å­˜æ³„æ¼ç¯‡)]]></title>
    <url>%2F2017%2F06%2F01%2F20170601_%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%88%A9%E5%99%A8(%E5%86%85%E5%AD%98%E6%B3%84%E6%BC%8F%E7%AF%87)%2F</url>
    <content type="text"><![CDATA[å‰è¨€ç¨‹åºå¼€å‘æ˜¯ä¸€ä¸ªæ··ä¹±åˆç–¯ç‹‚çš„è¿‡ç¨‹ï¼Œå†…å­˜é€šå¸¸éƒ½æ²¡æœ‰åŠæ³•å®Œå…¨è¢«é‡Šæ”¾ï¼Œè¿™äº›è¢«å›šç¦çš„å†…å­˜å«åšå†…å­˜æ³„æ¼ã€‚ Androidå·¥ç¨‹å¸ˆèŠ±è´¹å¤§é‡æ—¶é—´é™ä½å¹²æ‰°ï¼Œç¡®ä¿è¿™äº›ç¨‹åºä»¥æœ€å¿«çš„é€Ÿåº¦è¿è¡Œï¼Œå³ä¾¿æ˜¯è¿™æ ·å½“æœ‰è®¸å¤šçš„GCæˆ–ä¸€å¤§ä¸²æŒ‡ä»¤ä¸€ä¸ªæ¥ç€ä¸€ä¸ªæ“ä½œï¼Œå¸§åƒæ—¶é—´å¾ˆå¯èƒ½ä¼šè¶…è¿‡16æ¯«ç§’çš„å‘ˆåƒéšœç¢ï¼Œè¿™ä¼šå¯¼è‡´éšå½¢çš„ç¢°æ’æˆ–é—ªèº²ã€‚å°±æ˜¯è¿™æ ·ï¼Œå¦‚æœè¦å‡å°‘ä»»æ„å¸§å†…å¯åŠ¨GCçš„æ¬¡æ•°ï¼Œéœ€è¦ç€é‡ä¼˜åŒ–ç¨‹åºçš„å†…å­˜ä½¿ç”¨é‡,ä»æŒ‡ä»¤çš„è§’åº¦å¾ˆéš¾è¿½è¸ªè¿™äº›é—®é¢˜çš„èµ·å› ï¼Œä½†æ˜¯å¥½åœ¨Android SDk å†…ç½®äº†ä¸é”™çš„ä¸€äº›å·¥å…·å¸®åŠ©å¼€å‘è€…è¿…é€Ÿå®šä½å‘ç”Ÿå†…å­˜æ³„æ¼çš„ä»£ç  javaçš„å››ç§å¼•ç”¨ StrongReferenceå¼ºå¼•ç”¨åœ¨ç¨‹åºä»£ç ä¸­æ™®éå­˜åœ¨ï¼Œåªè¦æŸå¯¹è±¡æœ‰å¼ºå¼•ç”¨ä¸ä¹‹å…³è”ï¼ŒJVMå¿…å®šä¸ä¼šå›æ”¶è¿™ä¸ªå¯¹è±¡ï¼Œå³ä½¿åœ¨å†…å­˜ä¸è¶³çš„æƒ…å†µä¸‹ï¼ŒJVMå®æ„¿æŠ›å‡ºOOMä¹Ÿä¸ä¼šå›æ”¶è¿™ç§å¯¹è±¡ SoftReferenceè½¯å¼•ç”¨åœ¨javaä¸­ä½¿ç”¨SoftReferenceç±»æ¥è¡¨ç¤ºï¼Œå¯¹äºè½¯å¼•ç”¨å…³è”ç€çš„å¯¹è±¡ï¼Œåªæœ‰å†…å­˜ä¸è¶³çš„æ—¶å€™JVMæ‰ä¼šå›æ”¶è¯¥å¯¹è±¡ã€‚å› æ­¤è¿™ä¸€ç‚¹å¯ä»¥å¾ˆå¥½åœ°ç”¨æ¥è§£å†³OOMçš„é—®é¢˜ï¼Œå¹¶ä¸”è¿™ä¸ªç‰¹æ€§å¾ˆé€‚åˆç”¨æ¥å®ç°ç¼“å­˜ï¼šæ¯”å¦‚ç½‘é¡µç¼“å­˜ã€å›¾ç‰‡ç¼“å­˜è½¯å¼•ç”¨å¯ä»¥å’Œä¸€ä¸ªå¼•ç”¨é˜Ÿåˆ—ReferenceQueueè”åˆä½¿ç”¨ï¼Œå¦‚æœè½¯å¼•ç”¨æ‰€å¼•ç”¨çš„å¯¹è±¡å‘—JVMå›æ”¶ï¼Œè¿™ä¸ªè½¯å¼•ç”¨å°±ä¼šè¢«åŠ å…¥åˆ°ä¸ä¹‹å…³è”çš„å¼•ç”¨é˜Ÿåˆ—ä¸­ WeakReferenceå¼±å¼•ç”¨åœ¨javaä¸­ä½¿ç”¨WeakReferenceç±»æ¥è¡¨ç¤ºï¼Œå¼±å¼•ç”¨ä¹Ÿæ˜¯ç”¨æ¥æè¿°éå¿…éœ€å¯¹è±¡ï¼Œå½“JVMè¿›è¡Œåƒåœ¾å›æ”¶æ—¶ï¼Œæ— è®ºå†…å­˜æ˜¯å¦å……è¶³ï¼Œéƒ½ä¼šå›æ”¶è¢«å¼±å¼•ç”¨å…³è”çš„å¯¹è±¡ PhantomReferenceè™šå¼•ç”¨è™šå¼•ç”¨å’Œå‰é¢è½¯å¼•ç”¨ã€å¼±å¼•ç”¨ä¸åŒï¼Œå®ƒå¹¶ä¸å½±å“å¯¹è±¡ç”Ÿå‘½å‘¨æœŸã€‚åœ¨javaä¸­ç”¨PhantomReferenceç±»è¡¨ç¤ºï¼Œå¦‚æœä¸€ä¸ªå¯¹è±¡ä¸è™šå¼•ç”¨å…³è”ï¼Œåˆ™è·Ÿæ²¡æœ‰å¼•ç”¨ä¸ä¹‹å…³è”ä¸€æ ·ï¼Œåœ¨ä»»ä½•æ—¶å€™éƒ½å¯èƒ½è¢«åƒåœ¾å›æ”¶å™¨å›æ”¶è™šå¼•ç”¨å¿…é¡»å’Œå¼•ç”¨é˜Ÿåˆ—å…³è”ä½¿ç”¨ï¼Œå½“åƒåœ¾å›æ”¶å™¨å‡†å¤‡å›æ”¶ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå¦‚æœå‘ç°å®ƒè¿˜æœ‰è™šå¼•ç”¨ï¼Œå°±ä¼šæŠŠè¿™ä¸ªè™šå¼•ç”¨åŠ å…¥åˆ°ä¸ä¹‹å…³è”çš„å¼•ç”¨é˜Ÿåˆ—ä¸­ã€‚ç¨‹åºå¯ä»¥é€šè¿‡åˆ¤æ–­å¼•ç”¨é˜Ÿåˆ—ä¸­æ˜¯å¦çœŸå·²ç»åŠ å…¥äº†è™šå¼•ç”¨ï¼Œæ¥äº†è§£è¢«å¼•ç”¨çš„å¯¹è±¡æ˜¯å¦å°†è¦è¢«åƒåœ¾å›æ”¶ã€‚å¦‚æœç¨‹åºå‘ç°æŸä¸ªè™šå¼•ç”¨å·²ç»è¢«åŠ å…¥åˆ°å¼•ç”¨é˜Ÿåˆ—ï¼Œé‚£ä¹ˆå°±å¯ä»¥åœ¨æ‰€å¼•ç”¨çš„å¯¹è±¡çš„å†…å­˜è¢«å›æ”¶ä¹‹å‰é‡‡å–å¿…è¦çš„è¡ŒåŠ¨ åˆ¤æ–­ä¸€ä¸ªåº”ç”¨å†…å­˜æ³„æ¼é¿å…å¾—å¾ˆå¥½å½“Appé€€å‡ºçš„æ—¶å€™ï¼Œè¿™ä¸ªè¿›ç¨‹é‡Œé¢æ‰€æœ‰çš„å¯¹è±¡åº”è¯¥å°±éƒ½è¢«å›æ”¶äº†ï¼Œå°¤å…¶æ˜¯å¾ˆå®¹æ˜“è¢«æ³„æ¼çš„(Viewã€Activity)æ˜¯å¦è¿˜åœ¨å†…å­˜ä¸­ï¼Œå¯ä»¥è®©appé€€å‡ºä»¥åæŸ¥çœ‹ç³»ç»Ÿè¯¥è¿›ç¨‹é‡Œé¢çš„æ‰€æœ‰çš„Viewã€Activityå¯¹è±¡æ˜¯å¦ä¸º0ã€‚å·¥å…·ä½¿ç”¨AndroidStudio-&gt;Android Monitor-&gt;System Information-&gt;Memory Usageçœ‹Objectsé‡Œé¢çš„viewså’ŒActivityçš„æ•°é‡æ˜¯å¦ä¸º0ã€‚ Heap Snapshotçš„ä½¿ç”¨åœ¨ä½¿ç”¨å·¥å…·ä¹‹å‰æˆ‘ä»¬éœ€è¦çŸ¥é“è¿™ä¸ªå·¥å…·æ˜¯æ¥åšä»€ä¹ˆç”¨çš„ï¼ŸHeap SnapShotæ˜¯ç”¨æ¥è·å–Javaå †å†…å­˜è¯¦ç»†ä¿¡æ¯é€šè¿‡åˆ†æå¯ä»¥éªŒè¯è‡ªå·±çš„ä¸€äº›çŒœæƒ³ï¼Œä¸ºä»€ä¹ˆæ˜¯éªŒè¯è‡ªå·±çŒœæƒ³å‘¢ï¼Ÿå› ä¸ºæˆ‘ä»¬åœ¨å®é™…é¡¹ç›®ä¸­ä¼šé€šè¿‡Android Monitorå·¥å…·æ¥æŸ¥çœ‹æŸä¸ªæ“ä½œæ˜¯å¦å­˜åœ¨å†…å­˜æ³„æ¼ã€‚ä¾‹å¦‚ï¼šæœ€ç›´è§‚çš„æ˜¯æŸ¥çœ‹å†…å­˜å¢é•¿æƒ…å†µï¼ŒçŸ¥é“è¯¥åŠ¨ä½œæ˜¯å¦å‘ç”Ÿå†…å­˜æ³„æ¼ï¼ŒåŠ¨ä½œå‘ç”Ÿä¹‹å‰ï¼šGCå®Œåå†…å­˜1.4Mï¼›åŠ¨ä½œå‘ç”Ÿä¹‹åï¼šGCå®Œåå†…å­˜1.6Må¯¹äºHeap SnapShotçš„ä½¿ç”¨ç½‘ä¸Šå·²ç»æœ‰äº†æ˜ç¡®çš„ä»‹ç»ï¼Œè¿™é‡Œæˆ‘ä¾¿ä¸åœ¨é‡å¤é€ è½®å­äº†http://blog.csdn.net/itfootball/article/details/48786275 å‘ä¸€ä¸‹æˆ‘ä»¬æµ‹è¯•çš„ä»£ç ï¼Œå¾ˆç®€å•ï¼Œå°±æ˜¯é™æ€å¯¹è±¡æŒæœ‰Ativityçš„å¯¹è±¡123456789101112131415public class CommUtil &#123; private static CommUtil instance; private Context context; private CommUtil(Context context)&#123; this.context = context; &#125; public static CommUtil getInstance(Context context)&#123; if(instance == null)&#123; instance = new CommUtil(context); &#125; return instance; &#125;&#125; æˆ‘ä»¬ä¸æ–­çš„å»æ¨ªç«–å±åˆ‡æ¢ï¼Œå½“ç„¶æˆ‘ä»¬å·²ç»çŸ¥é“äº†ç»“æœï¼ˆå†…å­˜ä¸­è‡³å°‘ä¼šæœ‰2ä¸ªMainActivityçš„å®ä¾‹ï¼‰ï¼Œé€šè¿‡Heap SnapShotå·¥å…·å°±å¯ä»¥éªŒè¯åœ¨å†…å­˜ä¸­ç¡®å®ä¼šæŒæœ‰è‡³å°‘2ä¸ªMainActivityå¯¹è±¡ï¼Œæœ€åå°±æ˜¯å¯¹è¿™æ®µä»£ç è¿›è¡Œæ”¹è¿›å°±å¯ä»¥äº†ï¼ˆå°†Contextæ”¹æˆApplicationContextï¼‰ã€‚åœ¨æˆ‘ä»¬å®é™…å¼€å‘ä¸­ä¹Ÿä¼šé€šè¿‡å»çŒœæµ‹å“ªäº›ç±»å¯èƒ½å‘ç”Ÿå†…å­˜æ³„æ¼ç„¶åé€šè¿‡Heap SnapShotå»éªŒè¯ MATçš„ä½¿ç”¨å¯èƒ½æ˜¯æˆ‘çš„æŠ€æœ¯æœ‰é™ï¼Œä¸ªäººè§‰å¾—MATå·¥å…·åŸºæœ¬ä¸Šå’Œheap SnapShotå·®ä¸å¤šï¼ŒMATçªå‡ºçš„ä¼˜åŠ¿å°±æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡å’Œé¢‘ç¹æ‰§è¡Œä¸€ä¸ªæ“ä½œçš„Profè¿›è¡Œæ¯”è¾ƒé€šè¿‡Total Sizeçš„å€¼æ˜¯å¦è¶Šæ¥è¶Šå¤§æ¥åˆæ­¥åˆ¤æ–­è¿™ä¸ªæ“ä½œå¯¼è‡´äº†å†…å­˜æ³„æ¼ã€‚ å¦‚æœå‘ç”Ÿäº†å†…å­˜æ³„æ¼ä¹Ÿå¯ä»¥é€šè¿‡è¿™ä¸ªå·¥å…·åˆ¤æ–­å‡ºå…·ä½“æ˜¯å“ªäº›å¯¹è±¡ï¼ˆé€šè¿‡å®šä½æ“ä½œå‰åæ‰€æŒæœ‰çš„å¯¹è±¡å¢åŠ äº†ï¼‰ï¼ŒæŠ€å·§ï¼šä½¿ç”¨Histogramä¸­å¯¹å¯¹è±¡Groupï¼Œä¾‹å¦‚é€‰æ‹©Group By Packageæ›´æ–¹ä¾¿æŸ¥çœ‹è‡ªå·±Packageä¸­çš„å¯¹è±¡ä¿¡æ¯ Okï¼ŒMATçš„å·¥å…·åœ¨ç½‘ä¸Šå·²ç»æœ‰äº†æ˜ç¡®ä»‹ç»ï¼Œè¿™é‡Œæˆ‘ä¹Ÿä¸å†é‡å¤é€ è½®å­http://blog.csdn.net/itfootball/article/details/48834711 æ—¢ç„¶é€šè¿‡MATå·¥å…·æŸ¥æ‰¾å‡ºäº†å“ªäº›å¯¹è±¡å¯èƒ½å‘ç”Ÿå†…å­˜æ³„æ¼ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±éœ€è¦å¯¹è¿™äº›å¯¹è±¡é€ä¸ªè¿›è¡Œæ’æŸ¥ã€‚æ­¥éª¤ï¼š(1)è¿›å…¥Histogramï¼Œè¿‡æ»¤å‡ºæŸä¸€ä¸ªå«Œç–‘å¯¹è±¡ç±»(2)ç„¶ååˆ†ææŒæœ‰æ­¤ç±»å¯¹è±¡å¼•ç”¨çš„å¤–éƒ¨å¯¹è±¡ï¼ˆåœ¨è¯¥ç±»ä¸Šé¢ç‚¹å‡»å³é”®List Objectsâ€”&gt;with incoming referencesï¼‰(3)å†è¿‡æ»¤æ‰ä¸€äº›å¼±å¼•ç”¨ã€è½¯å¼•ç”¨ã€è™šå¼•ç”¨ï¼Œå› ä¸ºå®ƒä»¬è¿Ÿæ—©å¯ä»¥è¢«GCå¹²æ‰ä¸å±äºå†…å­˜æ³„éœ²(åœ¨ç±»ä¸Šé¢ç‚¹å‡»å³é”®Merge Shortest Paths to GC Rootsâ€”&gt;exclude all phantom/weak/soft etc.references)(4)è¿›å…¥ä»£ç åˆ†ææ­¤æ—¶è¿™ä¸ªå¯¹è±¡çš„å¼•ç”¨æŒæœ‰æ˜¯å¦åˆç†ï¼Œè¿™å°±è¦è€ƒç»éªŒå’Œä½“åŠ›äº†ï¼ Heap Viewerçš„ä½¿ç”¨è¿™ä¸ªå·¥å…·åªèƒ½åˆ¤æ–­æ˜¯å¦æœ‰å†…å­˜çš„æ³„æ¼æ“ä½œèµ·æ¥æ¯”è¾ƒæ–¹ä¾¿ï¼Œæˆ‘ä»¬éœ€è¦æ³¨æ„çš„å°±æ˜¯Heap Viewerçš„ä½¿ç”¨æ¡ä»¶(1)5.0ä»¥ä¸Šçš„ç³»ç»Ÿï¼ŒåŒ…æ‹¬5.0(2)å¼€å‘è€…é€‰é¡¹å¯ç”¨å…·ä½“å·¥å…·çš„ä½¿ç”¨ï¼Œç½‘ä¸Šå·²ç»æœ‰å¾ˆå¤šæ–‡ç« ï¼Œè¿™é‡Œå°±ä¸å†é‡å¤çš„é€ è½®å­äº†http://blog.csdn.net/itfootball/article/details/48734553 å…·ä½“å®é™…çš„åº”ç”¨MainActivity.java12MyView myView = new MyView(this);setContentView(myView); ListenerCollector.java12345678public class ListenerCollector &#123; static private WeakHashMap&lt;View,MyView.MyListener&gt; sListener = new WeakHashMap&lt;&gt;(); public void setsListener(View view, MyView.MyListener listener)&#123; sListener.put(view,listener);&#125; public static void clearListeners()&#123; //ç§»é™¤æ‰€æœ‰ç›‘å¬ã€‚ sListener.clear(); &#125;&#125; MyView.java1234567891011121314151617181920public class MyView extends View&#123; public MyView(Context context)&#123; super(context); init(); &#125; public interface MyListener&#123; public void myListenerCallback(); &#125; private void init()&#123; ListenerCollector collector = new ListenerCollector(); collector.setsListener(this,myListener); &#125; private MyListener myListener = new MyListener() &#123; @Override public void myListenerCallback() &#123; System.out.print("æœ‰è¢«è°ƒç”¨"); &#125; &#125;;&#125; ok,ä¸åœçš„å»æ—‹è½¬å±å¹•ï¼Œå¦‚æœä¸å†onStopä¸­ç§»é™¤æ‰ä¸Šä¸€æ¬¡çš„ç›‘å¬ï¼Œå°±ä¼šåœ¨HashMapé›†åˆä¸­ä¸åœçš„å»æ·»åŠ ç›‘å¬å¯¹è±¡ï¼Œè¿™æ ·ä½¿ç”¨Heap Viewerå·¥å…·å°±ä¼šå‘ç°data object-&gt;Total Sizeä¼šä¸æ–­çš„å¢åŠ ï¼Œäºæ˜¯å°±å¯ä»¥å¾—å‡ºè¯¥æ“ä½œå‘ç”Ÿäº†å†…å­˜æ³„æ¼ï¼Œå…·ä½“çš„å®šä½å°†ä¼šä½¿ç”¨ä¸Šé¢çš„å·¥å…· Allocation Trackerçš„ä½¿ç”¨Okï¼ŒAllocation Trackerçš„å·¥å…·åœ¨ç½‘ä¸Šå·²ç»æœ‰äº†æ˜ç¡®ä»‹ç»ï¼Œè¿™é‡Œæˆ‘ä¹Ÿä¸å†é‡å¤é€ è½®å­http://blog.csdn.net/itfootball/article/details/48750849 LeakCanaryçš„ä½¿ç”¨Okï¼ŒLeakCanaryçš„å·¥å…·åœ¨ç½‘ä¸Šå·²ç»æœ‰äº†æ˜ç¡®ä»‹ç»ï¼Œè¿™é‡Œæˆ‘ä¹Ÿä¸å†é‡å¤é€ è½®å­http://blog.csdn.net/itfootball/article/details/49361401 å¼•èµ·å†…å­˜æ³„æ¼çš„æƒ…å†µå†…å­˜æ³„éœ²(Memory Leak):è¿›ç¨‹ä¸­æŸäº›å¯¹è±¡å·²ç»æ²¡æœ‰ä½¿ç”¨ä»·å€¼äº†ï¼Œä½†æ˜¯ä»–ä»¬å´è¿˜å¯ä»¥ç›´æ¥æˆ–è€…é—´æ¥åœ°è¢«å¼•ç”¨åˆ°GC Rootå¯¼è‡´æ— æ³•å›æ”¶ã€‚å½“å†…å­˜æ³„éœ²è¿‡å¤šçš„æ—¶å€™ï¼Œå†åŠ ä¸Šåº”ç”¨æœ¬èº«å ç”¨çš„å†…å­˜ï¼Œæ—¥ç§¯æœˆç´¯æœ€ç»ˆå°±ä¼šå¯¼è‡´å†…å­˜æº¢å‡ºOOM.å†…å­˜æº¢å‡º(OOM):å½“åº”ç”¨å ç”¨çš„heapèµ„æºè¶…è¿‡äº†Dalvikè™šæ‹Ÿæœºåˆ†é…çš„å†…å­˜å°±ä¼šå†…å­˜æº¢å‡ºã€‚æ¯”å¦‚ï¼šåŠ è½½å¤§å›¾ç‰‡ã€‚ 1ã€é™æ€å˜é‡å¼•èµ·çš„å†…å­˜æ³„éœ²å½“è°ƒç”¨getInstanceæ—¶ï¼Œå¦‚æœä¼ å…¥çš„contextæ˜¯Activityçš„contextã€‚åªè¦è¿™ä¸ªå•ä¾‹æ²¡æœ‰è¢«é‡Šæ”¾ï¼Œé‚£ä¹ˆè¿™ä¸ªActivityä¹Ÿä¸ä¼šè¢«é‡Šæ”¾ï¼Œç›´åˆ°è¿›ç¨‹é€€å‡ºæ‰ä¼šè¢«é‡Šæ”¾ 123456789101112public class CommUtil &#123; private static CommUtil instance; private Context context; private CommUtil(Context context)&#123; this.context = context; &#125; public static CommUtil getInstance(Context mcontext)&#123; if(instance == null)&#123; instance = new CommUtil(mcontext); &#125; return instance; &#125; 2ã€éé™æ€å†…éƒ¨ç±»å¼•èµ·å†…å­˜æ³„éœ²(åŒ…æ‹¬åŒ¿åå†…éƒ¨ç±»)é”™è¯¯çš„ç¤ºèŒƒ123456789public void loadData()&#123;//éšå£«æŒæœ‰MainActivityå®ä¾‹ new Thread(new Runnable() &#123; @Override public void run() &#123; int b=a; Thread.sleep(1000); &#125; &#125;).start();&#125; è§£å†³æ–¹æ¡ˆï¼šloadDataæ–¹æ³•ä¿®æ”¹ä¸ºé™æ€æ–¹æ³•é™¤äº†ä¸Šé¢çš„å†™æ³•ï¼Œåœ¨å®é™…çš„å¼€å‘ä¸­ä¼šç”¨åˆ°Handlerï¼Œæˆ‘ä»¬éœ€è¦è‡ªå®šä¹‰Handlerå¹¶è®¾ç½®ä¸ºstaticï¼Œä½†æ˜¯å¤§å¤šæ•°æˆ‘ä»¬éœ€è¦åœ¨é‡Œé¢ä½¿ç”¨MainActivityçš„å¼•ç”¨ï¼Œé‚£è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿè¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥å®šä¹‰MainActivityçš„è½¯å¼•ç”¨/å¼±å¼•ç”¨ï¼Œç„¶åå†handleMessageé‡Œé¢åˆ¤æ–­å¦‚æœactivityä¸ºç©ºæˆ–è€…finishäº†åˆ™ä¸å‘ä¸‹æ‰§è¡Œã€‚è¿™æ ·å°±é¿å…äº†handleä¸€ç›´æŒæœ‰activityå¼•ç”¨å¯¼è‡´çš„å†…å­˜æ³„æ¼ 3ã€ä¸éœ€è¦ç”¨çš„ç›‘å¬æœªç§»é™¤ä¼šå‘ç”Ÿå†…å­˜æ³„æ¼123SensorManager sensorManager = getSystemService(SENSOR_SERVICE);Sensor sensor = sensorManager.getDefaultSensor(Sensor.TYPE_ALL);sensorManager.registerListener(this,sensor,SensorManager.SENSOR_DELAY_FASTEST); æ‰€ä»¥åœ¨onDestroyæ–¹æ³•é‡Œé¢ç§»é™¤ç›‘å¬sensorManager.unregisterListener(listener); 4ã€èµ„æºæœªå…³é—­å¼•èµ·çš„å†…å­˜æ³„æ¼æƒ…å†µä¾‹å¦‚ï¼šBroadcastReceiverã€Cursorã€Bitmapã€IOæµã€è‡ªå®šä¹‰å±æ€§ç­‰ï¼Œè¦è®°å¾—ä¸ä½¿ç”¨çš„æ—¶å€™åŠæ—¶é‡Šæ”¾èµ„æºé¿å…å†…å­˜æ³„æ¼ 5ã€æ— é™å¾ªç¯åŠ¨ç”»å½“ä½¿ç”¨åŠ¨ç”»çš„æ—¶å€™æ²¡æœ‰åœ¨onDestroyé‡Œé¢åœæ­¢åŠ¨ç”»å¯¼è‡´å†…å­˜æ³„æ¼]]></content>
      <categories>
        <category>æ€§èƒ½ä¼˜åŒ–</category>
      </categories>
      <tags>
        <tag>æ€§èƒ½ä¼˜åŒ–</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Kotlin_mvp_dagger2_retrofit]]></title>
    <url>%2F2016%2F11%2F01%2F20170704_Kotlin%E5%AE%9E%E6%88%98(dagger2%2Bretrofit)%2F</url>
    <content type="text"><![CDATA[ä¸Šä¸€ç¯‡æˆ‘ä»¬å­¦ä¹ äº†ankoåº“çš„ä½¿ç”¨ï¼Œåˆ°è¿™é‡Œæˆ‘ä»¬æ¥åšä¸€ä¸ªç®€å•çš„å°é¡¹ç›®å§ï¼é‚£ä½¿ç”¨ä»€ä¹ˆæ¶æ„æ¥å†™å‘¢ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨Kotlin+dagger2+retrofit+MVPæ¶æ„æ¥æ’¸ç  åœ¨å­¦ä¹ è¿™ç¯‡æ–‡ç« ä¹‹å‰éœ€è¦æŒæ¡ä¸‹é¢çš„çŸ¥è¯†ï¼Œå¦‚ä¸‹ï¼š dagger2 http://www.jianshu.com/p/39d1df6c877d retrofit http://www.jianshu.com/p/308f3c54abdd API http://gank.io/api æ­£æ–‡å› ä¸ºé¡¹ç›®ä¸­ç”¨çš„Dagger2æ¯”è¾ƒå¤šï¼Œè¿™é‡Œæ¥è®²è§£ä¸€ä¸‹é¡¹ç›®ä¸­ç”¨åˆ°çš„å‡ ä¸ªæ³¨è§£ï¼Œæ›´å¤šçš„è¯¦æƒ…å¯ä»¥çœ‹ä¸Šé¢çš„åœ°å€ Component:ç»„ä»¶ã€ç®¡ç†å™¨ã€æ³¨å…¥å™¨åŠŸèƒ½å°±æ˜¯å°†ç±»ä¸­ä½¿ç”¨@Injectæ ‡è®°çš„å±æ€§å’Œåœ¨å¯¹åº”å±æ€§ç±»ä¸­ä½¿ç”¨@Injectæ ‡è®°çš„æ„é€ æ–¹æ³•ï¼Œç„¶åå°†å®ƒä»¬å…³è”èµ·æ¥ã€‚ è€Œå¦‚æœæ„é€ æ–¹æ³•éœ€è¦å‚æ•°ï¼Œæˆ–è€…æˆ‘ä»¬æ²¡æ³•å†éœ€è¦æ³¨å…¥çš„å¯¹è±¡çš„æ„é€ æ–¹æ³•åŠ å…¥@Injectæ³¨è§£çš„æ—¶å€™å°±éœ€è¦ä½¿ç”¨Module è¯¥æ³¨è§£é‡Œé¢çš„å‚æ•°æœ‰ä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¯è®¾ç½®modulesæ‰€å…³è”çš„Moduleç±»ï¼Œç¬¬äºŒä¸ªæ˜¯dependencyæ‰€ä¾èµ–çš„Component Moduleï¼šæä¾›è€…ã€ä¾èµ–å¯¹è±¡å·¥å‚åŠŸèƒ½æ˜¯ä¸è¢«@Injectæ ‡è®°çš„æ„é€ æ–¹æ³•ä¸€æ ·æä¾›ç”Ÿæˆä¾èµ–çš„å¯¹è±¡ å› ä¸ºå¯¹äºç¬¬ä¸‰æ–¹åº“æˆ‘ä»¬æ²¡æœ‰åŠæ³•å°†å®ƒçš„æ„é€ æ–¹æ³•åŠ å…¥@Injectæ ‡è®°ï¼Œè¿™æ—¶å€™æˆ‘ä»¬éœ€è¦ä½¿ç”¨Moduleç”Ÿæˆï¼Œå¹¶æä¾›@provideæ³¨è§£ï¼ŒComponentä¼šå»æŸ¥æ‰¾Moduleç±»ä¸­@provideçš„æ–¹æ³•è·å–åˆ°å¯¹è±¡å¹¶é€šè¿‡componentè¿”å›ç›®æ ‡ç±»éœ€è¦çš„å¯¹è±¡å¹¶æ³¨å…¥åˆ°ç›®æ ‡ç±» Qualifier:é™å®šç¬¦åŠŸèƒ½æ˜¯åœ¨åŒä¸€çº¬åº¦ä¸‹å­˜åœ¨å¤šä¸ªä¾èµ–å¯¹è±¡çš„æä¾›æ–¹å¼(å¤šä¸ªæ„é€ æ–¹æ³•)ï¼Œåˆ™ä¼šè¿·å¤±ã€‚è¿™æ—¶ï¼Œå¯ä»¥ä½¿ç”¨Qualifier æä¾›ä¾èµ–å¯¹è±¡æœ‰ä¸¤ç§æ–¹å¼ ï¼ˆ1ï¼‰é€šè¿‡ä½¿ç”¨Injectæ³¨è§£æ ‡æ³¨çš„æ„é€ å‡½æ•°æ¥åˆ›å»º ï¼ˆ2ï¼‰é€šè¿‡å·¥å‚æ¨¡å¼çš„Moduleæ¥åˆ›å»º å¦‚æœä¸€ä¸ªä¾èµ–å¯¹è±¡ä»¥ä¸Šä¸¤ç§æ–¹å¼éƒ½èƒ½å¤Ÿæä¾›ï¼Œå®ƒä¼šä¼˜å…ˆä½¿ç”¨Moduleã€‚Qualifieræœ‰ä¸€ä¸ª@Named æŒ‡å®šç›¸åŒçš„å‚æ•°å’Œè‡ªå®šä¹‰Qualifieræ³¨è§£ä¸€æ ·çš„æ•ˆæœ12345678@Qualifier@Documented@Retention(RUNTIME)public @interface Named &#123; /** The name. */ String value() default "";&#125; Scope:ä½œç”¨åŸŸ ç®¡ç†åˆ›å»ºçš„ç±»å®ä¾‹çš„ç”Ÿå‘½å‘¨æœŸã€‚ å¯ä»¥é€šè¿‡Scopeæ¥é™å®šé€šè¿‡Moduleå’ŒInjectæ–¹å¼åˆ›å»ºçš„ç±»çš„å®ä¾‹çš„ç”Ÿå‘½å‘¨æœŸèƒ½å¤Ÿä¸ç›®æ ‡ç±»çš„ç”Ÿå‘½å‘¨æœŸç›¸åŒã€‚ Scopeæœ¬èº«æ²¡æœ‰åˆ¶å®šç”Ÿå‘½å‘¨æœŸçš„èƒ½åŠ›ï¼Œå®ƒçš„å­˜åœ¨ä¸€æ˜¯ä¸ºäº†å¯è¯»æ€§,äºŒæ˜¯æ›´å¥½çš„ç®¡ç†Componentå’ŒModuleçš„å…³ç³» å¦‚æœä½ æƒ³äº†è§£Dagger2å…·ä½“è°ƒç”¨çš„æµç¨‹å¯ä»¥æŸ¥çœ‹ æ¥ä¸‹æ¥æˆ‘ä»¬å¼€å§‹çœ‹ä¸€ä¸‹è¦åšçš„å°é¡¹ç›®çš„æ•ˆæœå›¾ ok,é¡¹ç›®æ¯”è¾ƒlowï¼ŒåºŸè¯ä¸å¤šè¯´ï¼Œå¼€å§‹æˆ‘ä»¬æ’¸ä»£ç æ—¶é—´ æˆ‘æ˜¯è¿™æ ·åˆ†åŒ…çš„ åœ¨é¡¹ç›®ä¸­æˆ‘å®šä¹‰äº†ä¸€ä¸ªå…¨å±€çš„Componentç±»12345678@Singleton@Component(modules = arrayOf(DataSourceModule::class)) //æ³¨å…¥å™¨å¯¹è±¡æä¾›å·¥å‚interface AppComponent&#123; /** * å…¨å±€æ³¨å…¥å™¨èƒ½å¤Ÿæä¾›çš„å¯¹è±¡ */ fun dataManager(): DataManager&#125; è¿™ä¸ªç±»ä¸ºDataSourceModuleç”¨æ¥æä¾›DataManagerå¯¹è±¡çš„ç”Ÿæˆï¼Œä½¿ç”¨DataManageræ¥å¯¹ç½‘ç»œè¯·æ±‚ä¼šå»æŸ¥è¯¢DataSourceModuleç±»ä¸­å»æ‰¾ç”ŸæˆDataManagerå¯¹è±¡çš„æ–¹æ³•1234567891011121314151617181920212223242526272829303132333435363738394041424344 @Module class DataSourceModule &#123; @Singleton @Provides fun provideGankService(): GankService &#123; return Retrofit.Builder().addConverterFactory(GsonConverterFactory.create()) .addCallAdapterFactory(RxJava2CallAdapterFactory.create()) .baseUrl(BASE_URL).build().create(GankService::class.java) &#125; @Singleton @Local @Provides fun provideLocal(): IDataSource&#123; return LocalDataSource() &#125; @Singleton @Remote @Provides fun provideRemote(service: GankService): IDataSource &#123; return RemoteDataSource(service) &#125; @Singleton @Provides fun provideDataManager(@Remote remote: IDataSource, @Local local: IDataSource): DataManager &#123; return DataManager(remote,local) &#125; &#125;```javaè¿™é‡Œæ¨èä½¿ç”¨provideå¼€å¤´ï¼Œåœ¨æ–¹æ³•å‚æ•°é‡Œé¢æˆ‘æœ‰å®šä¹‰ä¸¤ä¸ªæ³¨è§£Remoteå’ŒLocalç”¨æ¥åŒºåˆ†å¯¹åº”å“ªä¸ªä¸€ä¸ªIDataSource @Qualifier annotation class RemoteprovideGankServiceæ–¹æ³•é‡Œé¢çš„å†™æ³•ä½¿ç”¨äº†Gsonè½¬æ¢ç”¨äºå°†jsonè½¬åŒ–ä¸ºå¯¹è±¡ã€Rxjavaå›è°ƒç”¨æ¥å¯¹ç½‘ç»œè¯·æ±‚çš„ç»“æœåšä¸åŒçš„å¤„ç†ç„¶åæˆ‘ä»¬åœ¨æ¥çœ‹ä¸€ä¸‹DataManagerç±»```java fun getWelfareList(page: Int): Flowable&lt;WelfareEntity&gt; &#123; return remote.getWelfareList(page).onErrorResumeNext(local.getWelfareList(page)) &#125; ä¸»è¦æ˜¯å®šä¹‰ç›¸åº”çš„è§„åˆ™ï¼Œå…ˆåœ¨ç½‘ç»œè¯·æ±‚è·å–ï¼Œå½“å¤±è´¥çš„æ—¶å€™è·å–æœ¬åœ°çš„æ•°æ® ok,å‰æœŸçš„å·¥ä½œå‡†å¤‡å®Œæ¯•ï¼Œä¸ºäº†æ›´å¥½å»ä½¿ç”¨APPComponentï¼Œæˆ‘ä»¬åœ¨Applicationè‡ªå®šä¸€ä¸ªå•ä¾‹12345678910111213141516171819202122class MyApplication: Application()&#123; /** * æä¾›å…¨å±€æ³¨å…¥å™¨çš„è·å¾— */ lateinit private var appComponent: AppComponent companion object &#123; lateinit var app: MyApplication fun getApplication(): MyApplication&#123; return app &#125; &#125; override fun onCreate() &#123; super.onCreate() app = this appComponent = DaggerAppComponent.builder().dataSourceModule(DataSourceModule()).build() &#125; fun getAppComponent(): AppComponent = appComponent&#125; å¼€å§‹æˆ‘ä»¬çš„ä¸»ç•Œé¢ï¼Œå½“ç„¶è¿™ä¸ªé¡¹ç›®ä¹Ÿå°±ä¸€ä¸ªActivityï¼Œæ—¢ç„¶æ˜¯MVPå°±å°‘ä¸äº†Persenter @Inject lateinit var presenter: MainPersenter ä½¿ç”¨Injectæ³¨è§£æ¥è‡ªåŠ¨å»åˆ›å»ºMainPersenterå¯¹è±¡ï¼Œç„¶åå®šä¹‰MainAppComponent12345@ActivityScope@Component(modules = arrayOf(MainActivityModule::class),dependencies = arrayOf(AppComponent::class))interface MainAppComponent&#123; fun inject(activity: MainActivity)&#125; è¿™é‡Œå¯¹APPComponentè¿›è¡Œäº†ä¾èµ–ï¼Œå› ä¸ºåœ¨MainPersenterç±»é‡Œé¢ä½¿ç”¨åˆ°äº†DataManagerçš„å¯¹è±¡12345678910@Moduleclass MainActivityModule(val view: MainActivity)&#123; @ActivityScope @Provides fun provide1Presenter(dataManager: DataManager): MainPersenter&#123; return MainPersenter(view,dataManager) &#125;&#125; ç„¶åæˆ‘ä»¬åœ¨æ¥çœ‹ä¸€ä¸‹MainPersenter12345678910111213class MainPersenter(val view: MainViews, val dataManager: DataManager) &#123; //ç¦åˆ© fun getWelfarmList(page: Int) &#123; dataManager.getWelfareList(page) .subscribeOn(Schedulers.io()) .observeOn(AndroidSchedulers.mainThread()) .doOnSubscribe &#123; view.startLoading() &#125; .doOnError &#123; view.stopLoading() &#125; .subscribe &#123; view.stopLoading() view.showWefareList(it.results) &#125; &#125; åœ¨è¿™ä¸ªç±»ä¸­ä¸»è¦æ˜¯ä½¿ç”¨DataManagerçš„å¯¹è±¡ç”¨æ¥è·å–æ•°æ®å¹¶é’ˆå¯¹è·å–æˆåŠŸå’Œå¤±è´¥è°ƒç”¨Viewå±‚çš„æ–¹æ³• æœ€åæˆ‘ä»¬éœ€è¦åˆå§‹åŒ–Dagger2æ³¨å…¥å™¨12345//åˆå§‹åŒ–Dagger2æ³¨å…¥å™¨ DaggerMainAppComponent.builder() .appComponent(MyApplication.getApplication().getAppComponent()) .mainActivityModule(MainActivityModule(this)) .build().inject(this) å¦å¤–åœ¨å†™ç”ŸæˆItemViewçš„æ—¶å€™å†™äº†ä¸¤ç§æ–¹å¼ï¼Œè¿™é‡Œä¹Ÿä¸€å¹¶è´´å‡ºæ¥å’Œå¤§å®¶ä¸€èµ·åˆ†äº« ç¬¬ä¸€ç§ä½¿ç”¨withè¡¨è¾¾å¼123456789101112131415161718 val view = with(context)&#123; verticalLayout &#123; gravity = Gravity.CENTER_HORIZONTAL imageView &#123; id = R.id.welfare_item_iv imageResource = R.mipmap.ic_launcher scaleType = ImageView.ScaleType.FIT_XY lparams &#123; height = dip(250) width = matchParent leftMargin = dip(20) rightMargin = dip(20) topMargin = dip(15) bottomMargin = dip(15) &#125; &#125; &#125;&#125; å½“ç„¶è¿™æ ·å†™æ„Ÿè§‰ä»£ç å¤ªå¤šäº†ï¼Œæˆ‘ä»¬éœ€è¦å°†ç”Ÿæˆå¸ƒå±€çš„ä»£ç å•ç‹¬ä½¿ç”¨ä¸€ä¸ªç±»ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªç±»æ¥ç»§æ‰¿AnkoComponentæ¥å†™ç‹¬ç«‹çš„ä¸€ä¸ªå¸ƒå±€ï¼Œå¦‚æœå®‰è£…æ’ä»¶è¿˜å¯ä»¥é¢„è§ˆç•Œé¢çš„æ•ˆæœ12345678910111213141516171819202122232425262728293031323334class RecyclerUI: AnkoComponent&lt;AndroidAdapter&gt;&#123; override fun createView(ui: AnkoContext&lt;AndroidAdapter&gt;): View = with(ui)&#123; verticalLayout &#123; orientation = LinearLayout.HORIZONTAL lparams &#123; topMargin = dip(10) leftMargin = dip(15) rightMargin = dip(15) bottomMargin = dip(10) &#125; imageView &#123; id = R.id.android_item_iv imageResource = R.mipmap.android_icon lparams &#123; width = dip(90) height = dip(90) &#125; &#125; verticalLayout &#123; textView &#123; id = R.id.android_item_tv1 textSize = 18.toFloat() &#125; textView &#123; id = R.id.android_item_tv2 textSize = 16.toFloat() textColor = Color.RED &#125; &#125; &#125; &#125;&#125; è‡³æ­¤ï¼Œå°é¡¹ç›®çš„è®²è§£å°±ç»“æŸäº†ã€‚ åšæŒæ€»ä¼šæœ‰ç»“æœï¼Œæ€»ä¼šæœ‰æ”¶è·çš„]]></content>
      <categories>
        <category>Kotlin</category>
      </categories>
      <tags>
        <tag>Kotlin</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[UIç»˜åˆ¶_Painté«˜çº§æ¸²æŸ“]]></title>
    <url>%2F2016%2F11%2F01%2F20180211_%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F(%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F)%2F</url>
    <content type="text"><![CDATA[UMLå»ºæ¨¡ Bitmap bitmap = BitmapFatory.deresources(res,id); åœºæ™¯ï¼šåˆ›å»ºå¯¹è±¡ç®€å•å·¥å‚ï¼šæä¾›åˆ›å»ºå¯¹è±¡çš„åŠŸèƒ½ï¼Œä¸éœ€è¦å…³å¿ƒå…·ä½“çš„å®ç° å¥½å¤„ï¼šé™ä½å®¢æˆ·ç«¯ä¸æ¨¡å—ä¹‹é—´çš„è€¦åˆåº¦ï¼ˆæœ€å°‘çŸ¥è¯†åŸåˆ™ï¼‰ éœ€æ±‚ï¼šå¯¼å‡ºæ•°æ®æ–‡ä»¶ï¼šæ•°æ®åº“æ–‡ä»¶ã€æ–‡æœ¬æ–‡ä»¶ å·¥å‚æ–¹æ³•ï¼šæŠŠå¯¹è±¡çš„å®ç°å»¶è¿Ÿåˆ°å­ç±»å®Œæˆ]]></content>
      <categories>
        <category>UIç»˜åˆ¶</category>
      </categories>
      <tags>
        <tag>UIç»˜åˆ¶</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[UIç»˜åˆ¶_Painté«˜çº§æ¸²æŸ“]]></title>
    <url>%2F2016%2F11%2F01%2FUI%E7%BB%98%E5%88%B6_Paint%E9%AB%98%E7%BA%A7%E6%B8%B2%E6%9F%93%2F</url>
    <content type="text"><![CDATA[ä¸Šä¸€ç¯‡è®²è§£äº†Paintçš„åŸºæœ¬ä½¿ç”¨ï¼Œä»åˆå§‹åŒ–åˆ°ç»˜åˆ¶ï¼Œå­¦å¥½äº†åŸºæœ¬åŠŸæ¥ä¸‹æ¥è¦å¼€å§‹Paintçš„é«˜çº§æ¸²æŸ“çš„éƒ¨åˆ†åœ¨å¼€å§‹ä¹‹å‰è¿˜æ˜¯è¦ç•™ä¸€ä¸‹Paintçš„åŸºæœ¬ä½¿ç”¨çš„åœ°å€ Paintçš„åŸºæœ¬ä½¿ç”¨ http://www.jianshu.com/p/88d718d1945e å¼€å§‹æ’¸ç ~ æ­£æ–‡å…ˆæ¥çœ‹ä¸€ä¸‹è¦æçš„æ•ˆæœå›¾ ok,åœ¨Androidä¸­æä¾›äº†å¦‚ä¸‹çš„æ¸²æŸ“ç±» BitmapShader /** * TileMode.CLAMP æ‹‰ä¼¸æœ€åä¸€ä¸ªåƒç´ å»é“ºæ»¡å‰©ä¸‹çš„åœ°æ–¹ * TileMode.MIRROR é€šè¿‡é•œåƒç¿»è½¬é“ºæ»¡å‰©ä¸‹çš„åœ°æ–¹ã€‚ * TileMode.REPEAT é‡å¤å›¾ç‰‡å¹³é“ºæ•´ä¸ªç”»é¢ï¼ˆç”µè„‘è®¾ç½®å£çº¸ï¼‰ */ BitmapShader bitMapShader = new BitmapShader(mBitMap,Shader.TileMode.MIRROR,Shader.TileMode.MIRROR); LinearGradient /**çº¿æ€§æ¸å˜ * x0, y0, èµ·å§‹ç‚¹ * x1, y1, ç»“æŸç‚¹ * int[] mColors, ä¸­é—´ä¾æ¬¡è¦å‡ºç°çš„å‡ ä¸ªé¢œè‰² * float[] positions,æ•°ç»„å¤§å°è·Ÿcolorsæ•°ç»„ä¸€æ ·å¤§ï¼Œä¸­é—´ä¾æ¬¡æ‘†æ”¾çš„å‡ ä¸ªé¢œè‰²åˆ†åˆ«æ”¾ç½®åœ¨é‚£ä¸ªä½ç½®ä¸Š(å‚è€ƒæ¯”ä¾‹ä»å·¦å¾€å³) * tile */ LinearGradient linearGradient = new LinearGradient( 0, 0,800, 800, mColors, null, Shader.TileMode.CLAMP); RadialGradient RadialGradient mRadialGradient = new RadialGradient(300, 300, 100, mColors, null, Shader.TileMode.REPEAT); SweepGradient SweepGradient mSweepGradient = new SweepGradient(300, 300, mColors, null); ComposeShader ComposeShader mComposeShader = new ComposeShader(linearGradient, bitMapShader, PorterDuff.Mode.DST_IN); ä½¿ç”¨èµ·æ¥éå¸¸çš„ç®€å•ï¼Œé¦–å…ˆæˆ‘ä»¬å°±ä½¿ç”¨composeShaderæ¥å®ç°ç¬¬äºŒå¼ å›¾çš„æ•ˆæœ //å›¾åƒæ¸²æŸ“ BitmapShader bitmapShader = new BitmapShader(bitmap, Shader.TileMode.CLAMP, Shader.TileMode.CLAMP); LinearGradient linearGradient = new LinearGradient(0, 0, width, height, Color.GREEN, Color.BLUE, Shader.TileMode.REPEAT); RadialGradient radialGradient = new RadialGradient(width / 2, height / 2, width / 2, new int[]{0xffff0000, 0xff00ff00, 0xff0000ff}, null, Shader.TileMode.CLAMP); SweepGradient sweepGradient = new SweepGradient(width / 2, height / 2, new int[]{0xffff0000, 0xff00ff00, 0xff0000ff}, null); //å°†å›¾åƒæ¸²æŸ“å’Œç¯å½¢æ¸å˜è¿›è¡Œç»„åˆï¼Œç»„åˆçš„å½¢å¼æ˜¯å¢å¼º ComposeShader composeShader = new ComposeShader(bitmapShader, radialGradient, PorterDuff.Mode.MULTIPLY); mPaint.setShader(composeShader); //ç»˜åˆ¶çŸ©å½¢åŒºåŸŸç”¨äºæ˜¾ç¤ºç»„åˆä¹‹åçš„æ•ˆæœ canvas.drawRect(0, 0, width, height, mPaint); ç„¶åæˆ‘ä»¬ä½¿ç”¨BitmapShaderæ¥å®ç°æ”¾å¤§é•œçš„æ•ˆæœ å¾—åˆ°æ”¾å¤§åå›¾ç‰‡ //æ”¾å¤§åçš„æ•´ä¸ªå›¾ç‰‡ Bitmap scaleBitmap = Bitmap.createScaledBitmap(mBitmap, mBitmap.getWidth() * factor, mBitmap.getHeight() * factor, true); bitmapShader = new BitmapShader(scaleBitmap, Shader.TileMode.CLAMP, Shader.TileMode.CLAMP); è®¾ç½®åœ†å½¢çš„æ”¾å¤§é•œå¹¶å°†BitmapShaderè®¾ç½®ç»™æ”¾å¤§é•œDrawable mShapeDrawable = new ShapeDrawable(new OvalShape()); mShapeDrawable.getPaint().setShader(bitmapShader); mShapeDrawable.setBounds(0, 0, RADIUS * 2, RADIUS * 2); matrix = new Matrix(); éšç€æ‰‹æŒ‡æ»‘åŠ¨ï¼Œæ”¾å¤§é•œä¸æ–­ç§»åŠ¨ä½ç½® //å°†æ”¾å¤§é•œçš„å›¾ç‰‡å¾€ç›¸åçš„æ–¹å‘æŒªåŠ¨ matrix.setTranslate(-x * factor + RADIUS, -y * factor + RADIUS); mShapeDrawable.getPaint().getShader().setLocalMatrix(matrix); //åˆ‡å‡ºæ‰‹åŠ¿åŒºåŸŸçš„ä½ç½®çš„åœ† mShapeDrawable.setBounds(x - RADIUS, y - RADIUS, x + RADIUS, y + RADIUS); invalidate(); ä½¿ç”¨Androidçš„æ¸²æŸ“è¿˜èƒ½åšå¥½å¤šçš„ç‚«é…·çš„æ•ˆæœï¼Œè¿™é‡Œå°±ä¸ä¸€ä¸€è¿›è¡Œè¯´æ˜ã€‚]]></content>
      <categories>
        <category>UIç»˜åˆ¶</category>
      </categories>
      <tags>
        <tag>UIç»˜åˆ¶</tag>
      </tags>
  </entry>
</search>
